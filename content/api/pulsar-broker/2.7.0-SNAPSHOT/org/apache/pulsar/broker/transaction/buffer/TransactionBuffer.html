<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_232) on Sun Sep 13 18:17:38 UTC 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TransactionBuffer (Pulsar Broker 2.7.0-SNAPSHOT API)</title>
<meta name="date" content="2020-09-13">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TransactionBuffer (Pulsar Broker 2.7.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TransactionBuffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBufferProvider.html" title="interface in org.apache.pulsar.broker.transaction.buffer"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html" target="_top">Frames</a></li>
<li><a href="TransactionBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.pulsar.broker.transaction.buffer</div>
<h2 title="Interface TransactionBuffer" class="title">Interface TransactionBuffer</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/impl/PersistentTransactionBuffer.html" title="class in org.apache.pulsar.broker.transaction.buffer.impl">PersistentTransactionBuffer</a></dd>
</dl>
<hr>
<br>
<pre>@Beta
public interface <span class="typeNameLabel">TransactionBuffer</span></pre>
<div class="block">A class represent a transaction buffer. The transaction buffer
 is per partition. All the messages published within transactions
 are appended to a transaction buffer. They are not visible to consumers
 or readers before the transaction is committed.

 <p>When committing transaction starts, the broker will append a `COMMITTED`
 marker to the data partition first to mark the transaction is committed.
 The broker knows the data ledger of the commit marker and calls <a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#commitTxn-org.apache.pulsar.client.api.transaction.TxnID-long-long-"><code>commitTxn(TxnID, long, long)</code></a>
 to commit and seal the buffer.

 <p>When the marker is appended to the data partition, all the entries are visible
 to the consumers. So a transaction reader <a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBufferReader.html" title="interface in org.apache.pulsar.broker.transaction.buffer"><code>TransactionBufferReader</code></a> will be
 opened to read the entries when the broker sees the commit marker. There is a chance
 broker crashes after writing the marker to data partition but before committing
 the transaction in transaction buffer. That is fine. Because the transaction buffer
 will fail opening the transaction buffer reader since the transaction is still marked
 as open. The broker can keep retry until the TC (transaction coordinator) eventually
 commits the buffer again.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#abortTxn-org.apache.pulsar.client.api.transaction.TxnID-">abortTxn</a></span>(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID)</code>
<div class="block">Abort the transaction and all the entries of this transaction will
 be discarded.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;org.apache.bookkeeper.mledger.Position&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#appendBufferToTxn-org.apache.pulsar.client.api.transaction.TxnID-long-long-io.netty.buffer.ByteBuf-">appendBufferToTxn</a></span>(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnId,
                 long&nbsp;sequenceId,
                 long&nbsp;batchSize,
                 io.netty.buffer.ByteBuf&nbsp;buffer)</code>
<div class="block">Append the buffer to the transaction buffer.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#closeAsync--">closeAsync</a></span>()</code>
<div class="block">Close the buffer asynchronously.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;org.apache.bookkeeper.mledger.Position&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#commitPartitionTopic-org.apache.pulsar.client.api.transaction.TxnID-">commitPartitionTopic</a></span>(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID)</code>
<div class="block">Append committed marker to the related origin topic partition.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#commitTxn-org.apache.pulsar.client.api.transaction.TxnID-long-long-">commitTxn</a></span>(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID,
         long&nbsp;committedAtLedgerId,
         long&nbsp;committedAtEntryId)</code>
<div class="block">Commit the transaction and seal the buffer for this transaction.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#endTxnOnPartition-org.apache.pulsar.client.api.transaction.TxnID-int-">endTxnOnPartition</a></span>(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID,
                 int&nbsp;txnAction)</code>
<div class="block">Handle TC endTxnOnPartition command</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionMeta.html" title="interface in org.apache.pulsar.broker.transaction.buffer">TransactionMeta</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#getTransactionMeta-org.apache.pulsar.client.api.transaction.TxnID-">getTransactionMeta</a></span>(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID)</code>
<div class="block">Return the metadata of a transaction in the buffer.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBufferReader.html" title="interface in org.apache.pulsar.broker.transaction.buffer">TransactionBufferReader</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#openTransactionBufferReader-org.apache.pulsar.client.api.transaction.TxnID-long-">openTransactionBufferReader</a></span>(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID,
                           long&nbsp;startSequenceId)</code>
<div class="block">Open a <a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBufferReader.html" title="interface in org.apache.pulsar.broker.transaction.buffer"><code>TransactionBufferReader</code></a> to read entries of a given transaction
 starting from the provided <tt>sequenceId</tt>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html#purgeTxns-java.util.List-">purgeTxns</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;dataLedgers)</code>
<div class="block">Purge all the data of the transactions who are committed and stored
 in the provided data ledgers.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getTransactionMeta-org.apache.pulsar.client.api.transaction.TxnID-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTransactionMeta</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionMeta.html" title="interface in org.apache.pulsar.broker.transaction.buffer">TransactionMeta</a>&gt;&nbsp;getTransactionMeta(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID)</pre>
<div class="block">Return the metadata of a transaction in the buffer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnID</code> - the transaction id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future represents the result of the operation</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/exceptions/TransactionNotFoundException.html" title="class in org.apache.pulsar.broker.transaction.buffer.exceptions">TransactionNotFoundException</a></code> - if the transaction
         is not in the buffer.</dd>
</dl>
</li>
</ul>
<a name="appendBufferToTxn-org.apache.pulsar.client.api.transaction.TxnID-long-long-io.netty.buffer.ByteBuf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendBufferToTxn</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;org.apache.bookkeeper.mledger.Position&gt;&nbsp;appendBufferToTxn(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnId,
                                                                            long&nbsp;sequenceId,
                                                                            long&nbsp;batchSize,
                                                                            io.netty.buffer.ByteBuf&nbsp;buffer)</pre>
<div class="block">Append the buffer to the transaction buffer.

 <p>The entry will be indexed by <tt>txnId</tt> and <tt>sequenceId</tt>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnId</code> - the transaction id</dd>
<dd><code>sequenceId</code> - the sequence id of the entry in this transaction buffer.</dd>
<dd><code>batchSize</code> - </dd>
<dd><code>buffer</code> - the entry buffer</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future represents the result of the operation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/exceptions/TransactionSealedException.html" title="class in org.apache.pulsar.broker.transaction.buffer.exceptions">TransactionSealedException</a></code> - if the transaction
         has been sealed.</dd>
</dl>
</li>
</ul>
<a name="openTransactionBufferReader-org.apache.pulsar.client.api.transaction.TxnID-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openTransactionBufferReader</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBufferReader.html" title="interface in org.apache.pulsar.broker.transaction.buffer">TransactionBufferReader</a>&gt;&nbsp;openTransactionBufferReader(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID,
                                                                       long&nbsp;startSequenceId)</pre>
<div class="block">Open a <a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBufferReader.html" title="interface in org.apache.pulsar.broker.transaction.buffer"><code>TransactionBufferReader</code></a> to read entries of a given transaction
 starting from the provided <tt>sequenceId</tt>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnID</code> - transaction id</dd>
<dd><code>startSequenceId</code> - the sequence id to start read</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future represents the result of open operation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/exceptions/TransactionNotFoundException.html" title="class in org.apache.pulsar.broker.transaction.buffer.exceptions">TransactionNotFoundException</a></code> - if the transaction
         is not in the buffer.</dd>
</dl>
</li>
</ul>
<a name="endTxnOnPartition-org.apache.pulsar.client.api.transaction.TxnID-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endTxnOnPartition</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;endTxnOnPartition(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID,
                                          int&nbsp;txnAction)</pre>
<div class="block">Handle TC endTxnOnPartition command</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="commitPartitionTopic-org.apache.pulsar.client.api.transaction.TxnID-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitPartitionTopic</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;org.apache.bookkeeper.mledger.Position&gt;&nbsp;commitPartitionTopic(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID)</pre>
<div class="block">Append committed marker to the related origin topic partition.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnID</code> - transaction id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future represents the position of the committed marker in the origin topic partition.</dd>
</dl>
</li>
</ul>
<a name="commitTxn-org.apache.pulsar.client.api.transaction.TxnID-long-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitTxn</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;commitTxn(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID,
                                  long&nbsp;committedAtLedgerId,
                                  long&nbsp;committedAtEntryId)</pre>
<div class="block">Commit the transaction and seal the buffer for this transaction.

 <p>If a transaction is sealed, no more entries can be <code>#appendBufferToTxn(TxnID, long, ByteBuf)</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnID</code> - the transaction id</dd>
<dd><code>committedAtLedgerId</code> - the data ledger id where the commit marker of the transaction was appended to.</dd>
<dd><code>committedAtEntryId</code> - the data ledger id where the commit marker of the transaction was appended to.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future represents the result of commit operation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/exceptions/TransactionNotFoundException.html" title="class in org.apache.pulsar.broker.transaction.buffer.exceptions">TransactionNotFoundException</a></code> - if the transaction
         is not in the buffer.</dd>
</dl>
</li>
</ul>
<a name="abortTxn-org.apache.pulsar.client.api.transaction.TxnID-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abortTxn</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;abortTxn(org.apache.pulsar.client.api.transaction.TxnID&nbsp;txnID)</pre>
<div class="block">Abort the transaction and all the entries of this transaction will
 be discarded.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txnID</code> - the transaction id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future represents the result of abort operation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/exceptions/TransactionNotFoundException.html" title="class in org.apache.pulsar.broker.transaction.buffer.exceptions">TransactionNotFoundException</a></code> - if the transaction
         is not in the buffer.</dd>
</dl>
</li>
</ul>
<a name="purgeTxns-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeTxns</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;purgeTxns(<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;dataLedgers)</pre>
<div class="block">Purge all the data of the transactions who are committed and stored
 in the provided data ledgers.

 <p>This method will be called by the broker before they delete the ledgers.
 It ensures that all the transactions committed in those ledgers can be purged.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dataLedgers</code> - the list of data ledgers.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future represents the result of purge operations.</dd>
</dl>
</li>
</ul>
<a name="closeAsync--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>closeAsync</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent">CompletableFuture</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;closeAsync()</pre>
<div class="block">Close the buffer asynchronously.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TransactionBuffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../org/apache/pulsar/broker/transaction/buffer/TransactionBufferProvider.html" title="interface in org.apache.pulsar.broker.transaction.buffer"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/pulsar/broker/transaction/buffer/TransactionBuffer.html" target="_top">Frames</a></li>
<li><a href="TransactionBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017&#x2013;2020 <a href="http://www.apache.org/">Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
