<!DOCTYPE html>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<html>
  <head>
    <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -108) };
  window.addEventListener("hashchange", shiftWindow);
  window.addEventListener("pageshow", shiftWindow);
  function load() { if (window.location.hash) shiftWindow(); }
</script>

<title>The Pulsar admin interface</title>

<meta charset="utf-8">

<link rel="stylesheet" href="/css/style.css">
<link rel="shortcut icon" href="/img/favicon.ico">

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="/js/jquery.tocify.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

<script src="/js/jquery.scrollTo.min.js"></script>
<script async src="/js/main.js"></script>

  </head>
  <body class="body">
    <main class="main">
      <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<nav class="navbar navbar-toggleable-md navbar-light container-fluid sticky-top">
  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

 
  <a class="navbar-brand" href="/">
    <img class="main-logo" src="/img/pulsar-logo.png" alt="Pulsar logo">
  </a>
  

  <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/docs/latest/getting-started/LocalCluster">Documentation</a>
      </li>

      <li class="nav-item">
          <a class="nav-link" href="/download">Download</a>
      </li>

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="clientLibsDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Client libraries
        </a>
        <div class="dropdown-menu" aria-labelledby="clientLibsDropdown">
          <a class="dropdown-item" href="/docs/latest/clients/Java">
            Java
          </a>
          <a class="dropdown-item" href="/docs/latest/clients/Python">
            Python
          </a>
          <a class="dropdown-item" href="/docs/latest/clients/Cpp">
            C++
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="/api/client">
            Java client Javadoc
          </a>
          <a class="dropdown-item" href="/api/admin">
            Java admin Javadoc
          </a>
          <a class="dropdown-item" href="/api/python">
            Python API docs
          </a>
          <a class="dropdown-item" href="/api/cpp">
            C++ API docs
          </a>
        </div>
      </li>

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="versionsDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Community
        </a>
        <div class="dropdown-menu" aria-labelledby="versionsDropdown">
          <h3 class="dropdown-header">Get in touch</h3>
          <a class="dropdown-item" href="/mailing-lists">Mailing Lists</a>
          <a class="dropdown-item" href="https://twitter.com/Apache_Pulsar">Twitter</a>
          <a class="dropdown-item" href="https://github.com/apache/incubator-pulsar/wiki">Wiki</a>
          <a class="dropdown-item" href="https://github.com/apache/incubator-pulsar/issues">Issue tracking</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="/presentations">Presentations</a>
          <a class="dropdown-item" href="/team">Team</a>
          <h3 class="dropdown-header">Resources</h3>
          <a class="dropdown-item" href="/presentations">Presentations</a>
          <a class="dropdown-item" href="/team">Team</a>
          <div class="dropdown-divider"></div>
          <h3 class="dropdown-header">Apache</h3>
          <a class="dropdown-item" href="http://www.apache.org/">The Apache Software Foundation</a>
          <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a>
          <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
          <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a>
          <a class="dropdown-item" href="http://www.apache.org/security">Security</a>
        </div>
      </li>
    </ul>
  </div>
  <a href="http://www.apache.org/">
    <img class="asf-logo" title="Apache Software Foundation" src="/img/feather.png" />
  </a>
</nav>


      <main>
        <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->


<div class="docs-container container-fluid">
  <div class="row">
    <nav class="sidebar-nav hidden-md-down col-lg-3">
      <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->


<aside class="sidebar-nav">
  <div id="sidebar-accordion" role="tablist" aria-multiselectable="true">
    
    
    <div class="card">
      <div class="card-header" role="tab" id="heading-getting-started">
        <h5>
          <a data-toggle="collapse" data-parent="#sidebar-accordion" href="#collapse-getting-started" aria-controls="collapse-getting-started">
            Getting started
          </a>
        </h5>
      </div>

      <div class="sidebar-group collapse" id="collapse-getting-started" role="tabpanel" aria-labelledby="heading-getting-started">
        <ul>
          
          
          <li>
            <a href="/docs/latest/getting-started/LocalCluster">
              Run Pulsar locally
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/getting-started/Clients">
              Client libraries
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/getting-started/ConceptsAndArchitecture">
              Concepts and architecture
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    
    
    <div class="card">
      <div class="card-header" role="tab" id="heading-deployment">
        <h5>
          <a data-toggle="collapse" data-parent="#sidebar-accordion" href="#collapse-deployment" aria-controls="collapse-deployment">
            Deployment
          </a>
        </h5>
      </div>

      <div class="sidebar-group collapse" id="collapse-deployment" role="tabpanel" aria-labelledby="heading-deployment">
        <ul>
          
          
          <li>
            <a href="/docs/latest/deployment/InstanceSetup">
              Deploying on bare metal
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/deployment/Kubernetes">
              Pulsar on Kubernetes
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/deployment/Kubernetes/#pulsar-on-google-container-engine">
              Pulsar on Google Container Engine
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/deployment/Kubernetes/#pulsar-on-amazon-web-services">
              Pulsar on AWS
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    
    
    <div class="card">
      <div class="card-header" role="tab" id="heading-pulsar-administration">
        <h5>
          <a data-toggle="collapse" data-parent="#sidebar-accordion" href="#collapse-pulsar-administration" aria-controls="collapse-pulsar-administration">
            Pulsar administration
          </a>
        </h5>
      </div>

      <div class="sidebar-group collapse" id="collapse-pulsar-administration" role="tabpanel" aria-labelledby="heading-pulsar-administration">
        <ul>
          
          
          <li class="active">
            <a href="/docs/latest/admin/AdminInterface">
              Pulsar admin interface
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/admin/ClustersBrokers">
              Clusters and brokers
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/admin/PropertiesNamespaces">
              Properties and namespaces
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/admin/ZooKeeperBookKeeper">
              ZooKeeper and BookKeeper
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/admin/Dashboard">
              Dashboard
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/admin/Authz">
              Authentication and authorization
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/admin/GeoReplication">
              Geo-replication
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/admin/Stats">
              Pulsar statistics
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/admin/ModularLoadManager">
              Modular load manager
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    
    
    <div class="card">
      <div class="card-header" role="tab" id="heading-client-libraries">
        <h5>
          <a data-toggle="collapse" data-parent="#sidebar-accordion" href="#collapse-client-libraries" aria-controls="collapse-client-libraries">
            Client libraries
          </a>
        </h5>
      </div>

      <div class="sidebar-group collapse" id="collapse-client-libraries" role="tabpanel" aria-labelledby="heading-client-libraries">
        <ul>
          
          
          <li>
            <a href="/docs/latest/clients/Java">
              Java client
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/clients/Cpp">
              C++ client
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/clients/Python">
              Python client
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/clients/WebSocket">
              WebSocket API
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    
    
    <div class="card">
      <div class="card-header" role="tab" id="heading-adaptors">
        <h5>
          <a data-toggle="collapse" data-parent="#sidebar-accordion" href="#collapse-adaptors" aria-controls="collapse-adaptors">
            Adaptors
          </a>
        </h5>
      </div>

      <div class="sidebar-group collapse" id="collapse-adaptors" role="tabpanel" aria-labelledby="heading-adaptors">
        <ul>
          
          
          <li>
            <a href="/docs/latest/adaptors/PulsarSpark">
              Spark Streaming
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/adaptors/PulsarStorm">
              Apache Storm
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    
    
    <div class="card">
      <div class="card-header" role="tab" id="heading-advanced">
        <h5>
          <a data-toggle="collapse" data-parent="#sidebar-accordion" href="#collapse-advanced" aria-controls="collapse-advanced">
            Advanced
          </a>
        </h5>
      </div>

      <div class="sidebar-group collapse" id="collapse-advanced" role="tabpanel" aria-labelledby="heading-advanced">
        <ul>
          
          
          <li>
            <a href="/docs/latest/advanced/PartitionedTopics">
              Partitioned topics
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/advanced/RetentionExpiry">
              Retention and expiry
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    
    
    <div class="card">
      <div class="card-header" role="tab" id="heading-developing-pulsar">
        <h5>
          <a data-toggle="collapse" data-parent="#sidebar-accordion" href="#collapse-developing-pulsar" aria-controls="collapse-developing-pulsar">
            Developing Pulsar
          </a>
        </h5>
      </div>

      <div class="sidebar-group collapse" id="collapse-developing-pulsar" role="tabpanel" aria-labelledby="heading-developing-pulsar">
        <ul>
          
          
          <li>
            <a href="/docs/latest/project/SimulationTools">
              Simulation tools
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/project/BinaryProtocol">
              Pulsar binary protocol
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/project/Codebase">
              Codebase
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    
    
    <div class="card">
      <div class="card-header" role="tab" id="heading-reference">
        <h5>
          <a data-toggle="collapse" data-parent="#sidebar-accordion" href="#collapse-reference" aria-controls="collapse-reference">
            Reference
          </a>
        </h5>
      </div>

      <div class="sidebar-group collapse" id="collapse-reference" role="tabpanel" aria-labelledby="heading-reference">
        <ul>
          
          
          <li>
            <a href="/docs/latest/reference/RestApi">
              Pulsar REST API
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/reference/CliTools">
              Command-line tools
            </a>
          </li>
          
          
          <li>
            <a href="/docs/latest/reference/Configuration">
              Pulsar configuration
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    
  </div>
</aside>


    </nav>

    <article class="col-xs-12 col-sm-12 col-md-12 col-lg-7">
      <section class="docs-header">
        <h1 class="docs-title">The Pulsar admin interface</h1>
        
        <section class="tags">
          
          <!-- <span class="badge badge-pill badge-primary">admin</span> -->
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-admin">admin</button>
          <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<div class="modal fade" id="modal-admin">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Pages with the <strong>admin</strong> tag</h5>
      </div>
      <div class="modal-body">
        <ul>
          
          
          <li><a href="/docs/latest/admin/AdminInterface/">The Pulsar admin interface</a></li>
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/latest/admin/Authz/">Authentication and authorization in Pulsar</a></li>
          
          
          
          
          
          
          
          <li><a href="/docs/latest/reference/CliTools/">Pulsar command-line tools</a></li>
          
          
          
          
          
          
          
          <li><a href="/docs/latest/admin/ClustersBrokers/">Pulsar cluster and broker administration</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/latest/deployment/InstanceSetup/">Deploying a Pulsar instance</a></li>
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/latest/advanced/PartitionedTopics/">Partitioned topics</a></li>
          
          
          
          <li><a href="/docs/latest/admin/PropertiesNamespaces/">Managing properties and namespaces</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/latest/advanced/RetentionExpiry/">Message retention and expiry</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </div>
</div>

          
          <!-- <span class="badge badge-pill badge-primary">cli</span> -->
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-cli">cli</button>
          <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<div class="modal fade" id="modal-cli">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Pages with the <strong>cli</strong> tag</h5>
      </div>
      <div class="modal-body">
        <ul>
          
          
          <li><a href="/docs/latest/admin/AdminInterface/">The Pulsar admin interface</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/latest/reference/CliTools/">Pulsar command-line tools</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </div>
</div>

          
          <!-- <span class="badge badge-pill badge-primary">rest</span> -->
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-rest">rest</button>
          <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<div class="modal fade" id="modal-rest">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Pages with the <strong>rest</strong> tag</h5>
      </div>
      <div class="modal-body">
        <ul>
          
          
          <li><a href="/docs/latest/admin/AdminInterface/">The Pulsar admin interface</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </div>
</div>

          
          <!-- <span class="badge badge-pill badge-primary">java</span> -->
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-java">java</button>
          <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<div class="modal fade" id="modal-java">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Pages with the <strong>java</strong> tag</h5>
      </div>
      <div class="modal-body">
        <ul>
          
          
          <li><a href="/docs/latest/admin/AdminInterface/">The Pulsar admin interface</a></li>
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/latest/admin/Authz/">Authentication and authorization in Pulsar</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/latest/clients/Java/">The Pulsar Java client</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/latest/adaptors/PulsarSpark/">Spark Streaming Pulsar receiver</a></li>
          
          
          
          
          
          <li><a href="/docs/latest/adaptors/PulsarStorm/">Pulsar adaptor for Apache Storm</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </div>
</div>

          
        </section>

        <hr class="hr">
      </section>

      <section class="content">
        <p>The Pulsar admin interface enables you to manage all of the important entities in a Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>, such as <span class="popover-term" tabindex="0" title="What is a property?" data-placement="top" data-content="A Pulsar tenant." data-toggle="popover" data-trigger="focus">properties</span>, <span class="popover-term" tabindex="0" title="What is a topic?" data-placement="top" data-content="A named channel used to pass messages published by producers to consumers who process those messages." data-toggle="popover" data-trigger="focus">topics</span>, and <span class="popover-term" tabindex="0" title="What is a namespace?" data-placement="top" data-content="A grouping mechanism for related topics." data-toggle="popover" data-trigger="focus">namespaces</span>.</p>

<p>You can currently interact with the admin interface via:</p>

<ol>
  <li>Making HTTP calls against the admin <a href="../../reference/RestApi">REST API</a> provided by Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">brokers</span>.</li>
  <li>
    <p>The <code class="highlighter-rouge">pulsar-admin</code> CLI tool, which is available in the <code class="highlighter-rouge">bin</code> folder of your <a href="../../getting-started/LocalCluster">Pulsar installation</a>:</p>

    <div class="language-shell highlighter-rouge"><pre class="highlight"><code> <span class="nv">$ </span>bin/pulsar-admin
</code></pre>
    </div>

    <p>Full documentation for this tool can be found in the <a href="../../reference/CliTools#pulsar-admin">Pulsar command-line tools</a> doc.</p>
  </li>
  <li>A Java client interface.</li>
</ol>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<div class="admonition">
  <div class="info">
    <span class="admonition-title"><p>The REST API is <em>the</em> admin interface</p>
</span>
    <p>Under the hood, both the <code class="highlighter-rouge">pulsar-admin</code> CLI tool and the Java client both use the REST API. If you’d like to implement your own admin interface client, you should use the REST API as well. Full documentation can be found <a href="../../reference/RestApi">here</a>.</p>

  </div>
</div>

<p>In this document, examples from each of the three available interfaces will be shown.</p>

<h2 id="admin-setup">Admin setup</h2>

<p>Each of Pulsar’s three admin interfaces—the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> CLI tool, the <a href="/api/admin">Java admin API</a>, and the <a href="../../reference/RestApi">REST API</a>—requires some special setup if you have <a href="../../admin/Authz#authentication-providers">authentication</a> enabled in your Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>.</p>

<h3 id="pulsar-admin">pulsar-admin</h3>

<p>If you have <a href="../../admin/Authz#authentication-providers">authentication</a> enabled, you will need to provide an auth configuration to use the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> tool. By default, the configuration for the <code class="highlighter-rouge">pulsar-admin</code> tool is found in the <a href="../../reference/Configuration#client"><code class="highlighter-rouge">conf/client.conf</code></a> file. Here are the available parameters:</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<table class="config">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    
    <tr id="client-webServiceUrl">
      <td>webServiceUrl</td>
      <td>The web URL for the cluster.
</td>
      <td>http://localhost:8080/</td>
    </tr>
    
    <tr id="client-brokerServiceUrl">
      <td>brokerServiceUrl</td>
      <td>The Pulsar protocol URL for the cluster.
</td>
      <td>pulsar://localhost:6650/</td>
    </tr>
    
    <tr id="client-authPlugin">
      <td>authPlugin</td>
      <td>The authentication plugin.
</td>
      <td></td>
    </tr>
    
    <tr id="client-authParams">
      <td>authParams</td>
      <td>The authentication parameters for the cluster, as a comma-separated string.
</td>
      <td></td>
    </tr>
    
    <tr id="client-useTls">
      <td>useTls</td>
      <td>Whether or not TLS authentication will be enforced in the cluster.
</td>
      <td>false</td>
    </tr>
    
    <tr id="client-tlsAllowInsecureConnection">
      <td>tlsAllowInsecureConnection</td>
      <td>
</td>
      <td></td>
    </tr>
    
    <tr id="client-tlsTrustCertsFilePath">
      <td>tlsTrustCertsFilePath</td>
      <td>
</td>
      <td></td>
    </tr>
    
  </tbody>
</table>

<h3 id="rest-api">REST API</h3>

<p>You can find documentation for the REST API exposed by Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">brokers</span> in <a href="../../reference/RestApi">this reference document</a>.</p>

<h3 id="java-admin-client">Java admin client</h3>

<p>To use the Java admin API, instantiate a <a target="_blank" href="/api/admin/org/apache/pulsar/client/admin/PulsarAdmin.html"><code class="highlighter-rouge">PulsarAdmin</code></a> object, specifying a URL for a Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">broker</span> and a <a target="_blank" href="/api/admin/org/apache/pulsar/client/admin/ClientConfiguration.html"><code class="highlighter-rouge">ClientConfiguration</code></a>. Here’s a minimal example using <code class="highlighter-rouge">localhost</code>:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://localhost:8080"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">authPluginClassName</span> <span class="o">=</span> <span class="s">"com.org.MyAuthPluginClass"</span><span class="o">;</span> <span class="c1">//Pass auth-plugin class fully-qualified name if Pulsar-security enabled</span>
<span class="n">String</span> <span class="n">authParams</span> <span class="o">=</span> <span class="s">"param1=value1"</span><span class="o">;</span><span class="c1">//Pass auth-param if auth-plugin class requires it</span>
<span class="kt">boolean</span> <span class="n">useTls</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="kt">boolean</span> <span class="n">tlsAllowInsecureConnection</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">String</span> <span class="n">tlsTrustCertsFilePath</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">ClientConfiguration</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfiguration</span><span class="o">();</span>
<span class="n">config</span><span class="o">.</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">authPluginClassName</span><span class="o">,</span> <span class="n">authParams</span><span class="o">);</span>
<span class="n">config</span><span class="o">.</span><span class="na">setUseTls</span><span class="o">(</span><span class="n">useTls</span><span class="o">);</span>
<span class="n">config</span><span class="o">.</span><span class="na">setTlsAllowInsecureConnection</span><span class="o">(</span><span class="n">tlsAllowInsecureConnection</span><span class="o">);</span>
<span class="n">config</span><span class="o">.</span><span class="na">setTlsTrustCertsFilePath</span><span class="o">(</span><span class="n">tlsTrustCertsFilePath</span><span class="o">);</span>

<span class="n">PulsarAdmin</span> <span class="n">admin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PulsarAdmin</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">config</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="managing-clusters">Managing clusters</h2>

<p>Pulsar clusters consist of one or more Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">brokers</span>, one or more <span class="popover-term" tabindex="0" title="What is BookKeeper?" data-placement="top" data-content="Apache BookKeeper is a persistent log storage system that Pulsar uses to store message data." data-toggle="popover" data-trigger="focus">BookKeeper</span> servers (aka <span class="popover-term" tabindex="0" title="What is a bookie?" data-placement="top" data-content="Bookie is just a nickname for an individual BookKeeper server." data-toggle="popover" data-trigger="focus">bookies</span>), and a <span class="popover-term" tabindex="0" title="What is ZooKeeper?" data-placement="top" data-content="ZooKeeper is a service that Pulsar uses for coordination-related tasks.&lt;br /&gt;&lt;br /&gt;A Pulsar instance relies on both a local ZooKeeper for cluster-specific tasks and a global ZooKeeper for instance-wide tasks." data-toggle="popover" data-trigger="focus">ZooKeeper</span> cluster that provides configuration and coordination management.</p>

<p>Clusters can be managed via:</p>

<ul>
  <li>The <a href="../../reference/CliTools#pulsar-admin-clusters"><code class="highlighter-rouge">clusters</code></a> command of the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> tool</li>
  <li>The <code class="highlighter-rouge">/admin/clusters</code> endpoint of the admin <a href="../../reference/RestApi">REST API</a></li>
  <li>The <code class="highlighter-rouge">clusters</code> method of the <a target="_blank" href="/api/admin/org/apache/pulsar/client/admin/PulsarAdmin.html"><code class="highlighter-rouge">PulsarAdmin</code></a> object in the <a href="../../applications/JavaClient">Java API</a></li>
</ul>

<h3 id="provision">Provision</h3>

<p>New clusters can be provisioned using the admin interface.</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<div class="admonition">
  <div class="warning">
    
    <p>Please note that this operation requires <a href="../../admin/Authz#superusers">superuser</a> privileges.</p>

  </div>
</div>

<h4 id="pulsar-admin-1">pulsar-admin</h4>

<p>You can provision a new cluster using the <a href="../../reference/CliTools#pulsar-admin-clusters-create"><code class="highlighter-rouge">create</code></a> subcommand. Here’s an example:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin clusters create cluster-1 <span class="se">\</span>
  --url http://my-cluster.org.com:8080 <span class="se">\</span>
  --broker-url pulsar://my-cluster.org.com:6650
</code></pre>
</div>

<h4 id="rest-api-1">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method put">PUT</code><code class="url">/admin/clusters/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters/:cluster">More info</a></p>

<h4 id="java">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ClusterData</span> <span class="n">clusterData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClusterData</span><span class="o">(</span>
        <span class="n">serviceUrl</span><span class="o">,</span>
        <span class="n">serviceUrlTls</span><span class="o">,</span>
        <span class="n">brokerServiceUrl</span><span class="o">,</span>
        <span class="n">brokerServiceUrlTls</span>
<span class="o">);</span>
<span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">createCluster</span><span class="o">(</span><span class="n">clusterName</span><span class="o">,</span> <span class="n">clusterData</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="initialize-cluster-metadata">Initialize cluster metadata</h3>

<p>When provision a new cluster, you need to initialize that cluster’s <a href="../../getting-started/ConceptsAndArchitecture#metadata-store">metadata</a>. When initializing cluster metadata, you need to specify all of the following:</p>

<ul>
  <li>The name of the cluster</li>
  <li>The local ZooKeeper connection string for the cluster</li>
  <li>The global ZooKeeper connection string for the entire instance</li>
  <li>The web service URL for the cluster</li>
  <li>A broker service URL enabling interaction with the <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">brokers</span> in the cluster</li>
</ul>

<p>You must initialize cluster metadata <em>before</em> starting up any <a href="#managing-brokers">brokers</a> that will belong to the cluster.</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<div class="admonition">
  <div class="warning">
    <span class="admonition-title"><p>No cluster metadata initialization through the REST API or the Java admin API</p>
</span>
    
<p>Unlike most other admin functions in Pulsar, cluster metadata initialization cannot be performed via the admin REST API or the admin Java client, as metadata initialization involves communicating with ZooKeeper directly. Instead, you can use the <a href="../../reference/CliTools#pulsar"><code class="highlighter-rouge">pulsar</code></a> CLI tool, in particular the <a href="../../reference/CliTools#pulsar-initialize-cluster-metadata"><code class="highlighter-rouge">initialize-cluster-metadata</code></a> command.</p>

  </div>
</div>

<p>Here’s an example cluster metadata initialization command:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>bin/pulsar initialize-cluster-metadata <span class="se">\</span>
  --cluster us-west <span class="se">\</span>
  --zookeeper zk1.us-west.example.com:2181 <span class="se">\</span>
  --global-zookeeper zk1.us-west.example.com:2184 <span class="se">\</span>
  --web-service-url http://pulsar.us-west.example.com:8080/ <span class="se">\</span>
  --web-service-url-tls https://pulsar.us-west.example.com:8443/ <span class="se">\</span>
  --broker-service-url pulsar://pulsar.us-west.example.com:6650/ <span class="se">\</span>
  --broker-service-url-tls pulsar+ssl://pulsar.us-west.example.com:6651/
</code></pre>
</div>

<p>You’ll need to use <code class="highlighter-rouge">--*-tls</code> flags only if you’re using <a href="../../admin/Authz#tls-client-auth">TLS authentication</a> in your instance.</p>

<p>Make sure to initialize</p>

<h3 id="get-configuration">Get configuration</h3>

<p>You can fetch the <a href="../../reference/Configuration">configuration</a> for an existing cluster at any time.</p>

<h4 id="pulsar-admin-2">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-clusters-get"><code class="highlighter-rouge">get</code></a> subcommand and specify the name of the cluster. Here’s an example:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin clusters get cluster-1
<span class="o">{</span>
    <span class="s2">"serviceUrl"</span>: <span class="s2">"http://my-cluster.org.com:8080/"</span>,
    <span class="s2">"serviceUrlTls"</span>: null,
    <span class="s2">"brokerServiceUrl"</span>: <span class="s2">"pulsar://my-cluster.org.com:6650/"</span>,
    <span class="s2">"brokerServiceUrlTls"</span>: null
<span class="o">}</span>
</code></pre>
</div>

<h4 id="rest-api-2">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/clusters/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters/:cluster">More info</a></p>

<h4 id="java-1">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">getCluster</span><span class="o">(</span><span class="n">clusterName</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="update">Update</h3>

<p>You can update the configuration for an existing cluster at any time.</p>

<h4 id="pulsar-admin-3">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-clusters-update"><code class="highlighter-rouge">update</code></a> subcommand and specify new configuration values using flags.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin clusters update cluster-1 <span class="se">\</span>
  --url http://my-cluster.org.com:4081 <span class="se">\</span>
  --broker-url pulsar://my-cluster.org.com:3350
</code></pre>
</div>

<h4 id="rest">REST</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method post">POST</code><code class="url">/admin/clusters/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters/:cluster">More info</a></p>

<h4 id="java-2">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ClusterData</span> <span class="n">clusterData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClusterData</span><span class="o">(</span>
        <span class="n">serviceUrl</span><span class="o">,</span>
        <span class="n">serviceUrlTls</span><span class="o">,</span>
        <span class="n">brokerServiceUrl</span><span class="o">,</span>
        <span class="n">brokerServiceUrlTls</span>
<span class="o">);</span>
<span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">updateCluster</span><span class="o">(</span><span class="n">clusterName</span><span class="o">,</span> <span class="n">clusterData</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="delete">Delete</h3>

<p>Clusters can be deleted from a Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>.</p>

<h4 id="pulsar-admin-4">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-clusters-delete"><code class="highlighter-rouge">delete</code></a> subcommand and specify the name of the cluster.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin clusters delete cluster-1
</code></pre>
</div>

<h4 id="rest-api-3">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method delete">DELETE</code><code class="url">/admin/clusters/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters/:cluster">More info</a></p>

<h4 id="java-3">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">deleteCluster</span><span class="o">(</span><span class="n">clusterName</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="list">List</h3>

<p>You can fetch a list of all clusters in a Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>.</p>

<h4 id="pulsar-admin-5">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-clusters-list"><code class="highlighter-rouge">list</code></a> subcommand.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin clusters list
cluster-1
cluster-2
</code></pre>
</div>

<h4 id="rest-api-4">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/clusters</code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters">More info</a></p>

<h6 id="java-4">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">getClusters</span><span class="o">();</span>
</code></pre>
</div>

<h2 id="managing-brokers">Managing brokers</h2>

<p>Pulsar brokers consist of two components:</p>

<ol>
  <li>An HTTP server exposing a <a href="../../reference/RestApi">REST interface</a> administration and <span class="popover-term" tabindex="0" title="What is a topic?" data-placement="top" data-content="A named channel used to pass messages published by producers to consumers who process those messages." data-toggle="popover" data-trigger="focus">topic</span> lookup.</li>
  <li>A dispatcher that handles all Pulsar <span class="popover-term" tabindex="0" title="What is a message in Pulsar?" data-placement="top" data-content="A" data-toggle="popover" data-trigger="focus">message</span> transfers.</li>
</ol>

<p><span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">Brokers</span> can be managed via:</p>

<ul>
  <li>The <a href="../../reference/CliTools#pulsar-admin-brokers"><code class="highlighter-rouge">brokers</code></a> command of the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> tool</li>
  <li>The <code class="highlighter-rouge">/admin/brokers</code> endpoint of the admin <a href="../../reference/RestApi">REST API</a></li>
  <li>The <code class="highlighter-rouge">brokers</code> method of the <a target="_blank" href="/api/admin/com/yahoo/pulsar/client/admin/PulsarAdmin.html"><code class="highlighter-rouge">PulsarAdmin</code></a> object in the <a href="../../clients/Java">Java API</a></li>
</ul>

<p>In addition to being configurable when you start them up, brokers can also be <a href="#dynamic-broker-configuration">dynamically configured</a>.</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<div class="admonition">
  <div class="info">
    
    
<p>See the <a href="../../reference/Configuration#broker">Configuration</a> page for a full listing of broker-specific configuration parameters.</p>

  </div>
</div>

<h3 id="list-active-brokers">List active brokers</h3>

<p>Fetch all available active brokers that are serving traffic.</p>

<h4 id="pulsar-admin-6">pulsar-admin</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin brokers list use
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>broker1.use.org.com:8080
</code></pre>
</div>

<h6 id="rest-1">REST</h6>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/brokers/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/brokers/:cluster">More info</a></p>

<h6 id="java-5">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">brokers</span><span class="o">().</span><span class="na">getActiveBrokers</span><span class="o">(</span><span class="n">clusterName</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="list-of-namespaces-owned-by-a-given-broker">list of namespaces owned by a given broker</h4>

<p>It finds all namespaces which are owned and served by a given broker.</p>

<h6 id="cli">CLI</h6>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin brokers namespaces use <span class="se">\</span>
  --url broker1.use.org.com:8080
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"my-property/use/my-ns/0x00000000_0xffffffff"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"broker_assignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shared"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_controlled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>
<h6 id="rest-2">REST</h6>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/brokers/<span class="endpoint">:cluster</span>/<span class="endpoint">:broker</span>:/ownedNamespaces</code></pre></div>

<h6 id="java-6">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">brokers</span><span class="o">().</span><span class="na">getOwnedNamespaces</span><span class="o">(</span><span class="n">cluster</span><span class="o">,</span><span class="n">brokerUrl</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="dynamic-broker-configuration">Dynamic broker configuration</h3>

<p>One way to configure a Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">broker</span> is to supply a <a href="../../reference/Configuration#broker">configuration</a> when the broker is <a href="../../reference/CliTools#pulsar-broker">started up</a>.</p>

<p>But since all broker configuration in Pulsar is stored in <span class="popover-term" tabindex="0" title="What is ZooKeeper?" data-placement="top" data-content="ZooKeeper is a service that Pulsar uses for coordination-related tasks.&lt;br /&gt;&lt;br /&gt;A Pulsar instance relies on both a local ZooKeeper for cluster-specific tasks and a global ZooKeeper for instance-wide tasks." data-toggle="popover" data-trigger="focus">ZooKeeper</span>, configuration values can also be dynamically updated <em>while the broker is running</em>. When you update broker configuration dynamically, ZooKeeper will notify the broker of the change and the broker will then override any existing configuration values.</p>

<ul>
  <li>The <a href="../../reference/CliTools#pulsar-admin-brokers"><code class="highlighter-rouge">brokers</code></a> command for the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> tool has a variety of subcommands that enable you to manipulate a broker’s configuration dynamically, enabling you to <a href="#update-dynamic-configuration">update config values</a> and more.</li>
  <li>In the Pulsar admin <a href="../../reference/RestApi">REST API</a>, dynamic configuration is managed through the <code class="highlighter-rouge">/admin/brokers/configuration</code> endpoint.</li>
</ul>

<h3 id="update-dynamic-configuration">Update dynamic configuration</h3>

<h4 id="pulsar-admin-7">pulsar-admin</h4>

<p>The <a href="../../reference/CliTools#pulsar-admin-brokers-update-dynamic-config"><code class="highlighter-rouge">update-dynamic-config</code></a> subcommand will update existing configuration. It takes two arguments: the name of the parameter and the new value. Here’s an example for the <a href="../../reference/Configuration#broker-brokerShutdownTimeoutMs"><code class="highlighter-rouge">brokerShutdownTimeoutMs</code></a> parameter:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin brokers update-dynamic-config brokerShutdownTimeoutMs 100
</code></pre>
</div>

<h4 id="rest-api-5">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method post">POST</code><code class="url">/admin/brokers/configuration/<span class="endpoint">:configName</span>/<span class="endpoint">:configValue</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/brokers/configuration/:configName/:configValue">More info</a></p>

<h4 id="java-7">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">brokers</span><span class="o">().</span><span class="na">updateDynamicConfiguration</span><span class="o">(</span><span class="n">configName</span><span class="o">,</span> <span class="n">configValue</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="list-updated-values">List updated values</h3>

<p>Fetch a list of all potentially updatable configuraton parameters.</p>

<h4 id="pulsar-admin-8">pulsar-admin</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin brokers list-dynamic-config
brokerShutdownTimeoutMs
</code></pre>
</div>

<h4 id="rest-api-6">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/brokers/configuration</code></pre></div>

<p><a href="../../reference/RestApi#/admin/brokers/configuration">More info</a></p>

<h4 id="java-8">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">brokers</span><span class="o">().</span><span class="na">getDynamicConfigurationNames</span><span class="o">();</span>
</code></pre>
</div>

<h3 id="list-all">List all</h3>

<p>Fetch a list of all parameters that have been dynamically updated.</p>

<h4 id="pulsar-admin-9">pulsar-admin</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin brokers get-all-dynamic-config
brokerShutdownTimeoutMs:100
</code></pre>
</div>

<h4 id="rest-api-7">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/brokers/configuration/values</code></pre></div>

<p><a href="../../reference/RestApi#/admin/brokers/configuration/values">More info</a></p>

<h4 id="java-9">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">brokers</span><span class="o">().</span><span class="na">getAllDynamicConfigurations</span><span class="o">();</span>
</code></pre>
</div>

<h3 id="properties">Properties</h3>

<p>A property identifies an application domain. For e.g. finance, mail,
sports etc are examples of a property. Tool allows to do CRUD operation
to manage property in Pulsar.</p>

<h4 id="list-existing-properties">list existing properties</h4>

<p>It lists down all existing properties in Pulsar system.</p>

<h6 id="cli-1">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin properties list
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>my-property
</code></pre>
</div>

<h6 id="rest-3">REST</h6>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/properties</code></pre></div>

<h6 id="java-10">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">properties</span><span class="o">().</span><span class="na">getProperties</span><span class="o">()</span>
</code></pre>
</div>

<h4 id="create-property">create property</h4>

<p>It creates a new property in Pulsar system. For a property, you can configure admin roles (comma separated) who can manage property and clusters (comma separated) where property will be available.</p>

<h6 id="cli-2">CLI</h6>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin properties create my-property <span class="se">\</span>
  --admin-roles admin1,admin2 <span class="se">\</span>
  --allowed-clusters cl1,cl2
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-4">REST</h6>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method put">PUT</code><code class="url">/admin/properties/<span class="endpoint">:property</span></code></pre></div>

<h6 id="java-11">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">properties</span><span class="o">().</span><span class="na">createProperty</span><span class="o">(</span><span class="n">property</span><span class="o">,</span> <span class="n">propertyAdmin</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="get-property">get property</h4>

<p>It gets property configuration for a given existing property.</p>

<h6 id="cli-3">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$pulsar-admin properties get my-property
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"adminRoles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"admin1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"admin2"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"allowedClusters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"cl1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cl2"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="rest-5">REST</h6>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/properties/<span class="endpoint">:property</span></code></pre></div>

<h6 id="java-12">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">properties</span><span class="o">().</span><span class="na">getPropertyAdmin</span><span class="o">(</span><span class="n">property</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="update-property">update property</h4>

<p>It also updates configuration of already created property. You can update admin roles and cluster information for a given existing property.</p>

<h6 id="cli-4">CLI</h6>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin properties update my-property <span class="se">\</span>
  --admin-roles admin-update-1,admin-update-2 <span class="se">\</span>
  --allowed-clusters cl1,cl2
</code></pre>
</div>

<h6 id="rest-6">REST</h6>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method post">POST</code><code class="url">/admin/properties/<span class="endpoint">:property</span></code></pre></div>

<h6 id="java-13">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">properties</span><span class="o">().</span><span class="na">updateProperty</span><span class="o">(</span><span class="n">property</span><span class="o">,</span> <span class="n">propertyAdmin</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="delete-property">delete property</h4>

<p>It deletes an existing property from Pulsar system.</p>
<h6 id="cli-5">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin properties delete my-property
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-7">REST</h6>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method delete">DELETE</code><code class="url">/admin/properties/<span class="endpoint">:property</span></code></pre></div>

<h6 id="java-14">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">properties</span><span class="o">().</span><span class="na">deleteProperty</span><span class="o">(</span><span class="n">property</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="clusters">Clusters</h3>

<p>Pulsar clusters consist of one or more Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">brokers</span>, one or more <span class="popover-term" tabindex="0" title="What is BookKeeper?" data-placement="top" data-content="Apache BookKeeper is a persistent log storage system that Pulsar uses to store message data." data-toggle="popover" data-trigger="focus">BookKeeper</span> servers (aka <span class="popover-term" tabindex="0" title="What is a bookie?" data-placement="top" data-content="Bookie is just a nickname for an individual BookKeeper server." data-toggle="popover" data-trigger="focus">bookies</span>), and a <span class="popover-term" tabindex="0" title="What is ZooKeeper?" data-placement="top" data-content="ZooKeeper is a service that Pulsar uses for coordination-related tasks.&lt;br /&gt;&lt;br /&gt;A Pulsar instance relies on both a local ZooKeeper for cluster-specific tasks and a global ZooKeeper for instance-wide tasks." data-toggle="popover" data-trigger="focus">ZooKeeper</span> cluster that provides configuration and coordination management.</p>

<p>Clusters can be managed via:</p>

<ul>
  <li>The <a href="../../reference/CliTools#pulsar-admin-clusters"><code class="highlighter-rouge">clusters</code></a> command of the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> tool</li>
  <li>The <code class="highlighter-rouge">/admin/clusters</code> endpoint of the admin <a href="../../reference/RestApi">REST API</a></li>
  <li>The <code class="highlighter-rouge">clusters</code> method of the <a target="_blank" href="/api/admin/org/apache/pulsar/client/admin/PulsarAdmin.html"><code class="highlighter-rouge">PulsarAdmin</code></a> object in the <a href="../../applications/JavaClient">Java API</a></li>
</ul>

<h3 id="provision-1">Provision</h3>

<p>New clusters can be provisioned using the admin interface.</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<div class="admonition">
  <div class="warning">
    
    <p>Please note that this operation requires <a href="../../admin/Authz#superusers">superuser</a> privileges.</p>

  </div>
</div>

<h4 id="pulsar-admin-10">pulsar-admin</h4>

<p>You can provision a new cluster using the <a href="../../reference/CliTools#pulsar-admin-clusters-create"><code class="highlighter-rouge">create</code></a> subcommand. Here’s an example:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin clusters create cluster-1 <span class="se">\</span>
  --url http://my-cluster.org.com:8080 <span class="se">\</span>
  --broker-url pulsar://my-cluster.org.com:6650
</code></pre>
</div>

<h4 id="rest-api-8">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method put">PUT</code><code class="url">/admin/clusters/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters/:cluster">More info</a></p>

<h4 id="java-15">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ClusterData</span> <span class="n">clusterData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClusterData</span><span class="o">(</span>
        <span class="n">serviceUrl</span><span class="o">,</span>
        <span class="n">serviceUrlTls</span><span class="o">,</span>
        <span class="n">brokerServiceUrl</span><span class="o">,</span>
        <span class="n">brokerServiceUrlTls</span>
<span class="o">);</span>
<span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">createCluster</span><span class="o">(</span><span class="n">clusterName</span><span class="o">,</span> <span class="n">clusterData</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="initialize-cluster-metadata-1">Initialize cluster metadata</h3>

<p>When provision a new cluster, you need to initialize that cluster’s <a href="../../getting-started/ConceptsAndArchitecture#metadata-store">metadata</a>. When initializing cluster metadata, you need to specify all of the following:</p>

<ul>
  <li>The name of the cluster</li>
  <li>The local ZooKeeper connection string for the cluster</li>
  <li>The global ZooKeeper connection string for the entire instance</li>
  <li>The web service URL for the cluster</li>
  <li>A broker service URL enabling interaction with the <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">brokers</span> in the cluster</li>
</ul>

<p>You must initialize cluster metadata <em>before</em> starting up any <a href="#managing-brokers">brokers</a> that will belong to the cluster.</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<div class="admonition">
  <div class="warning">
    <span class="admonition-title"><p>No cluster metadata initialization through the REST API or the Java admin API</p>
</span>
    
<p>Unlike most other admin functions in Pulsar, cluster metadata initialization cannot be performed via the admin REST API or the admin Java client, as metadata initialization involves communicating with ZooKeeper directly. Instead, you can use the <a href="../../reference/CliTools#pulsar"><code class="highlighter-rouge">pulsar</code></a> CLI tool, in particular the <a href="../../reference/CliTools#pulsar-initialize-cluster-metadata"><code class="highlighter-rouge">initialize-cluster-metadata</code></a> command.</p>

  </div>
</div>

<p>Here’s an example cluster metadata initialization command:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>bin/pulsar initialize-cluster-metadata <span class="se">\</span>
  --cluster us-west <span class="se">\</span>
  --zookeeper zk1.us-west.example.com:2181 <span class="se">\</span>
  --global-zookeeper zk1.us-west.example.com:2184 <span class="se">\</span>
  --web-service-url http://pulsar.us-west.example.com:8080/ <span class="se">\</span>
  --web-service-url-tls https://pulsar.us-west.example.com:8443/ <span class="se">\</span>
  --broker-service-url pulsar://pulsar.us-west.example.com:6650/ <span class="se">\</span>
  --broker-service-url-tls pulsar+ssl://pulsar.us-west.example.com:6651/
</code></pre>
</div>

<p>You’ll need to use <code class="highlighter-rouge">--*-tls</code> flags only if you’re using <a href="../../admin/Authz#tls-client-auth">TLS authentication</a> in your instance.</p>

<p>Make sure to initialize</p>

<h3 id="get-configuration-1">Get configuration</h3>

<p>You can fetch the <a href="../../reference/Configuration">configuration</a> for an existing cluster at any time.</p>

<h4 id="pulsar-admin-11">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-clusters-get"><code class="highlighter-rouge">get</code></a> subcommand and specify the name of the cluster. Here’s an example:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin clusters get cluster-1
<span class="o">{</span>
    <span class="s2">"serviceUrl"</span>: <span class="s2">"http://my-cluster.org.com:8080/"</span>,
    <span class="s2">"serviceUrlTls"</span>: null,
    <span class="s2">"brokerServiceUrl"</span>: <span class="s2">"pulsar://my-cluster.org.com:6650/"</span>,
    <span class="s2">"brokerServiceUrlTls"</span>: null
<span class="o">}</span>
</code></pre>
</div>

<h4 id="rest-api-9">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/clusters/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters/:cluster">More info</a></p>

<h4 id="java-16">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">getCluster</span><span class="o">(</span><span class="n">clusterName</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="update-1">Update</h3>

<p>You can update the configuration for an existing cluster at any time.</p>

<h4 id="pulsar-admin-12">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-clusters-update"><code class="highlighter-rouge">update</code></a> subcommand and specify new configuration values using flags.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin clusters update cluster-1 <span class="se">\</span>
  --url http://my-cluster.org.com:4081 <span class="se">\</span>
  --broker-url pulsar://my-cluster.org.com:3350
</code></pre>
</div>

<h4 id="rest-8">REST</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method post">POST</code><code class="url">/admin/clusters/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters/:cluster">More info</a></p>

<h4 id="java-17">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ClusterData</span> <span class="n">clusterData</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClusterData</span><span class="o">(</span>
        <span class="n">serviceUrl</span><span class="o">,</span>
        <span class="n">serviceUrlTls</span><span class="o">,</span>
        <span class="n">brokerServiceUrl</span><span class="o">,</span>
        <span class="n">brokerServiceUrlTls</span>
<span class="o">);</span>
<span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">updateCluster</span><span class="o">(</span><span class="n">clusterName</span><span class="o">,</span> <span class="n">clusterData</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="delete-1">Delete</h3>

<p>Clusters can be deleted from a Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>.</p>

<h4 id="pulsar-admin-13">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-clusters-delete"><code class="highlighter-rouge">delete</code></a> subcommand and specify the name of the cluster.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin clusters delete cluster-1
</code></pre>
</div>

<h4 id="rest-api-10">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method delete">DELETE</code><code class="url">/admin/clusters/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters/:cluster">More info</a></p>

<h4 id="java-18">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">deleteCluster</span><span class="o">(</span><span class="n">clusterName</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="list-1">List</h3>

<p>You can fetch a list of all clusters in a Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>.</p>

<h4 id="pulsar-admin-14">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-clusters-list"><code class="highlighter-rouge">list</code></a> subcommand.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin clusters list
cluster-1
cluster-2
</code></pre>
</div>

<h4 id="rest-api-11">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/clusters</code></pre></div>

<p><a href="../../reference/RestApi#/admin/clusters">More info</a></p>

<h6 id="java-19">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">getClusters</span><span class="o">();</span>
</code></pre>
</div>

<h2 id="managing-namespaces">Managing namespaces</h2>

<p>Pulsar <span class="popover-term" tabindex="0" title="What is a namespace?" data-placement="top" data-content="A grouping mechanism for related topics." data-toggle="popover" data-trigger="focus">namespaces</span> are logical groupings of <span class="popover-term" tabindex="0" title="What is a topic?" data-placement="top" data-content="A named channel used to pass messages published by producers to consumers who process those messages." data-toggle="popover" data-trigger="focus">topics</span>.</p>

<p>Namespaces can be managed via:</p>

<ul>
  <li>The <a href="../../reference/CliTools#pulsar-admin-clusters"><code class="highlighter-rouge">namespaces</code></a> command of the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> tool</li>
  <li>The <code class="highlighter-rouge">/admin/namespaces</code> endpoint of the admin <a href="../../reference/RestApi">REST API</a></li>
  <li>The <code class="highlighter-rouge">namespaces</code> method of the <a target="_blank" href="/api/admin/org/apache/pulsar/client/admin/PulsarAdmin.html"><code class="highlighter-rouge">PulsarAdmin</code></a> object in the <a href="../../applications/JavaClient">Java API</a></li>
</ul>

<h3 id="create">Create</h3>

<p>You can create new namespaces under a given <span class="popover-term" tabindex="0" title="What is a property?" data-placement="top" data-content="A Pulsar tenant." data-toggle="popover" data-trigger="focus">property</span> and within a Pulsar <span class="popover-term" tabindex="0" title="What is a cluster?" data-placement="top" data-content="A set of Pulsar brokers and BookKeeper servers (aka bookies). Clusters can reside in different geographical regions and replicate messages to one another in a process called geo-replication." data-toggle="popover" data-trigger="focus">cluster</span>.</p>

<h4 id="pulsar-admin-15">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-create"><code class="highlighter-rouge">create</code></a> subcommand and specify the namespace by name:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces create <span class="nb">test</span>-property/cl1/ns1
</code></pre>
</div>

<h4 id="rest-api-12">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method put">PUT</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace">More info</a></p>

<h4 id="java-20">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">createNamespace</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="get-policies">Get policies</h3>

<p>You can fetch the current policies associated with a namespace at any time.</p>

<h4 id="pulsar-admin-16">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-policies"><code class="highlighter-rouge">policies</code></a> subcommand and specify the namespace:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces policies <span class="nb">test</span>-property/cl1/ns1
<span class="o">{</span>
  <span class="s2">"auth_policies"</span>: <span class="o">{</span>
    <span class="s2">"namespace_auth"</span>: <span class="o">{}</span>,
    <span class="s2">"destination_auth"</span>: <span class="o">{}</span>
  <span class="o">}</span>,
  <span class="s2">"replication_clusters"</span>: <span class="o">[]</span>,
  <span class="s2">"bundles_activated"</span>: <span class="nb">true</span>,
  <span class="s2">"bundles"</span>: <span class="o">{</span>
    <span class="s2">"boundaries"</span>: <span class="o">[</span>
      <span class="s2">"0x00000000"</span>,
      <span class="s2">"0xffffffff"</span>
    <span class="o">]</span>,
    <span class="s2">"numBundles"</span>: 1
  <span class="o">}</span>,
  <span class="s2">"backlog_quota_map"</span>: <span class="o">{}</span>,
  <span class="s2">"persistence"</span>: null,
  <span class="s2">"latency_stats_sample_rate"</span>: <span class="o">{}</span>,
  <span class="s2">"message_ttl_in_seconds"</span>: 0,
  <span class="s2">"retention_policies"</span>: null,
  <span class="s2">"deleted"</span>: <span class="nb">false</span>
<span class="o">}</span>
</code></pre>
</div>

<h4 id="rest-api-13">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace">More info</a></p>

<h4 id="java-21">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getPolicies</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="list-namespaces-within-a-property">List namespaces within a property</h3>

<p>You can list all namespaces within a given Pulsar <span class="popover-term" tabindex="0" title="What is a property?" data-placement="top" data-content="A Pulsar tenant." data-toggle="popover" data-trigger="focus">property</span>.</p>

<h4 id="pulsar-admin-17">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-list"><code class="highlighter-rouge">list</code></a> subcommand and specify the property:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces list <span class="nb">test</span>-property
<span class="nb">test</span>-property/cl1/ns1
<span class="nb">test</span>-property/cl2/ns2
</code></pre>
</div>

<h4 id="rest-api-14">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property">More info</a></p>

<h4 id="java-22">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getNamespaces</span><span class="o">(</span><span class="n">property</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="list-namespaces-within-a-cluster">List namespaces within a cluster</h3>

<p>You can list all namespaces within a given Pulsar <span class="popover-term" tabindex="0" title="What is a cluster?" data-placement="top" data-content="A set of Pulsar brokers and BookKeeper servers (aka bookies). Clusters can reside in different geographical regions and replicate messages to one another in a process called geo-replication." data-toggle="popover" data-trigger="focus">cluster</span>.</p>

<h4 id="pulsar-admin-18">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-list-cluster"><code class="highlighter-rouge">list-cluster</code></a> subcommand and specify the cluster:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces list-cluster <span class="nb">test</span>-property/cl1
<span class="nb">test</span>-property/cl1/ns1
<span class="nb">test</span>-property/cl1/ns1
</code></pre>
</div>

<h4 id="rest-api-15">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster">More info</a></p>

<h4 id="java-23">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getNamespaces</span><span class="o">(</span><span class="n">property</span><span class="o">,</span> <span class="n">cluster</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="delete-2">Delete</h3>

<p>You can delete existing namespaces from a property/cluster.</p>

<h4 id="pulsar-admin-19">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-delete"><code class="highlighter-rouge">delete</code></a> subcommand and specify the namespace:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces delete <span class="nb">test</span>-property/cl1/ns1
</code></pre>
</div>

<h4 id="rest-9">REST</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method delete">DELETE</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace">More info</a></p>

<h4 id="java-24">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">deleteNamespace</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="managing-permissions">Managing permissions</h2>

<p>Permissions in Pulsar are managed at the <span class="popover-term" tabindex="0" title="What is a namespace?" data-placement="top" data-content="A grouping mechanism for related topics." data-toggle="popover" data-trigger="focus">namespace</span> level (that is, within <span class="popover-term" tabindex="0" title="What is a property?" data-placement="top" data-content="A Pulsar tenant." data-toggle="popover" data-trigger="focus">properties</span> and <span class="popover-term" tabindex="0" title="What is a cluster?" data-placement="top" data-content="A set of Pulsar brokers and BookKeeper servers (aka bookies). Clusters can reside in different geographical regions and replicate messages to one another in a process called geo-replication." data-toggle="popover" data-trigger="focus">clusters</span>).</p>

<h3 id="grant-permissions">Grant permissions</h3>

<p>You can grant permissions to specific roles for lists of operations such as <code class="highlighter-rouge">produce</code> and <code class="highlighter-rouge">consume</code>.</p>

<h4 id="pulsar-admin-20">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-grant-permission"><code class="highlighter-rouge">grant-permission</code></a> subcommand and specify a namespace, actions using the <code class="highlighter-rouge">--actions</code> flag, and a role using the <code class="highlighter-rouge">--role</code> flag:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces grant-permission <span class="nb">test</span>-property/cl1/ns1 <span class="se">\</span>
  --actions produce,consume <span class="se">\</span>
  --role admin10
</code></pre>
</div>

<p>Wildcard authorization can be performed when <code class="highlighter-rouge">authorizationAllowWildcardsMatching</code> is set to <code class="highlighter-rouge">true</code> in <code class="highlighter-rouge">broker.conf</code>.</p>

<p>e.g.</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces grant-permission <span class="nb">test</span>-property/cl1/ns1 <span class="se">\</span>
                        --actions produce,consume <span class="se">\</span>
                        --role <span class="s1">'my.role.*'</span>
</code></pre>
</div>

<p>Then, roles <code class="highlighter-rouge">my.role.1</code>, <code class="highlighter-rouge">my.role.2</code>, <code class="highlighter-rouge">my.role.foo</code>, <code class="highlighter-rouge">my.role.bar</code>, etc. can produce and consume.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces grant-permission <span class="nb">test</span>-property/cl1/ns1 <span class="se">\</span>
                        --actions produce,consume <span class="se">\</span>
                        --role <span class="s1">'*.role.my'</span>
</code></pre>
</div>

<p>Then, roles <code class="highlighter-rouge">1.role.my</code>, <code class="highlighter-rouge">2.role.my</code>, <code class="highlighter-rouge">foo.role.my</code>, <code class="highlighter-rouge">bar.role.my</code>, etc. can produce and consume.</p>

<p><strong>Note</strong>: A wildcard matching works at <strong>the beginning or end of the role name only</strong>.</p>

<p>e.g.</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces grant-permission <span class="nb">test</span>-property/cl1/ns1 <span class="se">\</span>
                        --actions produce,consume <span class="se">\</span>
                        --role <span class="s1">'my.*.role'</span>
</code></pre>
</div>

<p>In this case, only the role <code class="highlighter-rouge">my.*.role</code> has permissions.<br />
Roles <code class="highlighter-rouge">my.1.role</code>, <code class="highlighter-rouge">my.2.role</code>, <code class="highlighter-rouge">my.foo.role</code>, <code class="highlighter-rouge">my.bar.role</code>, etc. <strong>cannot</strong> produce and consume.</p>

<h4 id="rest-api-16">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method post">POST</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/permissions/<span class="endpoint">:role</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace/permissions/:role">More info</a></p>

<h4 id="java-25">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">grantPermissionOnNamespace</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">role</span><span class="o">,</span> <span class="n">getAuthActions</span><span class="o">(</span><span class="n">actions</span><span class="o">));</span>
</code></pre>
</div>

<h3 id="get-permission">Get permission</h3>

<p>You can see which permissions have been granted to which roles in a namespace.</p>

<h4 id="pulsar-admin-21">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-permissions"><code class="highlighter-rouge">permissions</code></a> subcommand and specify a namespace:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces permissions <span class="nb">test</span>-property/cl1/ns1
<span class="o">{</span>
  <span class="s2">"admin10"</span>: <span class="o">[</span>
    <span class="s2">"produce"</span>,
    <span class="s2">"consume"</span>
  <span class="o">]</span>
<span class="o">}</span>   
</code></pre>
</div>

<h4 id="rest-api-17">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/permissions</code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace/permissions">More info</a></p>

<h4 id="java-26">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getPermissions</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="revoke-permissions">Revoke permissions</h3>

<p>You can revoke permissions from specific roles, which means that those roles will no longer have access to the specified namespace.</p>

<h4 id="pulsar-admin-22">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-revoke-permission"><code class="highlighter-rouge">revoke-permission</code></a> subcommand and specify a namespace and a role using the <code class="highlighter-rouge">--role</code> flag:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces revoke-permission <span class="nb">test</span>-property/cl1/ns1 <span class="se">\</span>
  --role admin10
</code></pre>
</div>

<h4 id="rest-api-18">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method delete">DELETE</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/permissions/<span class="endpoint">:role</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace/permissions/:role">More info</a></p>

<h4 id="java-27">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">revokePermissionsOnNamespace</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">role</span><span class="o">);</span>
</code></pre>
</div>

<h4 id="set-replication-cluster">set replication cluster</h4>

<p>It sets replication clusters for a namespace, so Pulsar can internally replicate publish message from one colo to another colo. However, in order to set replication clusters, your namespace has to be global such as: <em>test-property/<strong>global</strong>/ns1.</em> It means cluster-name has to be <em>“global”</em></p>

<h6 id="cli-6">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces set-clusters test-property/cl1/ns1 \
  --clusters cl2
</code></pre>
</div>

<h6 id="rest-10">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;div class="highlighter-rouge endpoint"&gt;&lt;pre class="highlight"&gt;&lt;code class="method post"&gt;POST&lt;/code&gt;&lt;code class="url"&gt;/admin/namespaces/&lt;span class="endpoint"&gt;:property&lt;/span&gt;/&lt;span class="endpoint"&gt;:cluster&lt;/span&gt;/&lt;span class="endpoint"&gt;:namespace&lt;/span&gt;/replication&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</code></pre>
</div>

<h6 id="java-28">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setNamespaceReplicationClusters</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">clusters</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="get-replication-cluster">get replication cluster</h4>

<p>It gives a list of replication clusters for a given namespace.</p>

<h6 id="cli-7">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-clusters test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>cl2
</code></pre>
</div>

<h6 id="rest-11">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/replication
</code></pre>
</div>

<h6 id="java-29">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getNamespaceReplicationClusters</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="set-backlog-quota-policies">set backlog quota policies</h4>

<p>Backlog quota helps broker to restrict bandwidth/storage of a namespace once it reach certain threshold limit . Admin can set this limit and one of the following action after the limit is reached.</p>

<ol>
  <li>
    <p>producer_request_hold: broker will hold and not persist produce request payload</p>
  </li>
  <li>
    <p>producer_exception: broker will disconnects with client by giving exception</p>
  </li>
  <li>
    <p>consumer_backlog_eviction: broker will start discarding backlog messages</p>
  </li>
</ol>

<p>Backlog quota restriction can be taken care by defining restriction of backlog-quota-type: destination_storage</p>

<h6 id="cli-8">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces set-backlog-quota --limit 10 --policy producer_request_hold test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-12">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/backlogQuota
</code></pre>
</div>

<h6 id="java-30">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setBacklogQuota</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="k">new</span> <span class="n">BacklogQuota</span><span class="o">(</span><span class="n">limit</span><span class="o">,</span> <span class="n">policy</span><span class="o">))</span>
</code></pre>
</div>

<h4 id="get-backlog-quota-policies">get backlog quota policies</h4>

<p>It shows a configured backlog quota for a given namespace.</p>

<h6 id="cli-9">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-backlog-quotas test-property/cl1/ns1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"destination_storage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"producer_request_hold"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">          
</span></code></pre>
</div>

<h6 id="rest-13">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/backlogQuotaMap
</code></pre>
</div>

<h6 id="java-31">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getBacklogQuotaMap</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="remove-backlog-quota-policies">remove backlog quota policies</h4>

<p>It removes backlog quota policies for a given namespace</p>

<h6 id="cli-10">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces remove-backlog-quota test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-14">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>DELETE /admin/namespaces/{property}/{cluster}/{namespace}/backlogQuota
</code></pre>
</div>

<h6 id="java-32">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">removeBacklogQuota</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">backlogQuotaType</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="set-persistence-policies">set persistence policies</h4>

<p>Persistence policies allow to configure persistency-level for all topic messages under a given namespace.</p>

<ul>
  <li>
    <p>Bookkeeper-ack-quorum: Number of acks (guaranteed copies) to wait for each entry, default: 0</p>
  </li>
  <li>
    <p>Bookkeeper-ensemble: Number of bookies to use for a topic, default: 0</p>
  </li>
  <li>
    <p>Bookkeeper-write-quorum: How many writes to make of each entry, default: 0</p>
  </li>
  <li>
    <p>Ml-mark-delete-max-rate: Throttling rate of mark-delete operation (0 means no throttle), default: 0.0</p>
  </li>
</ul>

<h6 id="cli-11">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces set-persistence --bookkeeper-ack-quorum 2 --bookkeeper-ensemble 3 --bookkeeper-write-quorum 2 --ml-mark-delete-max-rate 0 test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-15">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/persistent/{property}/{cluster}/{namespace}/persistence
</code></pre>
</div>

<h6 id="java-33">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setPersistence</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span><span class="k">new</span> <span class="n">PersistencePolicies</span><span class="o">(</span><span class="n">bookkeeperEnsemble</span><span class="o">,</span> <span class="n">bookkeeperWriteQuorum</span><span class="o">,</span><span class="n">bookkeeperAckQuorum</span><span class="o">,</span><span class="n">managedLedgerMaxMarkDeleteRate</span><span class="o">))</span>
</code></pre>
</div>

<h4 id="get-persistence-policies">get persistence policies</h4>

<p>It shows configured persistence policies of a given namespace.</p>

<h6 id="cli-12">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-persistence test-property/cl1/ns1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"bookkeeperEnsemble"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bookkeeperWriteQuorum"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bookkeeperAckQuorum"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"managedLedgerMaxMarkDeleteRate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="rest-16">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/persistence
</code></pre>
</div>

<h6 id="java-34">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getPersistence</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="unload-namespace-bundle">unload namespace bundle</h4>

<p>Namespace bundle is a virtual group of topics which belong to same namespace. If broker gets overloaded with number of bundles then this command can help to unload heavy bundle from that broker, so it can be served by some other less loaded broker. Namespace bundle is defined with it’s start and end range such as 0x00000000 and 0xffffffff.</p>

<h6 id="cli-13">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces unload --bundle 0x00000000_0xffffffff test-property/pstg-gq1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-17">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>PUT /admin/namespaces/{property}/{cluster}/{namespace}/unload
</code></pre>
</div>

<h6 id="java-35">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">unloadNamespaceBundle</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="set-message-ttl">set message-ttl</h4>

<p>It configures message’s time to live (in seconds) duration.</p>

<h6 id="cli-14">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces set-message-ttl --messageTTL 100 test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-18">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/messageTTL
</code></pre>
</div>

<h6 id="java-36">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setNamespaceMessageTTL</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">messageTTL</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="get-message-ttl">get message-ttl</h4>

<p>It gives a message ttl of configured namespace.</p>

<h6 id="cli-15">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-message-ttl test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>100
</code></pre>
</div>

<h6 id="rest-19">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/messageTTL
</code></pre>
</div>

<h6 id="java-37">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getNamespaceReplicationClusters</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="split-bundle">split bundle</h4>

<p>Each namespace bundle can contain multiple topics and each bundle can be served by only one broker. If bundle gets heavy with multiple live topics in it then it creates load on that broker and in order to resolve this issue, admin can split bundle using this command.</p>

<h6 id="cli-16">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces split-bundle --bundle 0x00000000_0xffffffff test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-20">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>PUT /admin/namespaces/{property}/{cluster}/{namespace}/{bundle}/split
</code></pre>
</div>

<h6 id="java-38">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">splitNamespaceBundle</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="clear-backlog">clear backlog</h4>

<p>It clears all message backlog for all the topics those belong to specific namespace. You can also clear backlog for a specific subscription as well.</p>

<h6 id="cli-17">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces clear-backlog --sub my-subscription test-property/pstg-gq1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-21">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/clearBacklog
</code></pre>
</div>

<h6 id="java-39">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">clearNamespaceBacklogForSubscription</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">subscription</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="clear-bundle-backlog">clear bundle backlog</h4>

<p>It clears all message backlog for all the topics those belong to specific NamespaceBundle. You can also clear backlog for a specific subscription as well.</p>

<h6 id="cli-18">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces clear-backlog  --bundle 0x00000000_0xffffffff  --sub my-subscription test-property/pstg-gq1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-22">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/{bundle}/clearBacklog
</code></pre>
</div>

<h6 id="java-40">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">clearNamespaceBundleBacklogForSubscription</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">,</span> <span class="n">subscription</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="set-retention">set retention</h4>

<p>Each namespace contains multiple topics and each topic’s retention size (storage size) should not exceed to a specific threshold or it should be stored till certain time duration. This command helps to configure retention size and time of topics in a given namespace.</p>

<h6 id="cli-19">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin set-retention --size 10 --time 100 test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-23">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/retention
</code></pre>
</div>

<h6 id="java-41">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setRetention</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="k">new</span> <span class="n">RetentionPolicies</span><span class="o">(</span><span class="n">retentionTimeInMin</span><span class="o">,</span> <span class="n">retentionSizeInMB</span><span class="o">))</span>
</code></pre>
</div>

<h4 id="get-retention">get retention</h4>

<p>It shows retention information of a given namespace.</p>

<h6 id="cli-20">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-retention test-property/cl1/ns1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"retentionTimeInMinutes"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"retentionSizeInMB"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="rest-24">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/retention
</code></pre>
</div>

<h6 id="java-42">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getRetention</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h3 id="namespace-isolation">Namespace isolation</h3>

<p>Coming soon.</p>

<h3 id="unloading-from-a-broker">Unloading from a broker</h3>

<p>You can unload a namespace, or a <span class="popover-term" tabindex="0" title="What is a namespace bundle?" data-placement="top" data-content="A virtual group of topics that belong to the same namespace. A namespace bundle is defined as a range between two 32-bit hashes, such as 0x00000000 and 0xffffffff." data-toggle="popover" data-trigger="focus">namespace bundle</span>, from the Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">broker</span> that is currently responsible for it.</p>

<h4 id="pulsar-admin-23">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-unload"><code class="highlighter-rouge">unload</code></a> subcommand of the <a href="../../reference/CliTools#pulsar-admin-namespaces"><code class="highlighter-rouge">namespaces</code></a> command.</p>

<h5 id="example">Example</h5>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces unload my-prop/my-cluster/my-ns
</code></pre>
</div>

<h4 id="rest-api-19">REST API</h4>

<h4 id="java-43">Java</h4>

<h2 id="managing-peristent-topics">Managing peristent topics</h2>

<p>Persistent helps to access topic which is a logical endpoint for
publishing and consuming messages. Producers publish messages to the
topic and consumers subscribe to the topic, to consume messages
published to the topic.</p>

<p>In below instructions and commands - persistent topic format is:</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<section class="topic">
  persistent://<span class="property">property</span>/<span class="cluster">cluster</span>/<span class="namespace">namespace</span>/<span class="t">topic</span>
</section>

<p>Normal topics can be served only by a single <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">broker</span>, which limits the topic’s maximum throughput. <em>Partitioned topics</em> are a special type of topic that be handled by multiple brokers, which allows for much higher throughput.</p>

<p>Behind the scenes, a partitioned topic is actually implemented as N internal topics, where N is the number of partitions. When publishing messages to a partitioned topic, each message is routed to one of several brokers. The distribution of partitions across brokers is handled automatically by Pulsar.</p>

<p>The diagram below illustrates this:</p>

<p><img src="/img/pulsar_partitioned_topic.jpg" alt="Partitioned Topic" /></p>

<p>Here, the topic <strong>T1</strong> has five partitions (<strong>P0</strong> through <strong>P4</strong>) split across three brokers. Because there are more partitions than brokers, two brokers handle two partitions a piece, while the third handles only one (again, Pulsar handles this distribution of partitions automatically).</p>

<p>Messages for this topic are broadcast to two <span class="popover-term" tabindex="0" title="What is a consumer?" data-placement="top" data-content="A process that establishes a subscription to a Pulsar topic and processes messages published to that topic by producers." data-toggle="popover" data-trigger="focus">consumers</span>. The <a href="#routing-modes">routing mode</a> determines both which broker handles each partition, while the <a href="../../getting-started/ConceptsAndArchitecture#subscription-modes">subscription mode</a> determines which messages go to which consumers.</p>

<p>Decisions about routing and subscription modes can be made separately in most cases. Throughput concerns should guide partitioning/routing decisions while subscription decisions should be guided by application semantics.</p>

<p>There is no difference between partitioned topics and normal topics in terms of how subscription modes work, as partitioning only determines what happens between when a message is published by a <span class="popover-term" tabindex="0" title="What is a producer?" data-placement="top" data-content="A process that publishes messages to a Pulsar topic." data-toggle="popover" data-trigger="focus">producer</span> and processed and <span class="popover-term" tabindex="0" title="What is an acknowledgement (ack)?" data-placement="top" data-content="A message sent to a Pulsar broker by a consumer that a message has been successfully processed. An acknowledgement (ack) is Pulsar's way of knowing that the message can be deleted from the system; if no acknowledgement, then the message will be retained until it's processed." data-toggle="popover" data-trigger="focus">acknowledged</span> by a <span class="popover-term" tabindex="0" title="What is a consumer?" data-placement="top" data-content="A process that establishes a subscription to a Pulsar topic and processes messages published to that topic by producers." data-toggle="popover" data-trigger="focus">consumer</span>.</p>

<p>Partitioned topics need to be explicitly created via the <a href="../../admin/AdminInterface">admin API</a>. The number of partitions can be specified when creating the topic.</p>

<h4 id="routing-modes">Routing modes</h4>

<p>When publishing to partitioned topics, you must specify a <em>routing mode</em>. The routing mode determines which partition—that is, which internal topic—each message should be published to.</p>

<p>There are three routing modes available by default:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Mode</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">Ordering guarantee</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Key hash</td>
      <td style="text-align: left">If a key property has been specified on the message, the partitioned producer will hash the key and assign it to a particular partition.</td>
      <td style="text-align: left">Per-key-bucket ordering</td>
    </tr>
    <tr>
      <td style="text-align: left">Single default partition</td>
      <td style="text-align: left">If no key is provided, each producer’s message will be routed to a dedicated partition, initially random selected</td>
      <td style="text-align: left">Per-producer ordering</td>
    </tr>
    <tr>
      <td style="text-align: left">Round robin distribution</td>
      <td style="text-align: left">If no key is provided, all messages will be routed to different partitions in round-robin fashion to achieve maximum throughput.</td>
      <td style="text-align: left">None</td>
    </tr>
  </tbody>
</table>

<p>In addition to these default modes, you can also create a custom routing mode if you’re using the <a href="../../clients/Java">Java client</a> by implementing the <a target="_blank" href="/api/client/com/yahoo/pulsar/client/api/MessageRouter.html"><code class="highlighter-rouge">MessageRouter</code></a> interface.</p>

<h2 id="permissions">Permissions</h2>

<h4 id="grant-permission">Grant permission</h4>

<p>It grants permissions on a client role to perform specific actions on a given topic.</p>

<h6 id="cli-21">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent grant-permission --actions produce,consume --role application1 persistent://test-property/cl1/ns1/tp1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-25">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/persistent/{property}/{cluster}/{namespace}/{destination}/permissions/{role}
</code></pre>
</div>

<h6 id="java-44">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">grantPermission</span><span class="o">(</span><span class="n">destination</span><span class="o">,</span> <span class="n">role</span><span class="o">,</span> <span class="n">getAuthActions</span><span class="o">(</span><span class="n">actions</span><span class="o">))</span>
</code></pre>
</div>

<h4 id="get-permission-1">Get permission</h4>

<p>It shows a list of client role permissions on a given topic.</p>

<h6 id="cli-22">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin permissions persistent://test-property/cl1/ns1/tp1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"application1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"consume"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"produce"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="rest-26">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/persistent/{property}/{cluster}/{namespace}/{destination}/permissions
</code></pre>
</div>

<h6 id="java-45">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">getPermissions</span><span class="o">(</span><span class="n">destination</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="revoke-permission">Revoke permission</h4>

<p>It revokes a permission which was granted on a client role.</p>

<h6 id="cli-23">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent revoke-permission --role application1 persistent://test-property/cl1/ns1/tp1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-27">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>DELETE /admin/persistent/{property}/{cluster}/{namespace}/{destination}/permissions/{role}
</code></pre>
</div>

<h6 id="java-46">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">revokePermissions</span><span class="o">(</span><span class="n">destination</span><span class="o">,</span> <span class="n">role</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="peek-messages">Peek messages</h4>

<p>It peeks N messages for a specific subscription of a given topic.</p>

<h6 id="cli-24">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent peek-messages --count 10 --subscription my-subscription persistent://test-property/cl1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>Message ID: 315674752:0  
Properties:  {  "X-Pulsar-publish-time" : "2015-07-13 17:40:28.451"  }
msg-payload
</code></pre>
</div>

<h6 id="rest-28">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/persistent/{property}/{cluster}/{namespace}/{destination}/subscription/{subName}/position/{messagePosition}
</code></pre>
</div>

<h6 id="java-47">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">peekMessages</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">,</span> <span class="n">subName</span><span class="o">,</span> <span class="n">numMessages</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="skip-messages">Skip messages</h4>

<p>It skips N messages for a specific subscription of a given topic.</p>

<h6 id="cli-25">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent skip --count 10 --subscription my-subscription persistent://test-property/cl1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-29">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/persistent/{property}/{cluster}/{namespace}/{destination}/subscription/{subName}/skip/{numMessages}
</code></pre>
</div>

<h6 id="java-48">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">skipMessages</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">,</span> <span class="n">subName</span><span class="o">,</span> <span class="n">numMessages</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="skip-all-messages">Skip all messages</h4>

<p>It skips all old messages for a specific subscription of a given topic.</p>

<h6 id="cli-26">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent skip-all --subscription my-subscription persistent://test-property/cl1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-30">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/persistent/{property}/{cluster}/{namespace}/{destination}/subscription/{subName}/skip_all
</code></pre>
</div>

<h6 id="java-49">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">skipAllMessages</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">,</span> <span class="n">subName</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="expire-messages">Expire messages</h4>

<p>It expires messages which are older than given expiry time (in seconds) for a specific subscription of a given topic.</p>

<h6 id="cli-27">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent expire-messages --subscription my-subscription --expireTime 120 persistent://test-property/cl1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-31">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/persistent/{property}/{cluster}/{namespace}/{destination}/subscription/{subName}/expireMessages/{expireTimeInSeconds}
</code></pre>
</div>

<h6 id="java-50">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">expireMessages</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">,</span> <span class="n">subName</span><span class="o">,</span> <span class="n">expireTimeInSeconds</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="expire-all-messages">Expire all messages</h4>

<p>It expires messages which are older than given expiry time (in seconds) for all subscriptions of a given topic.</p>

<h6 id="cli-28">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent expire-messages-all-subscriptions --expireTime 120 persistent://test-property/cl1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-32">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/persistent/{property}/{cluster}/{namespace}/{destination}/all_subscription/expireMessages/{expireTimeInSeconds}
</code></pre>
</div>

<h6 id="java-51">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">expireMessagesForAllSubscriptions</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">,</span> <span class="n">expireTimeInSeconds</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="reset-cursor">Reset cursor</h4>

<p>It resets a subscription’s cursor position back to the position which was recorded X minutes before. It essentially calculates time and position of cursor at X minutes before and resets it at that position.</p>

<h6 id="cli-29">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent reset-cursor --subscription my-subscription --time 10 persistent://test-property/pstg-gq1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-33">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/persistent/{property}/{cluster}/{namespace}/{destination}/subscription/{subName}/resetcursor/{timestamp}
</code></pre>
</div>

<h6 id="java-52">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">resetCursor</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">,</span> <span class="n">subName</span><span class="o">,</span> <span class="n">timestamp</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="lookup-of-topic">Lookup of topic</h4>

<p>It locates broker url which is serving the given topic.</p>

<h6 id="cli-30">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent lookup persistent://test-property/pstg-gq1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>"pulsar://broker1.org.com:4480"
</code></pre>
</div>

<h6 id="rest-34">REST</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>GET http://&lt;broker-url&gt;:&lt;port&gt;/lookup/v2/destination/persistent/{property}/{cluster}/{namespace}/{dest}
(\* this api serves by “lookup” resource and not “persistent”)
</code></pre>
</div>

<h6 id="java-53">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">lookups</span><span class="o">().</span><span class="na">lookupDestination</span><span class="o">(</span><span class="n">destination</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="get-subscriptions">Get subscriptions</h4>

<p>It shows all subscription names for a given topic.</p>

<h6 id="cli-31">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin persistent subscriptions persistent://test-property/pstg-gq1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>my-subscription
</code></pre>
</div>

<h6 id="rest-35">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/persistent/{property}/{cluster}/{namespace}/{destination}/subscriptions
</code></pre>
</div>

<h6 id="java-54">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">getSubscriptions</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="unsubscribe">unsubscribe</h4>

<p>It can also help to unsubscribe a subscription which is no more processing further messages.</p>

<h6 id="cli-32">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$pulsar-admin persistent unsubscribe --subscription my-subscription persistent://test-property/pstg-gq1/ns1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-36">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>DELETE /admin/persistent/{property}/{cluster}/{namespace}/{destination}/subscription/{subName}
</code></pre>
</div>

<h6 id="java-55">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">deleteSubscription</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">,</span> <span class="n">subName</span><span class="o">)</span>
</code></pre>
</div>

<h3 id="namespace-isolation-policy">Namespace isolation policy</h3>

<h4 id="createupdate-ns-isolation-policy">create/update ns-isolation policy</h4>

<p>It creates a namespace isolation policy.</p>

<ul>
  <li>
    <p>auto-failover-policy-params: comma separated name=value auto failover policy parameters</p>
  </li>
  <li>
    <p>auto-failover-policy-type: auto failover policy type name [‘min_available’]</p>
  </li>
  <li>
    <p>namespaces: comma separated namespaces-regex list</p>
  </li>
  <li>
    <p>primary: comma separated primary-broker-regex list</p>
  </li>
  <li>
    <p>secondary: comma separated secondary-broker-regex list</p>
  </li>
</ul>

<h6 id="cli-33">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin ns-isolation-policy --auto-failover-policy-params min_limit=0 --auto-failover-policy-type min_available --namespaces test-property/cl1/ns.*|test-property/cl1/test-ns*.* --secondary broker2.* --primary broker1.* cl1 ns-is-policy1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-37">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/clusters/{cluster}/namespaceIsolationPolicies/{policyName}
</code></pre>
</div>

<h6 id="java-56">Java</h6>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">createNamespaceIsolationPolicy</span><span class="o">(</span><span class="n">clusterName</span><span class="o">,</span> <span class="n">policyName</span><span class="o">,</span> <span class="n">namespaceIsolationData</span><span class="o">);</span>
</code></pre>
</div>

<h4 id="get-ns-isolation-policy">get ns-isolation policy</h4>

<p>It shows a created namespace isolation policy.</p>

<h6 id="cli-34">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin ns-isolation-policy get cl1 ns-is-policy1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"namespaces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"test-property/cl1/ns.*|test-property/cl1/test-ns*.*"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"broker1.*"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"secondary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"broker2.*"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"auto_failover_policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"policy_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"min_available"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"min_limit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="rest-38">REST</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/clusters/{cluster}/namespaceIsolationPolicies/{policyName}
</code></pre>
</div>

<h6 id="java-57">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">getNamespaceIsolationPolicy</span><span class="o">(</span><span class="n">clusterName</span><span class="o">,</span> <span class="n">policyName</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="delete-ns-isolation-policy">delete ns-isolation policy</h4>

<p>It deletes a namespace isolation policy.</p>

<h6 id="cli-35">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin ns-isolation-policy delete ns-is-policy1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-39">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>DELETE /admin/clusters/{cluster}/namespaceIsolationPolicies/{policyName}
</code></pre>
</div>

<h6 id="java-58">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">deleteNamespaceIsolationPolicy</span><span class="o">(</span><span class="n">clusterName</span><span class="o">,</span> <span class="n">policyName</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="list-all-ns-isolation-policy">list all ns-isolation policy</h4>

<p>It shows all namespace isolation policies served by a given cluster.</p>

<h6 id="cli-36">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin ns-isolation-policy list cl1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"ns-is-policy1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"namespaces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"test-property/cl1/ns.*|test-property/cl1/test-ns*.*"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"primary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"broker1.*"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"secondary"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"broker2.*"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"auto_failover_policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"policy_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"min_available"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"min_limit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="rest-40">REST</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/clusters/{cluster}/namespaceIsolationPolicies
</code></pre>
</div>

<h6 id="java-59">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">clusters</span><span class="o">().</span><span class="na">getNamespaceIsolationPolicies</span><span class="o">(</span><span class="n">clusterName</span><span class="o">)</span>
</code></pre>
</div>

<h3 id="resource-quotas">Resource-Quotas</h3>

<h4 id="set-namespace-resource-quota">set namespace resource quota</h4>

<p>It sets customize quota information for a given namespace bundle.</p>

<h6 id="cli-37">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin resource-quotas set --bandwidthIn 10 --bandwidthOut 10 --bundle 0x00000000_0xffffffff --memory 10 --msgRateIn 10 --msgRateOut 10 --namespace test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-41">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/resource-quotas/{property}/{cluster}/{namespace}/{bundle}
</code></pre>
</div>

<h6 id="java-60">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">resourceQuotas</span><span class="o">().</span><span class="na">setNamespaceBundleResourceQuota</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">,</span> <span class="n">quota</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="get-namespace-resource-quota">get namespace resource quota</h4>

<p>It shows configured resource quota information.</p>

<h6 id="cli-38">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin resource-quotas get  --bundle 0x00000000_0xffffffff --namespace test-property/cl1/my-topic
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"msgRateIn"</span><span class="p">:</span><span class="w"> </span><span class="mf">80.40352101165782</span><span class="p">,</span><span class="w">
    </span><span class="nt">"msgRateOut"</span><span class="p">:</span><span class="w"> </span><span class="mf">132.58187392933146</span><span class="p">,</span><span class="w">
    </span><span class="nt">"bandwidthIn"</span><span class="p">:</span><span class="w"> </span><span class="mf">144273.8819600397</span><span class="p">,</span><span class="w">
    </span><span class="nt">"bandwidthOut"</span><span class="p">:</span><span class="w"> </span><span class="mf">234497.9190227951</span><span class="p">,</span><span class="w">
    </span><span class="nt">"memory"</span><span class="p">:</span><span class="w"> </span><span class="mf">199.91739142481595</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dynamic"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">          
</span></code></pre>
</div>

<h6 id="rest-42">REST</h6>
<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/resource-quotas/{property}/{cluster}/{namespace}/{bundle}
</code></pre>
</div>

<h6 id="java-61">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">resourceQuotas</span><span class="o">().</span><span class="na">getNamespaceBundleResourceQuota</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="reset-namespace-resource-quota">reset namespace resource quota</h4>

<p>It again reverts back the customized resource quota and sets back default resource_quota.</p>

<h6 id="cli-39">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin resource-quotas reset-namespace-bundle-quota --bundle 0x00000000_0xffffffff --namespace test-property/cl1/my-topic
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-43">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>DELETE /admin/resource-quotas/{property}/{cluster}/{namespace}/{bundle}
</code></pre>
</div>

<h6 id="java-62">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">resourceQuotas</span><span class="o">().</span><span class="na">resetNamespaceBundleResourceQuota</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">)</span>
</code></pre>
</div>

<h2 id="partitioned-topics">Partitioned topics</h2>

<p>You can use Pulsar’s <a href="../../admin/AdminInterface">admin API</a> to create and manage partitioned topics.</p>

<p>In all of the instructions and commands below, the topic name structure is:</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<section class="topic">
  persistent://<span class="property">property</span>/<span class="cluster">cluster</span>/<span class="namespace">namespace</span>/<span class="t">topic</span>
</section>

<h3 id="create-1">Create</h3>

<p>Partitioned topics in Pulsar must be explicitly created. When creating a new partitioned topic you need to provide a name for the topic as well as the desired number of partitions.</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<div class="admonition">
  <div class="info">
    <span class="admonition-title"><p>Global partitioned topics</p>
</span>
    
<p>If you’d like to create a <a href="">global</a> partitioned topic, you need to create a partitioned topic using the instructions here and specify <code class="highlighter-rouge">global</code> as the cluster in the topic name.</p>

  </div>
</div>

<h4 id="pulsar-admin-24">pulsar-admin</h4>

<p>You can create partitioned topics using the <a href="../../reference/CliTools#pulsar-admin-persistent-create-partitioned-topic"><code class="highlighter-rouge">create-partitioned-topic</code></a> command and specifying the topic name as an argument and the number of partitions using the <code class="highlighter-rouge">-p</code> or <code class="highlighter-rouge">--partitions</code> flag. Here’s an example:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>bin/pulsar-admin persistent create-partitioned-topic <span class="se">\</span>
  persistent://my-property/my-cluster-my-namespace/my-topic <span class="se">\</span>
  --partitions 4
</code></pre>
</div>

<h4 id="rest-api-20">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method put">PUT</code><code class="url">/admin/persistent/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/<span class="endpoint">:destination</span>/partitions</code></pre></div>

<p><a href="../../reference/RestApi#/admin/persistent/:property/:cluster/:namespace/:destination/partitions">More info</a></p>

<h4 id="java-63">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">String</span> <span class="n">topicName</span> <span class="o">=</span> <span class="s">"persistent://my-property/my-cluster-my-namespace/my-topic"</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">numPartitions</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>
<span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">createPartitionedTopic</span><span class="o">(</span><span class="n">topicName</span><span class="o">,</span> <span class="n">numPartitions</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="get-metadata">Get metadata</h3>

<p>Partitioned topics have metadata associated with them that you can fetch as a JSON object. The following metadata fields are currently available:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">partitions</code></td>
      <td style="text-align: left">The number of partitions into which the topic is divided</td>
    </tr>
  </tbody>
</table>

<h4 id="pulsar-admin-25">pulsar-admin</h4>

<p>You can see the see number of partitions in a partitioned topic using the <a href="../../reference/CliTools#pulsar-admin-persistent-get-partitioned-topic"><code class="highlighter-rouge">get-partitioned-topic-metadata</code></a> subcommand. Here’s an example:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin persistent get-partitioned-topic-metadata <span class="se">\</span>
  persistent://my-property/my-cluster-my-namespace/my-topic
<span class="o">{</span>
  <span class="s2">"partitions"</span>: 4
<span class="o">}</span>
</code></pre>
</div>

<h4 id="rest-api-21">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/persistent/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>:/<span class="endpoint">:namespace</span>/<span class="endpoint">:destination</span>/partitions</code></pre></div>

<p><a href="../../reference/RestApi#/admin/persistent/:property/:cluster/:namespace/:destination/partitions">More info</a></p>

<h4 id="java-64">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">String</span> <span class="n">topicName</span> <span class="o">=</span> <span class="s">"persistent://my-property/my-cluster-my-namespace/my-topic"</span><span class="o">;</span>
<span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">getPartitionedTopicMetadata</span><span class="o">(</span><span class="n">topicName</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="update-2">Update</h3>

<p>You can update the number of partitions on an existing partitioned topic <em>if</em> the topic is non-global. To update, the new number of partitions must be greater than the existing number.</p>

<p>Decrementing the number of partitions would deleting the topic, which is not supported in Pulsar.</p>

<p>Already created partitioned producers and consumers can’t see newly created partitions and it requires to recreate them at application so, newly created producers and consumers can connect to newly added partitions as well. Therefore, it can violate partition ordering at producers until all producers are restarted at application.</p>

<h4 id="pulsar-admin-26">pulsar-admin</h4>

<p>Partitioned topics can be deleted using the <a href="../../reference/CliTools#pulsar-admin-persistent-update-partitioned-topic"><code class="highlighter-rouge">update-partitioned-topic</code></a> command.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin persistent update-partitioned-topic <span class="se">\</span>
  persistent://my-property/my-cluster-my-namespace/my-topic <span class="se">\</span>
  --partitions 8
</code></pre>
</div>

<h4 id="rest-api-22">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method post">POST</code><code class="url">/admin/persistent/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/<span class="endpoint">:destination</span>/partitions</code></pre></div>

<p><a href="../../reference/RestApi#/admin/persistent/:property/:cluster/:namespace/:destination/partitions">More info</a></p>

<h4 id="java-65">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">updatePartitionedTopic</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">,</span> <span class="n">numPartitions</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="delete-3">Delete</h3>

<h4 id="pulsar-admin-27">pulsar-admin</h4>

<p>Partitioned topics can be deleted using the <a href="../../reference/CliTools#pulsar-admin-persistent-delete-partitioned-topic"><code class="highlighter-rouge">delete-partitioned-topic</code></a> command, specifying the topic by name:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>bin/pulsar-admin persistent delete-partitioned-topic <span class="se">\</span>
  persistent://my-property/my-cluster-my-namespace/my-topic
</code></pre>
</div>

<h4 id="rest-api-23">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method delete">DELETE</code><code class="url">/admin/persistent/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/<span class="endpoint">:destination</span>/partitions</code></pre></div>

<p><a href="../../reference/RestApi#/admin/persistent/:property/:cluster/:namespace/:destination/partitions">More info</a></p>

<h4 id="java-66">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="list-2">List</h3>

<p>It provides a list of persistent topics existing under a given namespace.</p>

<h4 id="pulsar-admin-28">pulsar-admin</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin peristent list prop-1/cluster-1/namespace
persistent://property/cluster/namespace/topic
persistent://property/cluster/namespace/topic
</code></pre>
</div>

<h4 id="rest-api-24">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/persistent/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/persistent/:property/:cluster/:namespace">More info</a></p>

<h4 id="java-67">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">getList</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="stats">Stats</h3>

<p>It shows current statistics of a given partitioned topic. Here’s an example payload:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"msgRateIn"</span><span class="p">:</span><span class="w"> </span><span class="mf">4641.528542257553</span><span class="p">,</span><span class="w">
  </span><span class="nt">"msgThroughputIn"</span><span class="p">:</span><span class="w"> </span><span class="mf">44663039.74947473</span><span class="p">,</span><span class="w">
  </span><span class="nt">"msgRateOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"msgThroughputOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"averageMsgSize"</span><span class="p">:</span><span class="w"> </span><span class="mf">1232439.816728665</span><span class="p">,</span><span class="w">
  </span><span class="nt">"storageSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">135532389160</span><span class="p">,</span><span class="w">
  </span><span class="nt">"publishers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"msgRateIn"</span><span class="p">:</span><span class="w"> </span><span class="mf">57.855383881403576</span><span class="p">,</span><span class="w">
      </span><span class="nt">"msgThroughputIn"</span><span class="p">:</span><span class="w"> </span><span class="mf">558994.7078932219</span><span class="p">,</span><span class="w">
      </span><span class="nt">"averageMsgSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">613135</span><span class="p">,</span><span class="w">
      </span><span class="nt">"producerId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"producerName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"connectedSince"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"my-topic_subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"msgRateOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"msgThroughputOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"msgBacklog"</span><span class="p">:</span><span class="w"> </span><span class="mi">116632</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"msgRateExpired"</span><span class="p">:</span><span class="w"> </span><span class="mf">36.98245516804671</span><span class="p">,</span><span class="w">
      </span><span class="nt">"consumers"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"replication"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The following stats are available:</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<table class="stats">
  <thead>
    <tr>
      <th>Stat</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    <tr>
      <td>msgRateIn</td>
      <td>The sum of all local and replication publishers’ publish rates in messages per second
</td>
    </tr>
    
    <tr>
      <td>msgThroughputIn</td>
      <td>Same as <code class="highlighter-rouge">msgRateIn</code> but in bytes per second instead of messages per second
</td>
    </tr>
    
    <tr>
      <td>msgRateOut</td>
      <td>The sum of all local and replication consumers’ dispatch rates in messages per second
</td>
    </tr>
    
    <tr>
      <td>msgThroughputOut</td>
      <td>Same as <code class="highlighter-rouge">msgRateOut</code> but in bytes per second instead of messages per second
</td>
    </tr>
    
    <tr>
      <td>averageMsgSize</td>
      <td>Average message size, in bytes, from this publisher within the last interval
</td>
    </tr>
    
    <tr>
      <td>storageSize</td>
      <td>The sum of the ledgers’ storage size for this topic
</td>
    </tr>
    
    <tr>
      <td>publishers</td>
      <td>The list of all local publishers into the topic. There can be anywhere from zero to thousands.
</td>
    </tr>
    
    <tr>
      <td>producerId</td>
      <td>Internal identifier for this producer on this topic
</td>
    </tr>
    
    <tr>
      <td>producerName</td>
      <td>Internal identifier for this producer, generated by the client library
</td>
    </tr>
    
    <tr>
      <td>address</td>
      <td>IP address and source port for the connection of this producer
</td>
    </tr>
    
    <tr>
      <td>connectedSince</td>
      <td>Timestamp this producer was created or last reconnected
</td>
    </tr>
    
    <tr>
      <td>subscriptions</td>
      <td>The list of all local subscriptions to the topic
</td>
    </tr>
    
    <tr>
      <td>my-subscription</td>
      <td>The name of this subscription (client defined)
</td>
    </tr>
    
    <tr>
      <td>msgBacklog</td>
      <td>The count of messages in backlog for this subscription
</td>
    </tr>
    
    <tr>
      <td>type</td>
      <td>This subscription type
</td>
    </tr>
    
    <tr>
      <td>msgRateExpired</td>
      <td>The rate at which messages were discarded instead of dispatched from this subscription due to TTL
</td>
    </tr>
    
    <tr>
      <td>consumers</td>
      <td>The list of connected consumers for this subscription
</td>
    </tr>
    
    <tr>
      <td>consumerName</td>
      <td>Internal identifier for this consumer, generated by the client library
</td>
    </tr>
    
    <tr>
      <td>availablePermits</td>
      <td>The number of messages this consumer has space for in the client library’s listen queue. A value of 0 means the client library’s queue is full and receive() isn’t being called. A nonzero value means this consumer is ready to be dispatched messages.
</td>
    </tr>
    
    <tr>
      <td>replication</td>
      <td>This section gives the stats for cross-colo replication of this topic
</td>
    </tr>
    
    <tr>
      <td>replicationBacklog</td>
      <td>The outbound replication backlog in messages
</td>
    </tr>
    
    <tr>
      <td>connected</td>
      <td>Whether the outbound replicator is connected
</td>
    </tr>
    
    <tr>
      <td>replicationDelayInSeconds</td>
      <td>How long the oldest message has been waiting to be sent through the connection, if connected is true
</td>
    </tr>
    
    <tr>
      <td>inboundConnection</td>
      <td>The IP and port of the broker in the remote cluster’s publisher connection to this broker
</td>
    </tr>
    
    <tr>
      <td>inboundConnectedSince</td>
      <td>The TCP connection being used to publish messages to the remote cluster. If there are no local publishers connected, this connection is automatically closed after a minute.
</td>
    </tr>
    
  </tbody>
</table>

<h4 id="pulsar-admin-29">pulsar-admin</h4>

<p><a href="../../reference/CliTools#pulsar-admin-persistent-partitioned-stats"><code class="highlighter-rouge">partitioned-stats</code></a></p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin persistent partitioned-stats <span class="se">\</span>
  persistent://test-property/cl1/ns1/tp1 <span class="se">\</span>
  --per-partition        
</code></pre>
</div>

<h4 id="rest-api-25">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/persistent/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/<span class="endpoint">:destination</span>/partitioned-stats</code></pre></div>

<p><a href="../../reference/RestApi#/admin/persistent/:property/:cluster/:namespace/:destination/partitioned-stats">More info</a></p>

<h4 id="java-68">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">getStats</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="internal-stats">Internal stats</h3>

<p>It shows detailed statistics of a topic.</p>

<!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<table class="stats">
  <thead>
    <tr>
      <th>Stat</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    <tr>
      <td>entriesAddedCounter</td>
      <td>Messages published since this broker loaded this topic
</td>
    </tr>
    
    <tr>
      <td>numberOfEntries</td>
      <td>Total number of messages being tracked
</td>
    </tr>
    
    <tr>
      <td>totalSize</td>
      <td>Total storage size in bytes of all messages
</td>
    </tr>
    
    <tr>
      <td>currentLedgerEntries</td>
      <td>Count of messages written to the ledger currently open for writing
</td>
    </tr>
    
    <tr>
      <td>currentLedgerSize</td>
      <td>Size in bytes of messages written to ledger currently open for writing
</td>
    </tr>
    
    <tr>
      <td>lastLedgerCreatedTimestamp</td>
      <td>Time when last ledger was created
</td>
    </tr>
    
    <tr>
      <td>lastLedgerCreationFailureTimestamp</td>
      <td>time when last ledger was failed
</td>
    </tr>
    
    <tr>
      <td>waitingCursorsCount</td>
      <td>How many cursors are caught up and waiting for a new message to be published
</td>
    </tr>
    
    <tr>
      <td>pendingAddEntriesCount</td>
      <td>How many messages have (asynchronous) write requests we are waiting on completion
</td>
    </tr>
    
    <tr>
      <td>lastConfirmedEntry</td>
      <td>The ledgerid:entryid of the last message successfully written. If the entryid is -1, then the ledger has been opened or is currently being opened but has no entries written yet.
</td>
    </tr>
    
    <tr>
      <td>state</td>
      <td>The state of the cursor ledger. Open means we have a cursor ledger for saving updates of the markDeletePosition.
</td>
    </tr>
    
    <tr>
      <td>ledgers</td>
      <td>The ordered list of all ledgers for this topic holding its messages
</td>
    </tr>
    
    <tr>
      <td>cursors</td>
      <td>The list of all cursors on this topic. There will be one for every subscription you saw in the topic stats.
</td>
    </tr>
    
    <tr>
      <td>markDeletePosition</td>
      <td>The ack position: the last message the subscriber acknowledged receiving
</td>
    </tr>
    
    <tr>
      <td>readPosition</td>
      <td>The latest position of subscriber for reading message
</td>
    </tr>
    
    <tr>
      <td>waitingReadOp</td>
      <td>This is true when the subscription has read the latest message published to the topic and is waiting on new messages to be published.
</td>
    </tr>
    
    <tr>
      <td>pendingReadOps</td>
      <td>The counter for how many outstanding read requests to the BookKeepers we have in progress
</td>
    </tr>
    
    <tr>
      <td>messagesConsumedCounter</td>
      <td>Number of messages this cursor has acked since this broker loaded this topic
</td>
    </tr>
    
    <tr>
      <td>cursorLedger</td>
      <td>The ledger being used to persistently store the current markDeletePosition
</td>
    </tr>
    
    <tr>
      <td>cursorLedgerLastEntry</td>
      <td>The last entryid used to persistently store the current markDeletePosition
</td>
    </tr>
    
    <tr>
      <td>individuallyDeletedMessages</td>
      <td>If Acks are being done out of order, shows the ranges of messages Acked between the markDeletePosition and the read-position
</td>
    </tr>
    
    <tr>
      <td>lastLedgerSwitchTimestamp</td>
      <td>The last time the cursor ledger was rolled over
</td>
    </tr>
    
  </tbody>
</table>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"entriesAddedCounter"</span><span class="p">:</span><span class="w"> </span><span class="mi">20449518</span><span class="p">,</span><span class="w">
  </span><span class="nt">"numberOfEntries"</span><span class="p">:</span><span class="w"> </span><span class="mi">3233</span><span class="p">,</span><span class="w">
  </span><span class="nt">"totalSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">331482</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currentLedgerEntries"</span><span class="p">:</span><span class="w"> </span><span class="mi">3233</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currentLedgerSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">331482</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastLedgerCreatedTimestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-29 03:00:23.825"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastLedgerCreationFailureTimestamp"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"waitingCursorsCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pendingAddEntriesCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"lastConfirmedEntry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"324711539:3232"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LedgerOpened"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ledgers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"ledgerId"</span><span class="p">:</span><span class="w"> </span><span class="mi">324711539</span><span class="p">,</span><span class="w">
      </span><span class="nt">"entries"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"cursors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"my-subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"markDeletePosition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"324711539:3133"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"readPosition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"324711539:3233"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"waitingReadOp"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"pendingReadOps"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"messagesConsumedCounter"</span><span class="p">:</span><span class="w"> </span><span class="mi">20449501</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cursorLedger"</span><span class="p">:</span><span class="w"> </span><span class="mi">324702104</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cursorLedgerLastEntry"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w">
      </span><span class="nt">"individuallyDeletedMessages"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[(324711539:3134‥324711539:3136], (324711539:3137‥324711539:3140], ]"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"lastLedgerSwitchTimestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-29 01:30:19.313"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Open"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h4 id="pulsar-admin-30">pulsar-admin</h4>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin persistent stats-internal <span class="se">\</span>
  persistent://test-property/cl1/ns1/tp1
</code></pre>
</div>

<h4 id="rest-api-26">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/persistent/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/<span class="endpoint">:destination</span>/internalStats</code></pre></div>

<p><a href="../../reference/RestApi#/admin/persistent/:property/:cluster/:namespace/:destination/internalStats">More info</a></p>

<h4 id="java-69">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">persistentTopics</span><span class="o">().</span><span class="na">getInternalStats</span><span class="o">(</span><span class="n">persistentTopic</span><span class="o">);</span>
</code></pre>
</div>


      </section>
    </article>

    <nav class="toc-bar hidden-md-down col-lg-2">
      
      <div id="toc">
        <h4>The Pulsar admin interface</h4>
      </div>
      
    </nav>
  </div>
</div>

      </main>
    </main>

    <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->
<footer class="footer">
  <div class="container">
    <p class="text-center">Copyright 2017 The Apache Software Foundation. All Rights Reserved.</p>
  </div>
</footer>


    

    
    <!--

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-102219959-1', 'auto');
  ga('send', 'pageview');
</script>

    
  </body>
</html>
