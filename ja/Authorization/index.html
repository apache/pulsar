<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -108) };
  window.addEventListener("hashchange", shiftWindow);
  window.addEventListener("pageshow", shiftWindow);
  function load() { if (window.location.hash) shiftWindow(); }
</script>

<title>Pulsarにおける認可</title>

<link rel="stylesheet" href="/incubator-pulsar/css/style.css">
<link rel="shortcut icon" href="/incubator-pulsar/img/favicon.ico">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="/incubator-pulsar/js/jquery.tocify.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

<script async src="/incubator-pulsar/js/main.js"></script>

  </head>
  <body class="body">
    <main class="main">
      <nav class="navbar navbar-toggleable-md navbar-light container-fluid sticky-top">
  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="/incubator-pulsar/">
    <img class="main-logo" src="/incubator-pulsar/img/pulsar-logo.png" alt="Pulsar logo">
  </a>
  <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/incubator-pulsar/ja"><img class="japan-flag" src="/incubator-pulsar/img/japan-flag.svg"></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/incubator-pulsar/docs/1.18">Docs</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="versionsDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Versions
        </a>
        <div class="dropdown-menu" aria-labelledby="versionsDropdown">
          
          <a class="dropdown-item" href="/incubator-pulsar/docs/1.18">
            1.18
            <span class="badge badge-primary">LATEST</span>
          </a>
          
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="clientLibsDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Client libraries
        </a>
        <div class="dropdown-menu" aria-labelledby="clientLibsDropdown">
          <a class="dropdown-item" href="/incubator-pulsar/docs/1.18/applications/JavaClient">
            Java
          </a>
          <a class="dropdown-item" href="/incubator-pulsar/docs/1.18/applications/PythonClient">
            Python
          </a>
          <a class="dropdown-item" href="/incubator-pulsar/docs/1.18/applications/CppClient">
            C++
          </a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="/api/client">
            Java client Javadoc
          </a>
          <a class="dropdown-item" href="/api/admin">
            Java admin Javadoc
          </a>
          <a class="dropdown-item" href="/api/python">
            Python API docs
          </a>
          <a class="dropdown-item" href="/api/cpp">
            C++ API docs
          </a>
        </div>
      </li>
    </ul>
  </div>
</nav>


      <main>
        <div class="docs-container container-fluid">
  <div class="row">
    <nav class="sidebar-nav col-sm-3 col-lg-3">
      <ul class="sidebar">
  
  <section class="sidebar-group">
    <h4>Getting started</h4>
    <ul>
      
      
      
      
      <li><a href="/incubator-pulsar/ja/GettingStarted/"><i class="fa fa-file-text-o"></i>Pulsar入門</a></li>
      
      
      
      
      
      <li><a href="/incubator-pulsar/ja/Architecture/"><i class="fa fa-file-text-o"></i>システム概要</a></li>
      
      
    </ul>
  </section>
  
  <section class="sidebar-group">
    <h4>運用管理</h4>
    <ul>
      
      
      
      
      <li><a href="/incubator-pulsar/ja/ClusterSetup/"><i class="fa fa-file-text-o"></i>クラスタのセットアップ</a></li>
      
      
      
      
      
      <li><a href="/incubator-pulsar/ja/AdminTools/"><i class="fa fa-file-text-o"></i>adminツールとAPI</a></li>
      
      
    </ul>
  </section>
  
</ul>

    </nav>

    <article class="col-sm-7 col-lg-7">
      <section class="docs-header">
        <h1 class="docs-title">Pulsarにおける認可</h1>
        
        <hr />
      </section>

      <section class="content">
        <h2 id="認可モデル">認可モデル</h2>

<p>Pulsarにおいて、認証プロバイダは特定のクライアントを識別し<strong><em>ロール</em></strong>トークンと関連付けます。</p>

<p>ロールは単一または複数のクライアントを表す文字列で、<br />
これらのクライアントは、特定のトピックに対してproduceまたはconsumeを行う権限、または特定の<a href="Architecture.md#プロパティとネームスペース">プロパティ</a>の設定を管理する権限が付与されます。</p>

<h2 id="新規プロパティの作成">新規プロパティの作成</h2>

<p>Pulsarのプロパティはテナントを示す識別子で、一般的にPulsarインスタンスの管理者またはセルフサービスのポータルなどによって提供されます。</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>bin/pulsar-admin properties create my-property   <span class="se">\</span>
        --admin-roles my-admin-role                <span class="se">\</span>
        --allowed-clusters us-west,us-east
</code></pre>
</div>

<p>このコマンドはクラスタ<code class="highlighter-rouge">us-west</code>と<code class="highlighter-rouge">us-east</code>を利用可能な新規プロパティ<code class="highlighter-rouge">my-property</code>を作成します。</p>

<p>ロール<code class="highlighter-rouge">my-admin-role</code>と識別されたクライアントは、このプロパティ上での全ての管理操作が許可されます。</p>

<h2 id="ネームスペースの管理">ネームスペースの管理</h2>

<p>プロパティ管理者は指定されたクラスタ内に複数ネームスペースを作成できます。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ bin/pulsar-admin namespaces create my-property/us-west/my-namespace
</code></pre>
</div>

<p>作成後、このネームスペースの利用権限の付与ができます:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ bin/pulsar-admin namespaces grant-permission \
                        my-property/us-west/my-namespace \
                        --role my-client-role \
                        --actions produce,consume
</code></pre>
</div>

<p>コマンド実行後、ロール<code class="highlighter-rouge">my-client-role</code>と識別されたクライアントは指定されたネームスペースのトピックを利用可能になります。</p>

<h2 id="スーパーユーザ">スーパーユーザ</h2>

<p>Pulsarでは、システムの<em>スーパーユーザ</em>を特定のロールに割り当てることができます。</p>

<p>スーパーユーザは全てのプロパティとネームスペースに対する全ての管理操作、および全てのトピックに対する発行と購読が許可されます。</p>

<p>スーパーユーザはBrokerの設定ファイル<code class="highlighter-rouge">conf/broker.conf</code>で設定されます:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nv">superUserRoles</span><span class="o">=</span>my-super-user-1,my-super-user-2
</code></pre>
</div>

<p>一般的に、スーパーユーザロールはadminクライアントやBroker間の認可で利用されます。<br />
ジオレプリケーションにおいては、各Brokerが他クラスタのトピックに発行できる必要があります。</p>

      </section>
    </article>

    <nav class="toc-bar col-sm-2 col-lg-2">
      <div id="toc"></div>
    </nav>
  </div>
</div>

      </main>
    </main>

    <footer class="footer">
  <div class="container">
    <p class="text-center">&copy; Apache Foundation 2017</p>
  </div>
</footer>


    
  </body>
</html>
