<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -108) };
  window.addEventListener("hashchange", shiftWindow);
  window.addEventListener("pageshow", shiftWindow);
  function load() { if (window.location.hash) shiftWindow(); }
</script>

<title>Managing properties and namespaces</title>

<link rel="stylesheet" href="/incubator-pulsar/css/style.css">
<link rel="shortcut icon" href="/incubator-pulsar/img/favicon.ico">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="/incubator-pulsar/js/jquery.tocify.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

<script async src="/incubator-pulsar/js/main.js"></script>

  </head>
  <body class="body">
    <main class="main">
      <header class="container-fluid sticky-top top-nav">
        <nav class="navbar navbar-default navbar-toggleable-xl container">
  <a class="navbar-brand" href="/incubator-pulsar/">
    <img src="/incubator-pulsar/img/pulsar-logo.png">
  </a>

  <div class="collapse navbar-collapse justify-content-end" id="nav-content">
    <ul class="nav navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/incubator-pulsar/docs/1.18">Documentation</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/incubator-pulsar/docs/1.18/getting-started/Clients">Client libraries</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/incubator-pulsar/ja"><img class="japan-flag" src="/incubator-pulsar/img/japan-flag.svg"></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/yahoo/pulsar"><i class="fa fa-github fa-lg"></i></a>
      </li>
      <li class="nav-item version">
        <a class="nav-link">Pulsar 1.18</a>
      </li>
    </ul>
  </div>
</nav>

      </header>

      <main>
        <div class="docs-container container-fluid">
  <div class="row">
    <nav class="sidebar-nav hidden-sm-down col-md-3 col-lg-3">
      
<ul class="sidebar">
  
  <section class="sidebar-group">
    <h4>Getting started</h4>
    <ul>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/getting-started/LocalCluster/"><i class="fa fa-file-text-o"></i>Run Pulsar locally</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/getting-started/Clients/"><i class="fa fa-file-text-o"></i>Client libraries</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/getting-started/ConceptsAndArchitecture/"><i class="fa fa-file-text-o"></i>Concepts and architecture</a></li>
      
    </ul>
  </section>
  
  <section class="sidebar-group">
    <h4>Deployment</h4>
    <ul>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/deployment/InstanceSetup/"><i class="fa fa-file-text-o"></i>Deploying up a Pulsar instance</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/deployment/Kubernetes/"><i class="fa fa-file-text-o"></i>Pulsar on Kubernetes</a></li>
      
    </ul>
  </section>
  
  <section class="sidebar-group">
    <h4>Concerns</h4>
    <ul>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/concerns/PartitionedTopics/"><i class="fa fa-file-text-o"></i>Partitioned topics</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/concerns/RetentionExpiry/"><i class="fa fa-file-text-o"></i>Retention and expiry</a></li>
      
    </ul>
  </section>
  
  <section class="sidebar-group">
    <h4>Pulsar administration</h4>
    <ul>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/admin/AdminInterface/"><i class="fa fa-file-text-o"></i>Pulsar admin interface</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/admin/ClustersBrokers/"><i class="fa fa-file-text-o"></i>Clusters and brokers</a></li>
      
      
      
      <li><a  class="active"href="/incubator-pulsar/docs/1.18/admin/PropertiesNamespaces/"><i class="fa fa-file-text-o"></i>Properties and namespaces</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/admin/ZooKeeperBookKeeper/"><i class="fa fa-file-text-o"></i>ZooKeeper and BookKeeper</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/admin/Dashboard/"><i class="fa fa-file-text-o"></i>Dashboard</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/admin/Authz/"><i class="fa fa-file-text-o"></i>Authentication and authorization</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/admin/GeoReplication/"><i class="fa fa-file-text-o"></i>Geo-replication</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/admin/Stats/"><i class="fa fa-file-text-o"></i>Pulsar statistics</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/admin/ModularLoadManager/"><i class="fa fa-file-text-o"></i>Modular load manager</a></li>
      
    </ul>
  </section>
  
  <section class="sidebar-group">
    <h4>Pulsar applications</h4>
    <ul>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/applications/JavaClient/"><i class="fa fa-file-text-o"></i>The Pulsar Java client</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/applications/CppClient/"><i class="fa fa-file-text-o"></i>The Pulsar C++ client</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/applications/PythonClient/"><i class="fa fa-file-text-o"></i>The Pulsar Python client</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/applications/WebSocket/"><i class="fa fa-file-text-o"></i>WebSocket API</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/applications/PulsarSpark/"><i class="fa fa-file-text-o"></i>Spark Streaming receiver</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/applications/PulsarStorm/"><i class="fa fa-file-text-o"></i>Apache Storm adaptor</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/applications/SimulationTools/"><i class="fa fa-file-text-o"></i>Simulation tools</a></li>
      
    </ul>
  </section>
  
  <section class="sidebar-group">
    <h4>Developing Pulsar</h4>
    <ul>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/project/BinaryProtocol/"><i class="fa fa-file-text-o"></i>Pulsar binary protocol</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/project/Codebase/"><i class="fa fa-file-text-o"></i>Codebase</a></li>
      
    </ul>
  </section>
  
  <section class="sidebar-group">
    <h4>Reference</h4>
    <ul>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/reference/RestApi/"><i class="fa fa-file-text-o"></i>Pulsar REST API</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/reference/CliTools/"><i class="fa fa-file-text-o"></i>Command-line tools</a></li>
      
      
      
      <li><a href="/incubator-pulsar/docs/1.18/reference/Configuration/"><i class="fa fa-file-text-o"></i>Pulsar configuration</a></li>
      
    </ul>
  </section>
  
</ul>


    </nav>

    <article class="col-xs-12 col-sm-12 col-md-7 col-lg-7">
      <section class="docs-header">
        <h1 class="docs-title">Managing properties and namespaces</h1>
        
        <section class="tags">
          
          <!-- <span class="badge badge-pill badge-primary">properties</span> -->
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-properties">properties</button>
          <div class="modal fade" id="modal-properties">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Pages with the <strong>properties</strong> tag</h5>
      </div>
      <div class="modal-body">
        <ul>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/1.18/admin/PropertiesNamespaces/">Managing properties and namespaces</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </div>
</div>

          
          <!-- <span class="badge badge-pill badge-primary">namespaces</span> -->
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-namespaces">namespaces</button>
          <div class="modal fade" id="modal-namespaces">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Pages with the <strong>namespaces</strong> tag</h5>
      </div>
      <div class="modal-body">
        <ul>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/1.18/admin/PropertiesNamespaces/">Managing properties and namespaces</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </div>
</div>

          
          <!-- <span class="badge badge-pill badge-primary">admin</span> -->
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-admin">admin</button>
          <div class="modal fade" id="modal-admin">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Pages with the <strong>admin</strong> tag</h5>
      </div>
      <div class="modal-body">
        <ul>
          
          
          <li><a href="/docs/1.18/admin/AdminInterface/">The Pulsar admin interface</a></li>
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/1.18/admin/Authz/">Authentication and authorization in Pulsar</a></li>
          
          
          
          
          
          
          
          <li><a href="/docs/1.18/reference/CliTools/">Pulsar command-line tools</a></li>
          
          
          
          
          
          
          
          <li><a href="/docs/1.18/admin/ClustersBrokers/">Pulsar cluster and broker administration</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/1.18/deployment/InstanceSetup/">Deploying a Pulsar instance</a></li>
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/1.18/concerns/PartitionedTopics/">Partitioned topics</a></li>
          
          
          
          <li><a href="/docs/1.18/admin/PropertiesNamespaces/">Managing properties and namespaces</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li><a href="/docs/1.18/concerns/RetentionExpiry/">Message retention and expiry</a></li>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </div>
</div>

          
        </section>

        <hr class="hr">
      </section>

      <section class="content">
        <p>Within a Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>, <a href="#properties">properties</a> are the highest administrative unit. Each property can consist of any number of <a href="#namespaces">namespaces</a>.</p>

<h2 id="admin-setup">Admin setup</h2>

<p>If you have <a href="../../admin/Authz#authentication-providers">authentication</a> enabled in your Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>, then you will need to perform a few authentication-related setup steps to use the Pulsar <a href="../../admin/AdminInterface">admin interface</a>. Those steps will vary depending on if you’re using the <a href="#the-pulsar-admin-command-line-tool"><code class="highlighter-rouge">pulsar-admin</code> command-line interface</a>, the <a href="#rest-api">REST API</a>, or the <a href="#java-admin-client">Java admin client</a>.</p>

<p>Before you get started using Pulsar’s admin interface, you will need to complete a few setup steps that vary depending on whether you’re using the <a href="#pulsar-admin-cli-tool"><code class="highlighter-rouge">pulsar-admin</code> CLI tool</a>, <a href="#java-api">Java API</a>, or <a href="#rest-api">REST API</a> directly.</p>

<h3 id="the-pulsar-admin-command-line-tool">The <code class="highlighter-rouge">pulsar-admin</code> command-line tool</h3>

<p>If a Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">broker</span> has <a href="../../admin/Authz#authentication-providers">authentication</a> enabled, you will need to provide an auth configuration to use the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> tool. By default, the configuration for the <code class="highlighter-rouge">pulsar-admin</code> tool is found in the <a href="../../reference/Configuration#client"><code class="highlighter-rouge">conf/client.conf</code></a> file. Here are the available parameters:</p>

<table class="config">
  <thead>
    <tr>
      <th>Name</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    
    <tr id="client-webServiceUrl">
      <td>webServiceUrl</td>
      <td>http://localhost:8080/</td>
      <td>
</td>
    </tr>
    
    <tr id="client-brokerServiceUrl">
      <td>brokerServiceUrl</td>
      <td>pulsar://localhost:6650/</td>
      <td>
</td>
    </tr>
    
    <tr id="client-authPlugin">
      <td>authPlugin</td>
      <td></td>
      <td>
</td>
    </tr>
    
    <tr id="client-authParams">
      <td>authParams</td>
      <td></td>
      <td>
</td>
    </tr>
    
    <tr id="client-useTls">
      <td>useTls</td>
      <td></td>
      <td>
</td>
    </tr>
    
    <tr id="client-tlsAllowInsecureConnection">
      <td>tlsAllowInsecureConnection</td>
      <td></td>
      <td>
</td>
    </tr>
    
    <tr id="client-tlsTrustCertsFilePath">
      <td>tlsTrustCertsFilePath</td>
      <td></td>
      <td>
</td>
    </tr>
    
  </tbody>
</table>

<h3 id="rest-api">REST API</h3>

<p>You can find documentation for the REST API exposed by Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">brokers</span> in <a href="../../reference/RestApi">this reference document</a>.</p>

<h3 id="java-admin-client">Java admin client</h3>

<p>To use the Java admin API, instantiate a <a target="_blank" href="/api/admin/com/yahoo/pulsar/client/admin/PulsarAdmin.html"><code class="highlighter-rouge">PulsarAdmin</code></a> object, specifying a URL for a Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">broker</span> and a <a target="_blank" href="/api/admin/com/yahoo/pulsar/client/admin/ClientConfiguration.html"><code class="highlighter-rouge">ClientConfiguration</code></a>. Here’s a minimal example using <code class="highlighter-rouge">localhost</code>:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://localhost:8080"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">authPluginClassName</span> <span class="o">=</span> <span class="s">"com.org.MyAuthPluginClass"</span><span class="o">;</span> <span class="c1">//Pass auth-plugin class fully-qualified name if Pulsar-security enabled</span>
<span class="n">String</span> <span class="n">authParams</span> <span class="o">=</span> <span class="s">"param1=value1"</span><span class="o">;</span><span class="c1">//Pass auth-param if auth-plugin class requires it</span>
<span class="kt">boolean</span> <span class="n">useTls</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="kt">boolean</span> <span class="n">tlsAllowInsecureConnection</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">String</span> <span class="n">tlsTrustCertsFilePath</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">ClientConfiguration</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClientConfiguration</span><span class="o">();</span>
<span class="n">config</span><span class="o">.</span><span class="na">setAuthentication</span><span class="o">(</span><span class="n">authPluginClassName</span><span class="o">,</span> <span class="n">authParams</span><span class="o">);</span>
<span class="n">config</span><span class="o">.</span><span class="na">setUseTls</span><span class="o">(</span><span class="n">useTls</span><span class="o">);</span>
<span class="n">config</span><span class="o">.</span><span class="na">setTlsAllowInsecureConnection</span><span class="o">(</span><span class="n">tlsAllowInsecureConnection</span><span class="o">);</span>
<span class="n">config</span><span class="o">.</span><span class="na">setTlsTrustCertsFilePath</span><span class="o">(</span><span class="n">tlsTrustCertsFilePath</span><span class="o">);</span>

<span class="n">PulsarAdmin</span> <span class="n">admin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PulsarAdmin</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">config</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="managing-properties">Managing properties</h2>

<p>Properties, like namespaces, can be managed using the <a href="../../admin/AdminInterface">admin API</a>. There are currently two configurable aspects of properties:</p>

<ul>
  <li>Admin roles</li>
  <li>Allowed clusters</li>
</ul>

<h3 id="list">List</h3>

<h4 id="pulsar-admin">pulsar-admin</h4>

<p>You can list all of the properties associated with an <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span> using the <a href="../../reference/CliTools#pulsar-admin-properties-list"><code class="highlighter-rouge">list</code></a> subcommand:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin properties list
</code></pre>
</div>

<p>That will return a simple list, like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>my-property-1
my-property-2
</code></pre>
</div>

<h3 id="create">Create</h3>

<h4 id="pulsar-admin-1">pulsar-admin</h4>

<p>You can create a new property using the <a href="../../reference/CliTools#pulsar-admin-properties-create"><code class="highlighter-rouge">create</code></a> subcommand:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin properties create my-property
</code></pre>
</div>

<p>When creating a property, you can assign admin roles using the <code class="highlighter-rouge">-r</code>/<code class="highlighter-rouge">--admin-roles</code> flag. You can specify multiple roles as a comma-separated list. Here are some examples:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin properties create my-property <span class="se">\</span>
  --admin-roles role1,role2,role3

<span class="gp">$ </span>pulsar-admin properties create my-property <span class="se">\</span>
  -r role1
</code></pre>
</div>

<h3 id="get-configuration">Get configuration</h3>

<h4 id="pulsar-admin-2">pulsar-admin</h4>

<p>You can see a property’s configuration as a JSON object using the <a href="../../reference/CliTools#pulsar-admin-properties-get"><code class="highlighter-rouge">get</code></a> subcommand and specifying the name of the property:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin properties get my-property
<span class="o">{</span>
  <span class="s2">"adminRoles"</span>: <span class="o">[</span>
    <span class="s2">"admin1"</span>,
    <span class="s2">"admin2"</span>
  <span class="o">]</span>,
  <span class="s2">"allowedClusters"</span>: <span class="o">[</span>
    <span class="s2">"cl1"</span>,
    <span class="s2">"cl2"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>
</div>

<h3 id="delete">Delete</h3>

<h4 id="pulsar-adnin">pulsar-adnin</h4>

<p>You can delete a property using the <a href="../../reference/CliTools#pulsar-admin-properties-delete"><code class="highlighter-rouge">delete</code></a> subcommand and specifying the property name:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin properties delete my-property
</code></pre>
</div>

<h3 id="updating">Updating</h3>

<h4 id="pulsar-admin-3">pulsar-admin</h4>

<p>You can update a property’s configuration using the <a href="../../reference/CliTools#pulsar-admin-properties-update"><code class="highlighter-rouge">update</code></a> subcommand</p>

<h2 id="managing-namespaces">Managing namespaces</h2>

<p>Pulsar <span class="popover-term" tabindex="0" title="What is a namespace?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">namespaces</span> are logical groupings of <span class="popover-term" tabindex="0" title="What is a topic?" data-placement="top" data-content="A named channel used to pass messages published by producers to consumers who process those messages." data-toggle="popover" data-trigger="focus">topics</span>.</p>

<p>Namespaces can be managed via:</p>

<ul>
  <li>The <a href="../../reference/CliTools#pulsar-admin-clusters"><code class="highlighter-rouge">namespaces</code></a> command of the <a href="../../reference/CliTools#pulsar-admin"><code class="highlighter-rouge">pulsar-admin</code></a> tool</li>
  <li>The <code class="highlighter-rouge">/admin/namespaces</code> endpoint of the admin <a href="../../reference/RestApi">REST API</a></li>
  <li>The <code class="highlighter-rouge">namespaces</code> method of the <a target="_blank" href="/api/admin/com/yahoo/pulsar/client/admin/PulsarAdmin.html"><code class="highlighter-rouge">PulsarAdmin</code></a> object in the <a href="../../applications/JavaClient">Java API</a></li>
</ul>

<h3 id="create-1">Create</h3>

<p>You can create new namespaces under a given <span class="popover-term" tabindex="0" title="What is a property?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">property</span> and within a Pulsar <span class="popover-term" tabindex="0" title="What is a cluster?" data-placement="top" data-content="A set of Pulsar brokers and BookKeeper servers (aka bookies). Clusters can reside in different geographical regions and replicate messages to one another in a process called geo-replication." data-toggle="popover" data-trigger="focus">cluster</span>.</p>

<h4 id="pulsar-admin-4">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-create"><code class="highlighter-rouge">create</code></a> subcommand and specify the namespace by name:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces create <span class="nb">test</span>-property/cl1/ns1
</code></pre>
</div>

<h4 id="rest-api-1">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method put">PUT</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace">More info</a></p>

<h4 id="java">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">createNamespace</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="get-policies">Get policies</h3>

<p>You can fetch the current policies associated with a namespace at any time.</p>

<h4 id="pulsar-admin-5">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-policies"><code class="highlighter-rouge">policies</code></a> subcommand and specify the namespace:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces policies <span class="nb">test</span>-property/cl1/ns1
<span class="o">{</span>
  <span class="s2">"auth_policies"</span>: <span class="o">{</span>
    <span class="s2">"namespace_auth"</span>: <span class="o">{}</span>,
    <span class="s2">"destination_auth"</span>: <span class="o">{}</span>
  <span class="o">}</span>,
  <span class="s2">"replication_clusters"</span>: <span class="o">[]</span>,
  <span class="s2">"bundles_activated"</span>: <span class="nb">true</span>,
  <span class="s2">"bundles"</span>: <span class="o">{</span>
    <span class="s2">"boundaries"</span>: <span class="o">[</span>
      <span class="s2">"0x00000000"</span>,
      <span class="s2">"0xffffffff"</span>
    <span class="o">]</span>,
    <span class="s2">"numBundles"</span>: 1
  <span class="o">}</span>,
  <span class="s2">"backlog_quota_map"</span>: <span class="o">{}</span>,
  <span class="s2">"persistence"</span>: null,
  <span class="s2">"latency_stats_sample_rate"</span>: <span class="o">{}</span>,
  <span class="s2">"message_ttl_in_seconds"</span>: 0,
  <span class="s2">"retention_policies"</span>: null,
  <span class="s2">"deleted"</span>: <span class="nb">false</span>
<span class="o">}</span>
</code></pre>
</div>

<h4 id="rest-api-2">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace">More info</a></p>

<h4 id="java-1">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getPolicies</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="list-namespaces-within-a-property">List namespaces within a property</h3>

<p>You can list all namespaces within a given Pulsar <span class="popover-term" tabindex="0" title="What is a property?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">property</span>.</p>

<h4 id="pulsar-admin-6">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-list"><code class="highlighter-rouge">list</code></a> subcommand and specify the property:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces list <span class="nb">test</span>-property
<span class="nb">test</span>-property/cl1/ns1
<span class="nb">test</span>-property/cl2/ns2
</code></pre>
</div>

<h4 id="rest-api-3">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property">More info</a></p>

<h4 id="java-2">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getNamespaces</span><span class="o">(</span><span class="n">property</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="list-namespaces-within-a-cluster">List namespaces within a cluster</h3>

<p>You can list all namespaces within a given Pulsar <span class="popover-term" tabindex="0" title="What is a cluster?" data-placement="top" data-content="A set of Pulsar brokers and BookKeeper servers (aka bookies). Clusters can reside in different geographical regions and replicate messages to one another in a process called geo-replication." data-toggle="popover" data-trigger="focus">cluster</span>.</p>

<h4 id="pulsar-admin-7">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-list-cluster"><code class="highlighter-rouge">list-cluster</code></a> subcommand and specify the cluster:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces list-cluster <span class="nb">test</span>-property/cl1
<span class="nb">test</span>-property/cl1/ns1
<span class="nb">test</span>-property/cl1/ns1
</code></pre>
</div>

<h4 id="rest-api-4">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster">More info</a></p>

<h4 id="java-3">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getNamespaces</span><span class="o">(</span><span class="n">property</span><span class="o">,</span> <span class="n">cluster</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="delete-1">Delete</h3>

<p>You can delete existing namespaces from a property/cluster.</p>

<h4 id="pulsar-admin-8">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-delete"><code class="highlighter-rouge">delete</code></a> subcommand and specify the namespace:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces delete <span class="nb">test</span>-property/cl1/ns1
</code></pre>
</div>

<h4 id="rest">REST</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method delete">DELETE</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace">More info</a></p>

<h4 id="java-4">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">deleteNamespace</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="managing-permissions">Managing permissions</h2>

<p>Permissions in Pulsar are managed at the <span class="popover-term" tabindex="0" title="What is a namespace?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">namespace</span> level (that is, within <span class="popover-term" tabindex="0" title="What is a property?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">properties</span> and <span class="popover-term" tabindex="0" title="What is a cluster?" data-placement="top" data-content="A set of Pulsar brokers and BookKeeper servers (aka bookies). Clusters can reside in different geographical regions and replicate messages to one another in a process called geo-replication." data-toggle="popover" data-trigger="focus">clusters</span>).</p>

<h3 id="grant-permissions">Grant permissions</h3>

<p>You can grant permissions to specific roles for lists of operations such as <code class="highlighter-rouge">produce</code> and <code class="highlighter-rouge">consume</code>.</p>

<h4 id="pulsar-admin-9">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-grant-permission"><code class="highlighter-rouge">grant-permission</code></a> subcommand and specify a namespace, actions using the <code class="highlighter-rouge">--actions</code> flag, and a role using the <code class="highlighter-rouge">--role</code> flag:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces grant-permission <span class="nb">test</span>-property/cl1/ns1 <span class="se">\</span>
  --actions produce,consume <span class="se">\</span>
  --role admin10
</code></pre>
</div>

<h4 id="rest-api-5">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method post">POST</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/permissions/<span class="endpoint">:role</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace/permissions/:role">More info</a></p>

<h4 id="java-5">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">grantPermissionOnNamespace</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">role</span><span class="o">,</span> <span class="n">getAuthActions</span><span class="o">(</span><span class="n">actions</span><span class="o">));</span>
</code></pre>
</div>

<h3 id="get-permission">Get permission</h3>

<p>You can see which permissions have been granted to which roles in a namespace.</p>

<h4 id="pulsar-admin-10">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-permissions"><code class="highlighter-rouge">permissions</code></a> subcommand and specify a namespace:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces permissions <span class="nb">test</span>-property/cl1/ns1
<span class="o">{</span>
  <span class="s2">"admin10"</span>: <span class="o">[</span>
    <span class="s2">"produce"</span>,
    <span class="s2">"consume"</span>
  <span class="o">]</span>
<span class="o">}</span>   
</code></pre>
</div>

<h4 id="rest-api-6">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method get">GET</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/permissions</code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace/permissions">More info</a></p>

<h4 id="java-6">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getPermissions</span><span class="o">(</span><span class="n">namespace</span><span class="o">);</span>
</code></pre>
</div>

<h3 id="revoke-permissions">Revoke permissions</h3>

<p>You can revoke permissions from specific roles, which means that those roles will no longer have access to the specified namespace.</p>

<h4 id="pulsar-admin-11">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-revoke-permission"><code class="highlighter-rouge">revoke-permission</code></a> subcommand and specify a namespace and a role using the <code class="highlighter-rouge">--role</code> flag:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces revoke-permission <span class="nb">test</span>-property/cl1/ns1 <span class="se">\</span>
  --role admin10
</code></pre>
</div>

<h4 id="rest-api-7">REST API</h4>

<div class="highlighter-rouge endpoint"><pre class="highlight"><code class="method delete">DELETE</code><code class="url">/admin/namespaces/<span class="endpoint">:property</span>/<span class="endpoint">:cluster</span>/<span class="endpoint">:namespace</span>/permissions/<span class="endpoint">:role</span></code></pre></div>

<p><a href="../../reference/RestApi#/admin/namespaces/:property/:cluster/:namespace/permissions/:role">More info</a></p>

<h4 id="java-7">Java</h4>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">revokePermissionsOnNamespace</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">role</span><span class="o">);</span>
</code></pre>
</div>

<h4 id="set-replication-cluster">set replication cluster</h4>

<p>It sets replication clusters for a namespace, so Pulsar can internally replicate publish message from one colo to another colo. However, in order to set replication clusters, your namespace has to be global such as: <em>test-property/<strong>global</strong>/ns1.</em> It means cluster-name has to be <em>“global”</em></p>

<h6 id="cli">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces set-clusters test-property/cl1/ns1 \
  --clusters cl2
</code></pre>
</div>

<h6 id="rest-1">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;div class="highlighter-rouge endpoint"&gt;&lt;pre class="highlight"&gt;&lt;code class="method post"&gt;POST&lt;/code&gt;&lt;code class="url"&gt;/admin/namespaces/&lt;span class="endpoint"&gt;:property&lt;/span&gt;/&lt;span class="endpoint"&gt;:cluster&lt;/span&gt;/&lt;span class="endpoint"&gt;:namespace&lt;/span&gt;/replication&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
</code></pre>
</div>

<h6 id="java-8">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setNamespaceReplicationClusters</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">clusters</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="get-replication-cluster">get replication cluster</h4>

<p>It gives a list of replication clusters for a given namespace.</p>

<h6 id="cli-1">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-clusters test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>cl2
</code></pre>
</div>

<h6 id="rest-2">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/replication
</code></pre>
</div>

<h6 id="java-9">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getNamespaceReplicationClusters</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="set-backlog-quota-policies">set backlog quota policies</h4>

<p>Backlog quota helps broker to restrict bandwidth/storage of a namespace once it reach certain threshold limit . Admin can set this limit and one of the following action after the limit is reached.</p>

<ol>
  <li>
    <p>producer_request_hold: broker will hold and not persist produce request payload</p>
  </li>
  <li>
    <p>producer_exception: broker will disconnects with client by giving exception</p>
  </li>
  <li>
    <p>consumer_backlog_eviction: broker will start discarding backlog messages</p>
  </li>
</ol>

<p>Backlog quota restriction can be taken care by defining restriction of backlog-quota-type: destination_storage</p>

<h6 id="cli-2">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces set-backlog-quota --limit 10 --policy producer_request_hold test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-3">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/backlogQuota
</code></pre>
</div>

<h6 id="java-10">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setBacklogQuota</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="k">new</span> <span class="n">BacklogQuota</span><span class="o">(</span><span class="n">limit</span><span class="o">,</span> <span class="n">policy</span><span class="o">))</span>
</code></pre>
</div>

<h4 id="get-backlog-quota-policies">get backlog quota policies</h4>

<p>It shows a configured backlog quota for a given namespace.</p>

<h6 id="cli-3">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-backlog-quotas test-property/cl1/ns1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"destination_storage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nt">"policy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"producer_request_hold"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">          
</span></code></pre>
</div>

<h6 id="rest-4">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/backlogQuotaMap
</code></pre>
</div>

<h6 id="java-11">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getBacklogQuotaMap</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="remove-backlog-quota-policies">remove backlog quota policies</h4>

<p>It removes backlog quota policies for a given namespace</p>

<h6 id="cli-4">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces remove-backlog-quota test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-5">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>DELETE /admin/namespaces/{property}/{cluster}/{namespace}/backlogQuota
</code></pre>
</div>

<h6 id="java-12">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">removeBacklogQuota</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">backlogQuotaType</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="set-persistence-policies">set persistence policies</h4>

<p>Persistence policies allow to configure persistency-level for all topic messages under a given namespace.</p>

<ul>
  <li>
    <p>Bookkeeper-ack-quorum: Number of acks (guaranteed copies) to wait for each entry, default: 0</p>
  </li>
  <li>
    <p>Bookkeeper-ensemble: Number of bookies to use for a topic, default: 0</p>
  </li>
  <li>
    <p>Bookkeeper-write-quorum: How many writes to make of each entry, default: 0</p>
  </li>
  <li>
    <p>Ml-mark-delete-max-rate: Throttling rate of mark-delete operation (0 means no throttle), default: 0.0</p>
  </li>
</ul>

<h6 id="cli-5">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces set-persistence --bookkeeper-ack-quorum 2 --bookkeeper-ensemble 3 --bookkeeper-write-quorum 2 --ml-mark-delete-max-rate 0 test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-6">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/persistent/{property}/{cluster}/{namespace}/persistence
</code></pre>
</div>

<h6 id="java-13">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setPersistence</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span><span class="k">new</span> <span class="n">PersistencePolicies</span><span class="o">(</span><span class="n">bookkeeperEnsemble</span><span class="o">,</span> <span class="n">bookkeeperWriteQuorum</span><span class="o">,</span><span class="n">bookkeeperAckQuorum</span><span class="o">,</span><span class="n">managedLedgerMaxMarkDeleteRate</span><span class="o">))</span>
</code></pre>
</div>

<h4 id="get-persistence-policies">get persistence policies</h4>

<p>It shows configured persistence policies of a given namespace.</p>

<h6 id="cli-6">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-persistence test-property/cl1/ns1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"bookkeeperEnsemble"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bookkeeperWriteQuorum"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bookkeeperAckQuorum"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"managedLedgerMaxMarkDeleteRate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="rest-7">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/persistence
</code></pre>
</div>

<h6 id="java-14">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getPersistence</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="unload-namespace-bundle">unload namespace bundle</h4>

<p>Namespace bundle is a virtual group of topics which belong to same namespace. If broker gets overloaded with number of bundles then this command can help to unload heavy bundle from that broker, so it can be served by some other less loaded broker. Namespace bundle is defined with it’s start and end range such as 0x00000000 and 0xffffffff.</p>

<h6 id="cli-7">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces unload --bundle 0x00000000_0xffffffff test-property/pstg-gq1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-8">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>PUT /admin/namespaces/{property}/{cluster}/{namespace}/unload
</code></pre>
</div>

<h6 id="java-15">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">unloadNamespaceBundle</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="set-message-ttl">set message-ttl</h4>

<p>It configures message’s time to live (in seconds) duration.</p>

<h6 id="cli-8">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces set-message-ttl --messageTTL 100 test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-9">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/messageTTL
</code></pre>
</div>

<h6 id="java-16">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setNamespaceMessageTTL</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">messageTTL</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="get-message-ttl">get message-ttl</h4>

<p>It gives a message ttl of configured namespace.</p>

<h6 id="cli-9">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-message-ttl test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>100
</code></pre>
</div>

<h6 id="rest-10">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/messageTTL
</code></pre>
</div>

<h6 id="java-17">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getNamespaceReplicationClusters</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="split-bundle">split bundle</h4>

<p>Each namespace bundle can contain multiple topics and each bundle can be served by only one broker. If bundle gets heavy with multiple live topics in it then it creates load on that broker and in order to resolve this issue, admin can split bundle using this command.</p>

<h6 id="cli-10">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces split-bundle --bundle 0x00000000_0xffffffff test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-11">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>PUT /admin/namespaces/{property}/{cluster}/{namespace}/{bundle}/split
</code></pre>
</div>

<h6 id="java-18">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">splitNamespaceBundle</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="clear-backlog">clear backlog</h4>

<p>It clears all message backlog for all the topics those belong to specific namespace. You can also clear backlog for a specific subscription as well.</p>

<h6 id="cli-11">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces clear-backlog --sub my-subscription test-property/pstg-gq1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-12">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/clearBacklog
</code></pre>
</div>

<h6 id="java-19">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">clearNamespaceBacklogForSubscription</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">subscription</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="clear-bundle-backlog">clear bundle backlog</h4>

<p>It clears all message backlog for all the topics those belong to specific NamespaceBundle. You can also clear backlog for a specific subscription as well.</p>

<h6 id="cli-12">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces clear-backlog  --bundle 0x00000000_0xffffffff  --sub my-subscription test-property/pstg-gq1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-13">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/{bundle}/clearBacklog
</code></pre>
</div>

<h6 id="java-20">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">clearNamespaceBundleBacklogForSubscription</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="n">bundle</span><span class="o">,</span> <span class="n">subscription</span><span class="o">)</span>
</code></pre>
</div>

<h4 id="set-retention">set retention</h4>

<p>Each namespace contains multiple topics and each topic’s retention size (storage size) should not exceed to a specific threshold or it should be stored till certain time duration. This command helps to configure retention size and time of topics in a given namespace.</p>

<h6 id="cli-13">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin set-retention --size 10 --time 100 test-property/cl1/ns1
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>N/A
</code></pre>
</div>

<h6 id="rest-14">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>POST /admin/namespaces/{property}/{cluster}/{namespace}/retention
</code></pre>
</div>

<h6 id="java-21">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">setRetention</span><span class="o">(</span><span class="n">namespace</span><span class="o">,</span> <span class="k">new</span> <span class="n">RetentionPolicies</span><span class="o">(</span><span class="n">retentionTimeInMin</span><span class="o">,</span> <span class="n">retentionSizeInMB</span><span class="o">))</span>
</code></pre>
</div>

<h4 id="get-retention">get retention</h4>

<p>It shows retention information of a given namespace.</p>

<h6 id="cli-14">CLI</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>$ pulsar-admin namespaces get-retention test-property/cl1/ns1
</code></pre>
</div>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"retentionTimeInMinutes"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"retentionSizeInMB"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h6 id="rest-15">REST</h6>

<div class="highlighter-rouge"><pre class="highlight"><code>GET /admin/namespaces/{property}/{cluster}/{namespace}/retention
</code></pre>
</div>

<h6 id="java-22">Java</h6>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">admin</span><span class="o">.</span><span class="na">namespaces</span><span class="o">().</span><span class="na">getRetention</span><span class="o">(</span><span class="n">namespace</span><span class="o">)</span>
</code></pre>
</div>

<h3 id="namespace-isolation">Namespace isolation</h3>

<p>Coming soon.</p>

<h3 id="unloading-from-a-broker">Unloading from a broker</h3>

<p>You can unload a namespace, or a <span class="popover-term" tabindex="0" title="What is a namespace bundle?" data-placement="top" data-content="A virtual group of topics that belong to the same namespace. A namespace bundle is defined as a range between two 32-bit hashes, such as 0x00000000 and 0xffffffff." data-toggle="popover" data-trigger="focus">namespace bundle</span>, from the Pulsar <span class="popover-term" tabindex="0" title="What is a broker?" data-placement="top" data-content="A stateless component of Pulsar clusters that runs two other components: an HTTP server exposing a REST interface for administration and topic lookup and a dispatcher that handles all message transers. Pulsar clusters typically consist of multiple brokers." data-toggle="popover" data-trigger="focus">broker</span> that is currently responsible for it.</p>

<h4 id="pulsar-admin-12">pulsar-admin</h4>

<p>Use the <a href="../../reference/CliTools#pulsar-admin-namespaces-unload"><code class="highlighter-rouge">unload</code></a> subcommand of the <a href="../../reference/CliTools#pulsar-admin-namespaces"><code class="highlighter-rouge">namespaces</code></a> command.</p>

<h5 id="example">Example</h5>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>pulsar-admin namespaces unload my-prop/my-cluster/my-ns
</code></pre>
</div>

<h4 id="rest-api-8">REST API</h4>

<h4 id="java-23">Java</h4>

<h2 id="concepts">Concepts</h2>

<p>Pulsar was designed from the ground up to be a <span class="popover-term" tabindex="0" title="What is multi-tenancy?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">multi-tenant</span> system. In Pulsar, <span class="popover-term" tabindex="0" title="What is a tenant?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">tenants</span> are identified by <a href="#properties">properties</a>. Properties are the highest administrative unit within a Pulsar <span class="popover-term" tabindex="0" title="What is a Pulsar instance?" data-placement="top" data-content="A group of Pulsar clusters that act together as a single unit." data-toggle="popover" data-trigger="focus">instance</span>. Within properties</p>

<h3 id="properties">Properties</h3>

<p>To each property in a Pulsar instance you can assign:</p>

<ul>
  <li>An <a href="../../admin/Authz#authorization">authorization</a> scheme</li>
  <li>The set of <span class="popover-term" tabindex="0" title="What is a cluster?" data-placement="top" data-content="A set of Pulsar brokers and BookKeeper servers (aka bookies). Clusters can reside in different geographical regions and replicate messages to one another in a process called geo-replication." data-toggle="popover" data-trigger="focus">clusters</span> to which the property applies</li>
</ul>

<h3 id="namespaces">Namespaces</h3>

<p><span class="popover-term" tabindex="0" title="What is a property?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">Properties</span> and <span class="popover-term" tabindex="0" title="What is a namespace?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">namespaces</span> are two key concepts of Pulsar to support <span class="popover-term" tabindex="0" title="What is multi-tenancy?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">multi-tenancy</span>.</p>

<ul>
  <li>A <strong>property</strong> identifies a <span class="popover-term" tabindex="0" title="What is a tenant?" data-placement="top" data-content="TODO" data-toggle="popover" data-trigger="focus">tenant</span>. Pulsar is provisioned for a specified property with appropriate capacity allocated to the property.</li>
  <li>A <strong>namespace</strong> is the administrative unit nomenclature within a property. The configuration policies set on a namespace apply to all the topics created in such namespace. A property may create multiple namespaces via self-administration using REST API and CLI tools. For instance, a property with different applications can create a separate namespace for each application.</li>
</ul>

<p>Names for topics in the same namespace will look like this:</p>

<section class="topic">
  persistent://<span class="property">my-property</span>/<span class="cluster">us-w</span>/<span class="namespace">my-app1</span>/<span class="t">my-topic-1</span>
</section>

<section class="topic">
  persistent://<span class="property">my-property</span>/<span class="cluster">us-w</span>/<span class="namespace">my-app1</span>/<span class="t">my-topic-2</span>
</section>

<section class="topic">
  persistent://<span class="property">my-property</span>/<span class="cluster">us-w</span>/<span class="namespace">my-app1</span>/<span class="t">my-topic-3</span>
</section>


      </section>
    </article>

    <nav class="toc-bar hidden-sm-down col-md-2 col-lg-2">
      
      <div id="toc">
        <h4>Managing properties and namespaces</h4>
      </div>
      
    </nav>
  </div>
</div>

      </main>
    </main>

    <footer class="footer">
  <div class="container">
    <p class="text-center">&copy; Apache Foundation 2017</p>
  </div>
</footer>


    
  </body>
</html>
