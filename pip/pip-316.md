
# PIP-316: Create a producerName field for DeadLetterPolicy


# Motivation

Add producerName for dead letter producer, easier to locate problems.


# Goals

## In Scope

Add a new field `producerName` in `org.apache.pulsar.client.api.DeadLetterPolicy` class.


## Out of Scope
None.

# High Level Design

If `producerName` is not empty, use `producerName` as the name of the dead letter producer.


# Detailed Design

## Design & Implementation Details

Specify `producerName` in the `org.apache.pulsar.client.impl.ConsumerImpl.initDeadLetterProducerIfNeeded` method:

```java
    ProducerBuilder<byte[]> producerBuilder = ((ProducerBuilderImpl<byte[]>)
            client.newProducer(Schema.AUTO_PRODUCE_BYTES(schema)))
            .initialSubscriptionName(this.deadLetterPolicy.getInitialSubscriptionName())
            .topic(this.deadLetterPolicy.getDeadLetterTopic())
            .blockIfQueueFull(false)
            .enableBatching(false)
            .enableChunking(true);
    if (StringUtils.isNotBlank(conf.getDeadLetterPolicy().getProducerName())) {
        producerBuilder.producerName(conf.getDeadLetterPolicy().getProducerName());
    }
    deadLetterProducer = producerBuilder.createAsync();
```






## Public-facing Changes

### Public API


### Binary protocol

### Configuration

### CLI

### Metrics


# Monitoring

# Security Considerations

# Backward & Forward Compatibility

## Revert


## Upgrade


# Alternatives

# General Notes

# Links

* Mailing List discussion thread:
* Mailing List voting thread:
