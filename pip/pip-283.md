# Motivation

Apache Pulsar supported the new consumer type - Table View by [PIP-104](https://github.com/apache/pulsar/issues/12356).
In some practice use cases, the user just wants to save some key and value as a table to reduce the local cache memory usage.

# Goals

Support filter by key and value, which performs a given filter on each new message to filter all our matching values.


## In Scope

- Reduce the local cache memory usage.
- Users can implement custom value retention policies based on filters.

## Out of Scope

None.


# Detailed Design

### Public API

```java
@InterfaceAudience.Public
@InterfaceStability.Evolving
public interface TableViewBuilder<T> {
    /**
     * Sets the filter, which performs a given filter on each new message
     * to filter all our matching values.
     *
     * @param filter The filter to be performed for each new message
     */
    TableViewBuilder<T> filter(BiPredicate<String, T> filter);
}
```
