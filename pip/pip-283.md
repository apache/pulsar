# Motivation

Apache Pulsar supported the new consumer type - Table View by [PIP-104](https://github.com/apache/pulsar/issues/12356).
In some practice use cases, the user just wants to save some keys as a table to reduce the local cache memory usage.

# Goals

Support key filter which performs a given filter on each new message will filter our all matching messages.

## In Scope

- Reduce the local cache memory usage.
- Users can implement custom message retention policies based on filters.

## Out of Scope

none.


# Detailed Design

### Public API

```java
@InterfaceAudience.Public
@InterfaceStability.Evolving
public interface TableViewBuilder<T> {
    /**
     * Sets the filter, which performs a given filter on each new message
     * will filter out all matching values.
     *
     * @param filter The filter to be performed for each new message
     */
    TableViewBuilder<T> filter(BiPredicate<String, T> filter);
}
```
