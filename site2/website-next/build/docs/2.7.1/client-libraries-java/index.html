<!doctype html>
<html class="docs-version-2.7.1" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Pulsar Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Pulsar Blog Atom Feed"><title data-react-helmet="true">Pulsar Java client | Apache Pulsar</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pulsar.apache.com/docs/2.7.1/client-libraries-java"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2.7.1"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2.7.1"><meta data-react-helmet="true" property="og:title" content="Pulsar Java client | Apache Pulsar"><meta data-react-helmet="true" name="description" content="You can use Pulsar Java client to create Java producer, consumer, and readers of messages and to perform administrative tasks. The current version of the Java client is 2.7.1."><meta data-react-helmet="true" property="og:description" content="You can use Pulsar Java client to create Java producer, consumer, and readers of messages and to perform administrative tasks. The current version of the Java client is 2.7.1."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pulsar.apache.com/docs/2.7.1/client-libraries-java"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/2.7.1/client-libraries-java" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/2.7.1/client-libraries-java" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4a6b6be2.css">
<link rel="preload" href="/assets/js/runtime~main.668ae9d7.js" as="script">
<link rel="preload" href="/assets/js/main.3d3de418.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/2.7.1/">Docs</a><a class="navbar__item navbar__link" href="/versions">Versions</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs">Version</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/">2.8.0</a></li><li><a class="dropdown__link" href="/docs/2.7.3/">2.7.3</a></li><li><a class="dropdown__link" href="/docs/2.7.2/">2.7.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2.7.1/">2.7.1</a></li><li><a class="dropdown__link" href="/docs/2.7.0/">2.7.0</a></li><li><a class="dropdown__link" href="/docs/2.6.4/">2.6.4</a></li><li><a class="dropdown__link" href="/docs/2.6.3/">2.6.3</a></li><li><a class="dropdown__link" href="/docs/2.6.2/">2.6.2</a></li><li><a class="dropdown__link" href="/docs/2.2.0/">2.2.0</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Get Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts and Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar Schema</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar Functions</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar IO</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar SQL</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tiered Storage</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Transactions</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes (Helm)</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Performance</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Client Libraries</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.1/client-libraries">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.7.1/client-libraries-java">Java</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.1/client-libraries-go">Go</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.1/client-libraries-python">Python</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.1/client-libraries-cpp">C++</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.1/client-libraries-node">Node.js</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.1/client-libraries-websocket">WebSocket</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.7.1/client-libraries-dotnet">C#</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Admin API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Adaptors</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cookbooks</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Apache Pulsar <b>2.7.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/client-libraries-java">latest version</a></b> (2.8.0).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 2.7.1</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Pulsar Java client</h1></header><p>You can use Pulsar Java client to create Java <a href="#producer">producer</a>, <a href="#consumer">consumer</a>, and <a href="#reader-interface">readers</a> of messages and to perform <a href="/docs/2.7.1/admin-api-overview">administrative tasks</a>. The current version of the Java client is <strong>2.7.1</strong>.</p><p>All the methods in <a href="#producer">producer</a>, <a href="#consumer">consumer</a>, and <a href="#reader">reader</a> of a Java client are thread-safe.</p><p>Javadoc for the Pulsar client is divided into two domains by package as follows.</p><table><thead><tr><th align="left">Package</th><th align="left">Description</th><th align="left">Maven Artifact</th></tr></thead><tbody><tr><td align="left"><a href="/api/client/2.7.0-SNAPSHOT"><code>org.apache.pulsar.client.api</code></a></td><td align="left">The producer and consumer API</td><td align="left"><a href="http://search.maven.org/#artifactdetails%7Corg.apache.pulsar%7Cpulsar-client%7C2.7.1%7Cjar" target="_blank" rel="noopener noreferrer">org.apache.pulsar:pulsar-client:2.7.1</a></td></tr><tr><td align="left"><a href="/api/admin/2.7.0-SNAPSHOT"><code>org.apache.pulsar.client.admin</code></a></td><td align="left">The Java <a href="/docs/2.7.1/admin-api-overview">admin API</a></td><td align="left"><a href="http://search.maven.org/#artifactdetails%7Corg.apache.pulsar%7Cpulsar-client-admin%7C2.7.1%7Cjar" target="_blank" rel="noopener noreferrer">org.apache.pulsar:pulsar-client-admin:2.7.1</a></td></tr><tr><td align="left"><code>org.apache.pulsar.client.all</code></td><td align="left">Includes both <code>pulsar-client</code> and <code>pulsar-client-admin</code><br><br> Both <code>pulsar-client</code> and <code>pulsar-client-admin</code> are shaded packages and they shade dependencies independently. Consequently, the applications using both <code>pulsar-client</code> and <code>pulsar-client-admin</code> have redundant shaded classes. It would be troublesome if you introduce new dependencies but forget to update shading rules. <br><br> In this case, you can use <code>pulsar-client-all</code>, which shades dependencies only one time and reduces the size of dependencies.</td><td align="left"><a href="http://search.maven.org/#artifactdetails%7Corg.apache.pulsar%7Cpulsar-client-all%7C2.7.1%7Cjar" target="_blank" rel="noopener noreferrer">org.apache.pulsar:pulsar-client-all:2.7.1</a></td></tr></tbody></table><p>This document focuses only on the client API for producing and consuming messages on Pulsar topics. For how to use the Java admin client, see <a href="/docs/2.7.1/admin-api-overview">Pulsar admin interface</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="installation"></a>Installation<a class="hash-link" href="#installation" title="Direct link to heading">#</a></h2><p>The latest version of the Pulsar Java client library is available via <a href="http://search.maven.org/#artifactdetails%7Corg.apache.pulsar%7Cpulsar-client%7C2.7.1%7Cjar" target="_blank" rel="noopener noreferrer">Maven Central</a>. To use the latest version, add the <code>pulsar-client</code> library to your build configuration.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="maven"></a>Maven<a class="hash-link" href="#maven" title="Direct link to heading">#</a></h3><p>If you use Maven, add the following information to the <code>pom.xml</code> file.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><pre tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- in your &lt;properties&gt; block --&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">pulsar.version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">2.7.1</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">pulsar.version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- in your &lt;dependencies&gt; block --&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">org.apache.pulsar</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">pulsar-client</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">${pulsar.version}</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="gradle"></a>Gradle<a class="hash-link" href="#gradle" title="Direct link to heading">#</a></h3><p>If you use Gradle, add the following information to the <code>build.gradle</code> file.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def pulsarVersion = &#x27;2.7.1&#x27;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dependencies {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    compile group: &#x27;org.apache.pulsar&#x27;, name: &#x27;pulsar-client&#x27;, version: pulsarVersion</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="connection-urls"></a>Connection URLs<a class="hash-link" href="#connection-urls" title="Direct link to heading">#</a></h2><p>To connect to Pulsar using client libraries, you need to specify a <a href="/docs/2.7.1/developing-binary-protocol">Pulsar protocol</a> URL.</p><p>You can assign Pulsar protocol URLs to specific clusters and use the <code>pulsar</code> scheme. The default port is <code>6650</code>. The following is an example of <code>localhost</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly http"><pre tabindex="0" class="prism-code language-http codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsar://localhost:6650</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you have multiple brokers, the URL is as follows.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly http"><pre tabindex="0" class="prism-code language-http codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsar://localhost:6550,localhost:6651,localhost:6652</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>A URL for a production Pulsar cluster is as follows.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly http"><pre tabindex="0" class="prism-code language-http codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsar://pulsar.us-west.example.com:6650</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you use <a href="/docs/2.7.1/security-tls-authentication">TLS</a> authentication, the URL is as follows. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly http"><pre tabindex="0" class="prism-code language-http codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsar+ssl://pulsar.us-west.example.com:6651</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="client"></a>Client<a class="hash-link" href="#client" title="Direct link to heading">#</a></h2><p>You can instantiate a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/PulsarClient" target="_blank" rel="noopener noreferrer">PulsarClient</a> object using just a URL for the target Pulsar <a href="/docs/2.7.1/reference-terminology#cluster">cluster</a> like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PulsarClient client = PulsarClient.builder()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .serviceUrl(&quot;pulsar://localhost:6650&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .build();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you have multiple brokers, you can initiate a PulsarClient like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PulsarClient client = PulsarClient.builder()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .serviceUrl(&quot;pulsar://localhost:6650,localhost:6651,localhost:6652&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .build();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="default-broker-urls-for-standalone-clusters"></a>Default broker URLs for standalone clusters<a class="hash-link" href="#default-broker-urls-for-standalone-clusters" title="Direct link to heading">#</a></h3><p>If you run a cluster in <a href="/docs/2.7.1/getting-started-standalone">standalone mode</a>, the broker is available at the <code>pulsar://localhost:6650</code> URL by default.</p></blockquote><p>If you create a client, you can use the <code>loadConf</code> configuration. The following parameters are available in <code>loadConf</code>.</p><table><thead><tr><th>Type</th><th>Name</th><th><div>Description</div></th><th>Default</th></tr></thead><tbody><tr><td>String</td><td><code>serviceUrl</code></td><td>Service URL provider for Pulsar service</td><td>None</td></tr><tr><td>String</td><td><code>authPluginClassName</code></td><td>Name of the authentication plugin</td><td>None</td></tr><tr><td>String</td><td><code>authParams</code></td><td>String represents parameters for the authentication plugin <br><br><strong>Example</strong><br> key1:val1,key2:val2</td><td>None</td></tr><tr><td>long</td><td><code>operationTimeoutMs</code></td><td>Operation timeout</td><td>30000</td></tr><tr><td>long</td><td><code>statsIntervalSeconds</code></td><td>Interval between each stats info<br><br>Stats is activated with positive <code>statsInterval</code><br><br>Set <code>statsIntervalSeconds</code> to 1 second at least</td><td>60</td></tr><tr><td>int</td><td><code>numIoThreads</code></td><td>The number of threads used for handling connections to brokers</td><td>1</td></tr><tr><td>int</td><td><code>numListenerThreads</code></td><td>The number of threads used for handling message listeners</td><td>1</td></tr><tr><td>boolean</td><td><code>useTcpNoDelay</code></td><td>Whether to use TCP no-delay flag on the connection to disable Nagle algorithm</td><td>true</td></tr><tr><td>boolean</td><td><code>useTls</code></td><td>Whether to use TLS encryption on the connection</td><td>false</td></tr><tr><td>string</td><td><code>tlsTrustCertsFilePath</code></td><td>Path to the trusted TLS certificate file</td><td>None</td></tr><tr><td>boolean</td><td><code>tlsAllowInsecureConnection</code></td><td>Whether the Pulsar client accepts untrusted TLS certificate from broker</td><td>false</td></tr><tr><td>boolean</td><td><code>tlsHostnameVerificationEnable</code></td><td>Whether to enable TLS hostname verification</td><td>false</td></tr><tr><td>int</td><td><code>concurrentLookupRequest</code></td><td>The number of concurrent lookup requests allowed to send on each broker connection to prevent overload on broker</td><td>5000</td></tr><tr><td>int</td><td><code>maxLookupRequest</code></td><td>The maximum number of lookup requests allowed on each broker connection to prevent overload on broker</td><td>50000</td></tr><tr><td>int</td><td><code>maxNumberOfRejectedRequestPerConnection</code></td><td>The maximum number of rejected requests of a broker in a certain time frame (30 seconds) after the current connection is closed and the client creates a new connection to connect to a different broker</td><td>50</td></tr><tr><td>int</td><td><code>keepAliveIntervalSeconds</code></td><td>Seconds of keeping alive interval for each client broker connection</td><td>30</td></tr><tr><td>int</td><td><code>connectionTimeoutMs</code></td><td>Duration of waiting for a connection to a broker to be established <br><br>If the duration passes without a response from a broker, the connection attempt is dropped</td><td>10000</td></tr><tr><td>int</td><td><code>requestTimeoutMs</code></td><td>Maximum duration for completing a request</td><td>60000</td></tr><tr><td>int</td><td><code>defaultBackoffIntervalNanos</code></td><td>Default duration for a backoff interval</td><td>TimeUnit.MILLISECONDS.toNanos(100);</td></tr><tr><td>long</td><td><code>maxBackoffIntervalNanos</code></td><td>Maximum duration for a backoff interval</td><td>TimeUnit.SECONDS.toNanos(30)</td></tr></tbody></table><p>Check out the Javadoc for the <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/PulsarClient" target="_blank" rel="noopener noreferrer">PulsarClient</a> class for a full list of configurable parameters.</p><blockquote><p>In addition to client-level configuration, you can also apply <a href="#configuring-producers">producer</a> and <a href="#configuring-consumers">consumer</a> specific configuration as described in sections below.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="producer"></a>Producer<a class="hash-link" href="#producer" title="Direct link to heading">#</a></h2><p>In Pulsar, producers write messages to topics. Once you&#x27;ve instantiated a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/PulsarClient" target="_blank" rel="noopener noreferrer">PulsarClient</a> object (as in the section <a href="#client-configuration">above</a>), you can create a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/Producer" target="_blank" rel="noopener noreferrer">Producer</a> for a specific Pulsar <a href="/docs/2.7.1/reference-terminology#topic">topic</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;byte[]&gt; producer = client.newProducer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// You can then send messages to the broker and topic you specified:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.send(&quot;My message&quot;.getBytes());</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>By default, producers produce messages that consist of byte arrays. You can produce different types by specifying a message <a href="#schemas">schema</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;String&gt; stringProducer = client.newProducer(Schema.STRING)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">stringProducer.send(&quot;My message&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>Make sure that you close your producers, consumers, and clients when you do not need them.</p></blockquote><blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.close();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">consumer.close();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">client.close();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></blockquote><blockquote><p>Close operations can also be asynchronous:</p></blockquote><blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.closeAsync()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   .thenRun(() -&gt; System.out.println(&quot;Producer closed&quot;))</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   .exceptionally((ex) -&gt; {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       System.err.println(&quot;Failed to close producer: &quot; + ex);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       return null;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   });</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configure-producer"></a>Configure producer<a class="hash-link" href="#configure-producer" title="Direct link to heading">#</a></h3><p>If you instantiate a <code>Producer</code> object by specifying only a topic name as the example above, use the default configuration for producer. </p><p>If you create a producer, you can use the <code>loadConf</code> configuration. The following parameters are available in <code>loadConf</code>.</p><table><thead><tr><th>Type</th><th>Name</th><th><div>Description</div></th><th>Default</th></tr></thead><tbody><tr><td>String</td><td><code>topicName</code></td><td>Topic name</td><td>null</td></tr><tr><td>String</td><td><code>producerName</code></td><td>Producer name</td><td>null</td></tr><tr><td>long</td><td><code>sendTimeoutMs</code></td><td>Message send timeout in ms.<br><br>If a message is not acknowledged by a server before the <code>sendTimeout</code> expires, an error occurs.</td><td>30000</td></tr><tr><td>boolean</td><td><code>blockIfQueueFull</code></td><td>If it is set to <code>true</code>, when the outgoing message queue is full, the <code>Send</code> and <code>SendAsync</code> methods of producer block, rather than failing and throwing errors. <br><br>If it is set to <code>false</code>, when the outgoing message queue is full, the <code>Send</code> and <code>SendAsync</code> methods of producer fail and <code>ProducerQueueIsFullError</code> exceptions occur.<br><br>The <code>MaxPendingMessages</code> parameter determines the size of the outgoing message queue.</td><td>false</td></tr><tr><td>int</td><td><code>maxPendingMessages</code></td><td>The maximum size of a queue holding pending messages.<br><br>For example, a message waiting to receive an acknowledgment from a <a href="/docs/2.7.1/reference-terminology#broker">broker</a>. <br><br>By default, when the queue is full, all calls to the <code>Send</code> and <code>SendAsync</code> methods fail <strong>unless</strong> you set <code>BlockIfQueueFull</code> to <code>true</code>.</td><td>1000</td></tr><tr><td>int</td><td><code>maxPendingMessagesAcrossPartitions</code></td><td>The maximum number of pending messages across partitions. <br><br>Use the setting to lower the max pending messages for each partition ({@link #setMaxPendingMessages(int)}) if the total number exceeds the configured value.</td><td>50000</td></tr><tr><td>MessageRoutingMode</td><td><code>messageRoutingMode</code></td><td>Message routing logic for producers on <a href="/docs/2.7.1/concepts-architecture-overview#partitioned-topics">partitioned topics</a>.<br><br> Apply the logic only when setting no key on messages. <br><br>Available options are as follows: <br><br><li><code>pulsar.RoundRobinDistribution</code>: round robin<br><br> </li><li><code>pulsar.UseSinglePartition</code>: publish all messages to a single partition<br><br></li><li><code>pulsar.CustomPartition</code>: a custom partitioning scheme</li></td><td><code>pulsar.RoundRobinDistribution</code></td></tr><tr><td>HashingScheme</td><td><code>hashingScheme</code></td><td>Hashing function determining the partition where you publish a particular message (<strong>partitioned topics only</strong>).<br><br>Available options are as follows:<br><br><li> <code>pulsar.JavaStringHash</code>: the equivalent of <code>String.hashCode()</code> in Java<br><br></li><li> <code>pulsar.Murmur3_32Hash</code>: applies the <a href="https://en.wikipedia.org/wiki/MurmurHash" target="_blank" rel="noopener noreferrer">Murmur3</a> hashing function<br><br></li><li><code>pulsar.BoostHash</code>: applies the hashing function from C++&#x27;s <a href="https://www.boost.org/doc/libs/1_62_0/doc/html/hash.html" target="_blank" rel="noopener noreferrer">Boost</a> library </li></td><td><code>HashingScheme.JavaStringHash</code></td></tr><tr><td>ProducerCryptoFailureAction</td><td><code>cryptoFailureAction</code></td><td>Producer should take action when encryption fails.<br><br><li><strong>FAIL</strong>: if encryption fails, unencrypted messages fail to send.</li><br><li> <strong>SEND</strong>: if encryption fails, unencrypted messages are sent. </li></td><td><code>ProducerCryptoFailureAction.FAIL</code></td></tr><tr><td>long</td><td><code>batchingMaxPublishDelayMicros</code></td><td>Batching time period of sending messages.</td><td>TimeUnit.MILLISECONDS.toMicros(1)</td></tr><tr><td>int</td><td>batchingMaxMessages</td><td>The maximum number of messages permitted in a batch.</td><td>1000</td></tr><tr><td>boolean</td><td><code>batchingEnabled</code></td><td>Enable batching of messages.</td><td>true</td></tr><tr><td>CompressionType</td><td><code>compressionType</code></td><td>Message data compression type used by a producer. <br><br>Available options:<li><a href="https://github.com/lz4/lz4" target="_blank" rel="noopener noreferrer"><code>LZ4</code></a><br></li><li><a href="https://zlib.net/" target="_blank" rel="noopener noreferrer"><code>ZLIB</code></a><br></li><li><a href="https://facebook.github.io/zstd/" target="_blank" rel="noopener noreferrer"><code>ZSTD</code></a><br></li><li><a href="https://google.github.io/snappy/" target="_blank" rel="noopener noreferrer"><code>SNAPPY</code></a></li></td><td>No compression</td></tr></tbody></table><p>You can configure parameters if you do not want to use the default configuration.</p><p>For a full list, see the Javadoc for the <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/ProducerBuilder" target="_blank" rel="noopener noreferrer">ProducerBuilder</a> class. The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;byte[]&gt; producer = client.newProducer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .batchingMaxPublishDelay(10, TimeUnit.MILLISECONDS)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .sendTimeout(10, TimeUnit.SECONDS)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .blockIfQueueFull(true)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="message-routing"></a>Message routing<a class="hash-link" href="#message-routing" title="Direct link to heading">#</a></h3><p>When using partitioned topics, you can specify the routing mode whenever you publish messages using a producer. For more information on specifying a routing mode using the Java client, see the <a href="/docs/2.7.1/cookbooks-partitioned">Partitioned Topics</a> cookbook.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="async-send"></a>Async send<a class="hash-link" href="#async-send" title="Direct link to heading">#</a></h3><p>You can publish messages <a href="/docs/2.7.1/concepts-messaging#send-modes">asynchronously</a> using the Java client. With async send, the producer puts the message in a blocking queue and returns it immediately. Then the client library sends the message to the broker in the background. If the queue is full (max size configurable), the producer is blocked or fails immediately when calling the API, depending on arguments passed to the producer.</p><p>The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.sendAsync(&quot;my-async-message&quot;.getBytes()).thenAccept(msgId -&gt; {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    System.out.printf(&quot;Message with ID %s successfully sent&quot;, msgId);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">});</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As you can see from the example above, async send operations return a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/MessageId" target="_blank" rel="noopener noreferrer">MessageId</a> wrapped in a <a href="http://www.baeldung.com/java-completablefuture" target="_blank" rel="noopener noreferrer"><code>CompletableFuture</code></a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configure-messages"></a>Configure messages<a class="hash-link" href="#configure-messages" title="Direct link to heading">#</a></h3><p>In addition to a value, you can set additional items on a given message:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .key(&quot;my-message-key&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .value(&quot;my-async-message&quot;.getBytes())</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .property(&quot;my-key&quot;, &quot;my-value&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .property(&quot;my-other-key&quot;, &quot;my-other-value&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can terminate the builder chain with <code>sendAsync()</code> and get a future return.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="consumer"></a>Consumer<a class="hash-link" href="#consumer" title="Direct link to heading">#</a></h2><p>In Pulsar, consumers subscribe to topics and handle messages that producers publish to those topics. You can instantiate a new <a href="/docs/2.7.1/reference-terminology#consumer">consumer</a> by first instantiating a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/PulsarClient" target="_blank" rel="noopener noreferrer">PulsarClient</a> object and passing it a URL for a Pulsar broker (as <a href="#client-configuration">above</a>).</p><p>Once you&#x27;ve instantiated a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/PulsarClient" target="_blank" rel="noopener noreferrer">PulsarClient</a> object, you can create a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/Consumer" target="_blank" rel="noopener noreferrer">Consumer</a> by specifying a <a href="/docs/2.7.1/reference-terminology#topic">topic</a> and a <a href="/docs/2.7.1/concepts-messaging#subscription-modes">subscription</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>subscribe</code> method will auto subscribe the consumer to the specified topic and subscription. One way to make the consumer listen on the topic is to set up a <code>while</code> loop. In this example loop, the consumer listens for messages, prints the contents of any received message, and then <a href="/docs/2.7.1/reference-terminology#acknowledgment-ack">acknowledges</a> that the message has been processed. If the processing logic fails, you can use <a href="/docs/2.7.1/reference-terminology#acknowledgment-ack">negative acknowledgement</a> to redeliver the message later.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">while (true) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // Wait for a message</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Message msg = consumer.receive();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  try {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // Do something with the message</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      System.out.printf(&quot;Message received: %s&quot;, new String(msg.getData()));</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // Acknowledge the message so that it can be deleted by the message broker</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      consumer.acknowledge(msg);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  } catch (Exception e) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // Message failed to process, redeliver later</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      consumer.negativeAcknowledge(msg);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you don&#x27;t want to block your main thread and rather listen constantly for new messages, consider using a <code>MessageListener</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MessageListener myMessageListener = (consumer, msg) -&gt; {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  try {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      System.out.println(&quot;Message received: &quot; + new String(msg.getData()));</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      consumer.acknowledge(msg);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  } catch (Exception e) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      consumer.negativeAcknowledge(msg);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .messageListener(myMessageListener)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     .subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configure-consumer"></a>Configure consumer<a class="hash-link" href="#configure-consumer" title="Direct link to heading">#</a></h3><p>If you instantiate a <code>Consumer</code> object by specifying only a topic and subscription name as in the example above, the consumer uses the default configuration. </p><p>When you create a consumer, you can use the <code>loadConf</code> configuration. The following parameters are available in <code>loadConf</code>.</p><table><thead><tr><th>Type</th><th>Name</th><th><div>Description</div></th><th>Default</th></tr></thead><tbody><tr><td>Set&lt;String&gt;</td><td><code>topicNames</code></td><td>Topic name</td><td>Sets.newTreeSet()</td></tr><tr><td>Pattern</td><td><code>topicsPattern</code></td><td>Topic pattern</td><td>None</td></tr><tr><td>String</td><td><code>subscriptionName</code></td><td>Subscription name</td><td>None</td></tr><tr><td>SubscriptionType</td><td><code>subscriptionType</code></td><td>Subscription type <br><br>Four subscription types are available:<li>Exclusive</li><li>Failover</li><li>Shared</li><li>Key_Shared</li></td><td>SubscriptionType.Exclusive</td></tr><tr><td>int</td><td><code>receiverQueueSize</code></td><td>Size of a consumer&#x27;s receiver queue. <br><br>For example, the number of messages accumulated by a consumer before an application calls <code>Receive</code>. <br><br>A value higher than the default value increases consumer throughput, though at the expense of more memory utilization.</td><td>1000</td></tr><tr><td>long</td><td><code>acknowledgementsGroupTimeMicros</code></td><td>Group a consumer acknowledgment for a specified time.<br><br>By default, a consumer uses 100ms grouping time to send out acknowledgments to a broker.<br><br>Setting a group time of 0 sends out acknowledgments immediately. <br><br>A longer ack group time is more efficient at the expense of a slight increase in message re-deliveries after a failure.</td><td>TimeUnit.MILLISECONDS.toMicros(100)</td></tr><tr><td>long</td><td><code>negativeAckRedeliveryDelayMicros</code></td><td>Delay to wait before redelivering messages that failed to be processed.<br><br> When an application uses {@link Consumer#negativeAcknowledge(Message)}, failed messages are redelivered after a fixed timeout.</td><td>TimeUnit.MINUTES.toMicros(1)</td></tr><tr><td>int</td><td><code>maxTotalReceiverQueueSizeAcrossPartitions</code></td><td>The max total receiver queue size across partitions.<br><br>This setting reduces the receiver queue size for individual partitions if the total receiver queue size exceeds this value.</td><td>50000</td></tr><tr><td>String</td><td><code>consumerName</code></td><td>Consumer name</td><td>null</td></tr><tr><td>long</td><td><code>ackTimeoutMillis</code></td><td>Timeout of unacked messages</td><td>0</td></tr><tr><td>long</td><td><code>tickDurationMillis</code></td><td>Granularity of the ack-timeout redelivery.<br><br>Using an higher <code>tickDurationMillis</code> reduces the memory overhead to track messages when setting ack-timeout to a bigger value (for example, 1 hour).</td><td>1000</td></tr><tr><td>int</td><td><code>priorityLevel</code></td><td>Priority level for a consumer to which a broker gives more priority while dispatching messages in Shared subscription type. <br><br>The broker follows descending priorities. For example, 0=max-priority, 1, 2,...<br><br>In shared subscription type, the broker <strong>first dispatches messages to the max priority level consumers if they have permits</strong>. Otherwise, the broker considers next priority level consumers.<br><br> <strong>Example 1</strong><br><br>If a subscription has consumerA with <code>priorityLevel</code> 0 and consumerB with <code>priorityLevel</code> 1, then the broker <strong>only dispatches messages to consumerA until it runs out permits</strong> and then starts dispatching messages to consumerB.<br><br><strong>Example 2</strong><br><br>Consumer Priority, Level, Permits<br>C1, 0, 2<br>C2, 0, 1<br>C3, 0, 1<br>C4, 1, 2<br>C5, 1, 1<br><br>Order in which a broker dispatches messages to consumers is: C1, C2, C3, C1, C4, C5, C4.</td><td>0</td></tr><tr><td>ConsumerCryptoFailureAction</td><td><code>cryptoFailureAction</code></td><td>Consumer should take action when it receives a message that can not be decrypted.<br><br><li><strong>FAIL</strong>: this is the default option to fail messages until crypto succeeds.</li><br><li> <strong>DISCARD</strong>:silently acknowledge and not deliver message to an application.</li><br><li><strong>CONSUME</strong>: deliver encrypted messages to applications. It is the application&#x27;s responsibility to decrypt the message.<br><br>The decompression of message fails. <br><br>If messages contain batch messages, a client is not be able to retrieve individual messages in batch.<br><br>Delivered encrypted message contains {@link EncryptionContext} which contains encryption and compression information in it using which application can decrypt consumed message payload.</li></td><td><li>ConsumerCryptoFailureAction.FAIL</li></td></tr><tr><td>SortedMap&lt;String, String&gt;</td><td><code>properties</code></td><td>A name or value property of this consumer.<br><br><code>properties</code> is application defined metadata attached to a consumer. <br><br>When getting a topic stats, associate this metadata with the consumer stats for easier identification.</td><td>new TreeMap()</td></tr><tr><td>boolean</td><td><code>readCompacted</code></td><td>If enabling <code>readCompacted</code>, a consumer reads messages from a compacted topic rather than reading a full message backlog of a topic.<br><br> A consumer only sees the latest value for each key in the compacted topic, up until reaching the point in the topic message when compacting backlog. Beyond that point, send messages as normal.<br><br>Only enabling <code>readCompacted</code> on subscriptions to persistent topics, which have a single active consumer (like failure or exclusive subscriptions). <br><br>Attempting to enable it on subscriptions to non-persistent topics or on shared subscriptions leads to a subscription call throwing a <code>PulsarClientException</code>.</td><td>false</td></tr><tr><td>SubscriptionInitialPosition</td><td><code>subscriptionInitialPosition</code></td><td>Initial position at which to set cursor when subscribing to a topic at first time.</td><td>SubscriptionInitialPosition.Latest</td></tr><tr><td>int</td><td><code>patternAutoDiscoveryPeriod</code></td><td>Topic auto discovery period when using a pattern for topic&#x27;s consumer.<br><br>The default and minimum value is 1 minute.</td><td>1</td></tr><tr><td>RegexSubscriptionMode</td><td><code>regexSubscriptionMode</code></td><td>When subscribing to a topic using a regular expression, you can pick a certain type of topics.<br><br><li><strong>PersistentOnly</strong>: only subscribe to persistent topics.</li><br><li><strong>NonPersistentOnly</strong>: only subscribe to non-persistent topics.</li><br><li><strong>AllTopics</strong>: subscribe to both persistent and non-persistent topics.</li></td><td>RegexSubscriptionMode.PersistentOnly</td></tr><tr><td>DeadLetterPolicy</td><td><code>deadLetterPolicy</code></td><td>Dead letter policy for consumers.<br><br>By default, some messages are probably redelivered many times, even to the extent that it never stops.<br><br>By using the dead letter mechanism, messages have the max redelivery count. <strong>When exceeding the maximum number of redeliveries, messages are sent to the Dead Letter Topic and acknowledged automatically</strong>.<br><br>You can enable the dead letter mechanism by setting <code>deadLetterPolicy</code>.<br><br><strong>Example</strong><br><br><code>client.newConsumer()<br>.deadLetterPolicy(DeadLetterPolicy.builder().maxRedeliverCount(10).build())<br>.subscribe();</code><br><br>Default dead letter topic name is <code>{TopicName}-{Subscription}-DLQ</code>.<br><br>To set a custom dead letter topic name:<br><code>client.newConsumer()<br>.deadLetterPolicy(DeadLetterPolicy.builder().maxRedeliverCount(10)<br>.deadLetterTopic(&quot;your-topic-name&quot;).build())<br>.subscribe();</code><br><br>When specifying the dead letter policy while not specifying <code>ackTimeoutMillis</code>, you can set the ack timeout to 30000 millisecond.</td><td>None</td></tr><tr><td>boolean</td><td><code>autoUpdatePartitions</code></td><td>If <code>autoUpdatePartitions</code> is enabled, a consumer subscribes to partition increasement automatically.<br><br><strong>Note</strong>: this is only for partitioned consumers.</td><td>true</td></tr><tr><td>boolean</td><td><code>replicateSubscriptionState</code></td><td>If <code>replicateSubscriptionState</code> isÂ enabled, a subscription state is replicated to geo-replicated clusters.</td><td>false</td></tr></tbody></table><p>You can configure parameters if you do not want to use the default configuration. For a full list, see the Javadoc for the <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/ConsumerBuilder" target="_blank" rel="noopener noreferrer">ConsumerBuilder</a> class. </p><p>The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .ackTimeout(10, TimeUnit.SECONDS)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionType(SubscriptionType.Exclusive)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="async-receive"></a>Async receive<a class="hash-link" href="#async-receive" title="Direct link to heading">#</a></h3><p>The <code>receive</code> method receives messages synchronously (the consumer process is blocked until a message is available). You can also use <a href="/docs/2.7.1/concepts-messaging#receive-modes">async receive</a>, which returns a <a href="http://www.baeldung.com/java-completablefuture" target="_blank" rel="noopener noreferrer"><code>CompletableFuture</code></a> object immediately once a new message is available.</p><p>The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CompletableFuture&lt;Message&gt; asyncMessage = consumer.receiveAsync();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Async receive operations return a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/Message" target="_blank" rel="noopener noreferrer">Message</a> wrapped inside of a <a href="http://www.baeldung.com/java-completablefuture" target="_blank" rel="noopener noreferrer"><code>CompletableFuture</code></a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="batch-receive"></a>Batch receive<a class="hash-link" href="#batch-receive" title="Direct link to heading">#</a></h3><p>Use <code>batchReceive</code> to receive multiple messages for each call. </p><p>The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Messages messages = consumer.batchReceive();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">for (Object message : messages) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  // do something</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">consumer.acknowledge(messages)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Batch receive policy limits the number and bytes of messages in a single batch. You can specify a timeout to wait for enough messages.
The batch receive is completed if any of the following condition is met: enough number of messages, bytes of messages, wait timeout.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.batchReceivePolicy(BatchReceivePolicy.builder()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.maxNumMessages(100)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.maxNumBytes(1024 * 1024)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.timeout(200, TimeUnit.MILLISECONDS)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.build())</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The default batch receive policy is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BatchReceivePolicy.builder()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.maxNumMessage(-1)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.maxNumBytes(10 * 1024 * 1024)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.timeout(100, TimeUnit.MILLISECONDS)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.build();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="multi-topic-subscriptions"></a>Multi-topic subscriptions<a class="hash-link" href="#multi-topic-subscriptions" title="Direct link to heading">#</a></h3><p>In addition to subscribing a consumer to a single Pulsar topic, you can also subscribe to multiple topics simultaneously using <a href="/docs/2.7.1/concepts-messaging#multi-topic-subscriptions">multi-topic subscriptions</a>. To use multi-topic subscriptions you can supply either a regular expression (regex) or a <code>List</code> of topics. If you select topics via regex, all topics must be within the same Pulsar namespace.</p><p>The followings are some examples.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.pulsar.client.api.Consumer;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.pulsar.client.api.PulsarClient;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Arrays;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.regex.Pattern;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ConsumerBuilder consumerBuilder = pulsarClient.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(subscription);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Subscribe to all topics in a namespace</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Pattern allTopicsInNamespace = Pattern.compile(&quot;public/default/.*&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer allTopicsConsumer = consumerBuilder</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topicsPattern(allTopicsInNamespace)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Subscribe to a subsets of topics in a namespace, based on regex</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Pattern someTopicsInNamespace = Pattern.compile(&quot;public/default/foo.*&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer allTopicsConsumer = consumerBuilder</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topicsPattern(someTopicsInNamespace)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the above example, the consumer subscribes to the <code>persistent</code> topics that can match the topic name pattern. If you want the consumer subscribes to all <code>persistent</code> and <code>non-persistent</code> topics that can match the topic name pattern, set <code>subscriptionTopicsMode</code> to <code>RegexSubscriptionMode.AllTopics</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Pattern pattern = Pattern.compile(&quot;public/default/.*&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsarClient.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-sub&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topicsPattern(pattern)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionTopicsMode(RegexSubscriptionMode.AllTopics)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>By default, the <code>subscriptionTopicsMode</code> of the consumer is <code>PersistentOnly</code>. Available options of <code>subscriptionTopicsMode</code> are <code>PersistentOnly</code>, <code>NonPersistentOnly</code>, and <code>AllTopics</code>.</p></div></div><p>You can also subscribe to an explicit list of topics (across namespaces if you wish):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">List&lt;String&gt; topics = Arrays.asList(</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;topic-1&quot;,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;topic-2&quot;,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;topic-3&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer multiTopicConsumer = consumerBuilder</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topics(topics)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Alternatively:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer multiTopicConsumer = consumerBuilder</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;topic-1&quot;,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;topic-2&quot;,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &quot;topic-3&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        )</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can also subscribe to multiple topics asynchronously using the <code>subscribeAsync</code> method rather than the synchronous <code>subscribe</code> method. The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Pattern allTopicsInNamespace = Pattern.compile(&quot;persistent://public/default.*&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">consumerBuilder</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topics(topics)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribeAsync()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .thenAccept(this::receiveMessageFromConsumer);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">private void receiveMessageFromConsumer(Object consumer) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ((Consumer)consumer).receiveAsync().thenAccept(message -&gt; {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // Do something with the received message</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                receiveMessageFromConsumer(consumer);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            });</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="subscription-types"></a>Subscription types<a class="hash-link" href="#subscription-types" title="Direct link to heading">#</a></h3><p>Pulsar has various <a href="/docs/2.7.1/concepts-messaging#subscription-types">subscription types</a> to match different scenarios. A topic can have multiple subscriptions with different subscription types. However, a subscription can only have one subscription type at a time.</p><p>A subscription is identical with the subscription name; a subscription name can specify only one subscription type at a time. To change the subscription type, you should first stop all consumers of this subscription.</p><p>Different subscription types have different message distribution modes. This section describes the differences of subscription types and how to use them.</p><p>In order to better describe their differences, assuming you have a topic named &quot;my-topic&quot;, and the producer has published 10 messages.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;String&gt; producer = client.newProducer(Schema.STRING)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .enableBatching(false)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 3 messages with &quot;key-1&quot;, 3 messages with &quot;key-2&quot;, 2 messages with &quot;key-3&quot; and 2 messages with &quot;key-4&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-1&quot;).value(&quot;message-1-1&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-1&quot;).value(&quot;message-1-2&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-1&quot;).value(&quot;message-1-3&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-2&quot;).value(&quot;message-2-1&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-2&quot;).value(&quot;message-2-2&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-2&quot;).value(&quot;message-2-3&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-3&quot;).value(&quot;message-3-1&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-3&quot;).value(&quot;message-3-2&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-4&quot;).value(&quot;message-4-1&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">producer.newMessage().key(&quot;key-4&quot;).value(&quot;message-4-2&quot;).send();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="exclusive"></a>Exclusive<a class="hash-link" href="#exclusive" title="Direct link to heading">#</a></h4><p>Create a new consumer and subscribe with the <code>Exclusive</code> subscription type.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionType(SubscriptionType.Exclusive)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Only the first consumer is allowed to the subscription, other consumers receive an error. The first consumer receives all 10 messages, and the consuming order is the same as the producing order.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If topic is a partitioned topic, the first consumer subscribes to all partitioned topics, other consumers are not assigned with partitions and receive an error. </p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="failover"></a>Failover<a class="hash-link" href="#failover" title="Direct link to heading">#</a></h4><p>Create new consumers and subscribe with the<code>Failover</code> subscription type.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer1 = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionType(SubscriptionType.Failover)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer2 = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionType(SubscriptionType.Failover)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//conumser1 is the active consumer, consumer2 is the standby consumer.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//consumer1 receives 5 messages and then crashes, consumer2 takes over as an  active consumer.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Multiple consumers can attach to the same subscription, yet only the first consumer is active, and others are standby. When the active consumer is disconnected, messages will be dispatched to one of standby consumers, and the standby consumer then becomes active consumer. </p><p>If the first active consumer is disconnected after receiving 5 messages, the standby consumer becomes active consumer. Consumer1 will receive:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-3&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>consumer2 will receive:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-3&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-3&quot;, &quot;message-3-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-3&quot;, &quot;message-3-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-4&quot;, &quot;message-4-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-4&quot;, &quot;message-4-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If a topic is a partitioned topic, each partition has only one active consumer, messages of one partition are distributed to only one consumer, and messages of multiple partitions are distributed to multiple consumers. </p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="shared"></a>Shared<a class="hash-link" href="#shared" title="Direct link to heading">#</a></h4><p>Create new consumers and subscribe with <code>Shared</code> subscription type.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer1 = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionType(SubscriptionType.Shared)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer2 = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionType(SubscriptionType.Shared)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//Both consumer1 and consumer 2 is active consumers.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In shared subscription type, multiple consumers can attach to the same subscription and messages are delivered in a round robin distribution across consumers.</p><p>If a broker dispatches only one message at a time, consumer1 receives the following information.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-3&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-3&quot;, &quot;message-3-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-4&quot;, &quot;message-4-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>consumer2 receives the following information.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-3&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-3&quot;, &quot;message-3-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-4&quot;, &quot;message-4-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>Shared</code> subscription is different from <code>Exclusive</code> and <code>Failover</code> subscription types. <code>Shared</code> subscription has better flexibility, but cannot provide order guarantee.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="key_shared"></a>Key_shared<a class="hash-link" href="#key_shared" title="Direct link to heading">#</a></h4><p>This is a new subscription type since 2.4.0 release. Create new consumers and subscribe with <code>Key_Shared</code> subscription type.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer1 = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionType(SubscriptionType.Key_Shared)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer consumer2 = client.newConsumer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionName(&quot;my-subscription&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscriptionType(SubscriptionType.Key_Shared)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .subscribe()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//Both consumer1 and consumer2 are active consumers.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>Key_Shared</code> subscription is like <code>Shared</code> subscription, all consumers can attach to the same subscription. But it is different from <code>Key_Shared</code> subscription, messages with the same key are delivered to only one consumer in order. The possible distribution of messages between different consumers (by default we do not know in advance which keys will be assigned to a consumer, but a key will only be assigned to a consumer at the same time).</p><p>consumer1 receives the following information.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-1&quot;, &quot;message-1-3&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-3&quot;, &quot;message-3-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-3&quot;, &quot;message-3-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>consumer2 receives the following information.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-2&quot;, &quot;message-2-3&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-4&quot;, &quot;message-4-1&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(&quot;key-4&quot;, &quot;message-4-2&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If batching is enabled at the producer side, messages with different keys are added to a batch by default. The broker will dispatch the batch to the consumer, so the default batch mechanism may break the Key_Shared subscription guaranteed message distribution semantics. The producer needs to use the <code>KeyBasedBatcher</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer producer = client.newProducer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .batcherBuilder(BatcherBuilder.KEY_BASED)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or the producer can disable batching.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer producer = client.newProducer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;my-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .enableBatching(false)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If the message key is not specified, messages without key are dispatched to one consumer in order by default.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="reader"></a>Reader<a class="hash-link" href="#reader" title="Direct link to heading">#</a></h2><p>With the <a href="/docs/2.7.1/concepts-clients#reader-interface">reader interface</a>, Pulsar clients can &quot;manually position&quot; themselves within a topic and reading all messages from a specified message onward. The Pulsar API for Java enables you to create <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/Reader" target="_blank" rel="noopener noreferrer">Reader</a> objects by specifying a topic and a <a href="https://pulsar.incubator.apache.org/api/client/org/apache/pulsar/client/api/MessageId" target="_blank" rel="noopener noreferrer">MessageId</a>.</p><p>The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">byte[] msgIdBytes = // Some message ID byte array</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MessageId id = MessageId.fromByteArray(msgIdBytes);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Reader reader = pulsarClient.newReader()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(topic)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .startMessageId(id)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">while (true) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Message message = reader.readNext();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Process message</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the example above, a <code>Reader</code> object is instantiated for a specific topic and message (by ID); the reader iterates over each message in the topic after the message is identified by <code>msgIdBytes</code> (how that value is obtained depends on the application).</p><p>The code sample above shows pointing the <code>Reader</code> object to a specific message (by ID), but you can also use <code>MessageId.earliest</code> to point to the earliest available message on the topic of <code>MessageId.latest</code> to point to the most recent available message.</p><p>When you create a reader, you can use the <code>loadConf</code> configuration. The following parameters are available in <code>loadConf</code>.</p><table><thead><tr><th>Type</th><th>Name</th><th><div>Description</div></th><th>Default</th></tr></thead><tbody><tr><td>String</td><td><code>topicName</code></td><td>Topic name.</td><td>None</td></tr><tr><td>int</td><td><code>receiverQueueSize</code></td><td>Size of a consumer&#x27;s receiver queue.<br><br>For example, the number of messages that can be accumulated by a consumer before an application calls <code>Receive</code>.<br><br>A value higher than the default value increases consumer throughput, though at the expense of more memory utilization.</td><td>1000</td></tr><tr><td>ReaderListener&lt;T&gt;</td><td><code>readerListener</code></td><td>A listener that is called for message received.</td><td>None</td></tr><tr><td>String</td><td><code>readerName</code></td><td>Reader name.</td><td>null</td></tr><tr><td>String</td><td><code>subscriptionRolePrefix</code></td><td>Prefix of subscription role.</td><td>null</td></tr><tr><td>CryptoKeyReader</td><td><code>cryptoKeyReader</code></td><td>Interface that abstracts the access to a key store.</td><td>null</td></tr><tr><td>ConsumerCryptoFailureAction</td><td><code>cryptoFailureAction</code></td><td>Consumer should take action when it receives a message that can not be decrypted.<br><br><li><strong>FAIL</strong>: this is the default option to fail messages until crypto succeeds.</li><br><li> <strong>DISCARD</strong>: silently acknowledge and not deliver message to an application.</li><br><li><strong>CONSUME</strong>: deliver encrypted messages to applications. It is the application&#x27;s responsibility to decrypt the message.<br><br>The message decompression fails. <br><br>If messages contain batch messages, a client is not be able to retrieve individual messages in batch.<br><br>Delivered encrypted message contains {@link EncryptionContext} which contains encryption and compression information in it using which application can decrypt consumed message payload.</li></td><td><li>ConsumerCryptoFailureAction.FAIL</li></td></tr><tr><td>boolean</td><td><code>readCompacted</code></td><td>If enabling <code>readCompacted</code>, a consumer reads messages from a compacted topic rather than a full message backlog of a topic.<br><br> A consumer only sees the latest value for each key in the compacted topic, up until reaching the point in the topic message when compacting backlog. Beyond that point, send messages as normal.<br><br><code>readCompacted</code> can only be enabled on subscriptions to persistent topics, which have a single active consumer (for example, failure or exclusive subscriptions). <br><br>Attempting to enable it on subscriptions to non-persistent topics or on shared subscriptions leads to a subscription call throwing a <code>PulsarClientException</code>.</td><td>false</td></tr><tr><td>boolean</td><td><code>resetIncludeHead</code></td><td>If set to true, the first message to be returned is the one specified by <code>messageId</code>.<br><br>If set to false, the first message to be returned is the one next to the message specified by <code>messageId</code>.</td><td>false</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="sticky-key-range-reader"></a>Sticky key range reader<a class="hash-link" href="#sticky-key-range-reader" title="Direct link to heading">#</a></h3><p>In sticky key range reader, broker will only dispatch messages which hash of the message key contains by the specified key hash range. Multiple key hash ranges can be specified on a reader.</p><p>The following is an example to create a sticky key range reader.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsarClient.newReader()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(topic)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .startMessageId(MessageId.earliest)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .keyHashRange(Range.of(0, 10000), Range.of(20001, 30000))</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Total hash range size is 65536, so the max end of the range should be less than or equal to 65535.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="schema"></a>Schema<a class="hash-link" href="#schema" title="Direct link to heading">#</a></h2><p>In Pulsar, all message data consists of byte arrays &quot;under the hood.&quot; <a href="/docs/2.7.1/schema-get-started">Message schemas</a> enable you to use other types of data when constructing and handling messages (from simple types like strings to more complex, application-specific types). If you construct, say, a <a href="#producers">producer</a> without specifying a schema, then the producer can only produce messages of type <code>byte[]</code>. The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;byte[]&gt; producer = client.newProducer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(topic)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The producer above is equivalent to a <code>Producer&lt;byte[]&gt;</code> (in fact, you should <em>always</em> explicitly specify the type). If you&#x27;d like to use a producer for a different type of data, you&#x27;ll need to specify a <strong>schema</strong> that informs Pulsar which data type will be transmitted over the <a href="/docs/2.7.1/reference-terminology#topic">topic</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="schema-example"></a>Schema example<a class="hash-link" href="#schema-example" title="Direct link to heading">#</a></h3><p>Let&#x27;s say that you have a <code>SensorReading</code> class that you&#x27;d like to transmit over a Pulsar topic:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class SensorReading {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public float temperature;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public SensorReading(float temperature) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.temperature = temperature;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // A no-arg constructor is required</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public SensorReading() {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public float getTemperature() {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return temperature;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void setTemperature(float temperature) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.temperature = temperature;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You could then create a <code>Producer&lt;SensorReading&gt;</code> (or <code>Consumer&lt;SensorReading&gt;</code>) like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;SensorReading&gt; producer = client.newProducer(JSONSchema.of(SensorReading.class))</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .topic(&quot;sensor-readings&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The following schema formats are currently available for Java:</p><ul><li><p>No schema or the byte array schema (which can be applied using <code>Schema.BYTES</code>):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;byte[]&gt; bytesProducer = client.newProducer(Schema.BYTES)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(&quot;some-raw-bytes-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or, equivalently:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;byte[]&gt; bytesProducer = client.newProducer()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(&quot;some-raw-bytes-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p><code>String</code> for normal UTF-8-encoded string data. Apply the schema using <code>Schema.STRING</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;String&gt; stringProducer = client.newProducer(Schema.STRING)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(&quot;some-string-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Create JSON schemas for POJOs using <code>Schema.JSON</code>. The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;MyPojo&gt; pojoProducer = client.newProducer(Schema.JSON(MyPojo.class))</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(&quot;some-pojo-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Generate Protobuf schemas using <code>Schema.PROTOBUF</code>. The following example shows how to create the Protobuf schema and use it to instantiate a new producer:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;MyProtobuf&gt; protobufProducer = client.newProducer(Schema.PROTOBUF(MyProtobuf.class))</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(&quot;some-protobuf-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>Define Avro schemas with <code>Schema.AVRO</code>. The following code snippet demonstrates how to create and use Avro schema.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Producer&lt;MyAvro&gt; avroProducer = client.newProducer(Schema.AVRO(MyAvro.class))</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(&quot;some-avro-topic&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="authentication"></a>Authentication<a class="hash-link" href="#authentication" title="Direct link to heading">#</a></h2><p>Pulsar currently supports three authentication schemes: <a href="/docs/2.7.1/security-tls-authentication">TLS</a>, <a href="/docs/2.7.1/security-athenz">Athenz</a>, and <a href="/docs/2.7.1/security-oauth2">Oauth2</a>. You can use the Pulsar Java client with all of them.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="tls-authentication"></a>TLS Authentication<a class="hash-link" href="#tls-authentication" title="Direct link to heading">#</a></h3><p>To use <a href="/docs/2.7.1/security-tls-authentication">TLS</a>, you need to set TLS to <code>true</code> using the <code>setUseTls</code> method, point your Pulsar client to a TLS cert path, and provide paths to cert and key files.</p><p>The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Map&lt;String, String&gt; authParams = new HashMap();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authParams.put(&quot;tlsCertFile&quot;, &quot;/path/to/client-cert.pem&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authParams.put(&quot;tlsKeyFile&quot;, &quot;/path/to/client-key.pem&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Authentication tlsAuth = AuthenticationFactory</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create(AuthenticationTls.class.getName(), authParams);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PulsarClient client = PulsarClient.builder()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .serviceUrl(&quot;pulsar+ssl://my-broker.com:6651&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .enableTls(true)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .tlsTrustCertsFilePath(&quot;/path/to/cacert.pem&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .authentication(tlsAuth)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .build();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="athenz"></a>Athenz<a class="hash-link" href="#athenz" title="Direct link to heading">#</a></h3><p>To use <a href="/docs/2.7.1/security-athenz">Athenz</a> as an authentication provider, you need to <a href="#tls-authentication">use TLS</a> and provide values for four parameters in a hash:</p><ul><li><code>tenantDomain</code></li><li><code>tenantService</code></li><li><code>providerDomain</code></li><li><code>privateKey</code></li></ul><p>You can also set an optional <code>keyId</code>. The following is an example.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Map&lt;String, String&gt; authParams = new HashMap();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authParams.put(&quot;tenantDomain&quot;, &quot;shopping&quot;); // Tenant domain name</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authParams.put(&quot;tenantService&quot;, &quot;some_app&quot;); // Tenant service name</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authParams.put(&quot;providerDomain&quot;, &quot;pulsar&quot;); // Provider domain name</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authParams.put(&quot;privateKey&quot;, &quot;file:///path/to/private.pem&quot;); // Tenant private key path</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">authParams.put(&quot;keyId&quot;, &quot;v1&quot;); // Key id for the tenant private key (optional, default: &quot;0&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Authentication athenzAuth = AuthenticationFactory</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .create(AuthenticationAthenz.class.getName(), authParams);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PulsarClient client = PulsarClient.builder()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .serviceUrl(&quot;pulsar+ssl://my-broker.com:6651&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .enableTls(true)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .tlsTrustCertsFilePath(&quot;/path/to/cacert.pem&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .authentication(athenzAuth)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .build();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="supported-pattern-formats"></a>Supported pattern formats<a class="hash-link" href="#supported-pattern-formats" title="Direct link to heading">#</a></h4><p>The <code>privateKey</code> parameter supports the following three pattern formats:</p><ul><li><code>file:///path/to/file</code></li><li><code>file:/path/to/file</code></li><li><code>data:application/x-pem-file;base64,&lt;base64-encoded value&gt;</code></li></ul></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="oauth2"></a>Oauth2<a class="hash-link" href="#oauth2" title="Direct link to heading">#</a></h3><p>The following example shows how to use <a href="/docs/2.7.1/security-oauth2">Oauth2</a> as an authentication provider for the Pulsar Java client.</p><p>You can use the factory method to configure authentication for Pulsar Java client.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PulsarClient client = PulsarClient.builder()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .serviceUrl(&quot;pulsar://broker.example.com:6650/&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .authentication(</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        AuthenticationFactoryOAuth2.clientCredentials(this.issuerUrl, this.credentialsUrl, this.audience))</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .build();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In addition, you can also use the encoded parameters to configure authentication for Pulsar Java client.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Authentication auth = AuthenticationFactory</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create(AuthenticationOAuth2.class.getName(), &quot;{&quot;type&quot;:&quot;client_credentials&quot;,&quot;privateKey&quot;:&quot;...&quot;,&quot;issuerUrl&quot;:&quot;...&quot;,&quot;audience&quot;:&quot;...&quot;}&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PulsarClient client = PulsarClient.builder()</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .serviceUrl(&quot;pulsar://broker.example.com:6650/&quot;)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .authentication(auth)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .build();</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/pulsar/edit/master/site2/website-next/versioned_docs/version-2.7.1/client-libraries-java.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/2.7.1/client-libraries"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/2.7.1/client-libraries-go"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Go Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link">Installation</a><ul><li><a href="#maven" class="table-of-contents__link">Maven</a></li><li><a href="#gradle" class="table-of-contents__link">Gradle</a></li></ul></li><li><a href="#connection-urls" class="table-of-contents__link">Connection URLs</a></li><li><a href="#client" class="table-of-contents__link">Client</a></li><li><a href="#producer" class="table-of-contents__link">Producer</a><ul><li><a href="#configure-producer" class="table-of-contents__link">Configure producer</a></li><li><a href="#message-routing" class="table-of-contents__link">Message routing</a></li><li><a href="#async-send" class="table-of-contents__link">Async send</a></li><li><a href="#configure-messages" class="table-of-contents__link">Configure messages</a></li></ul></li><li><a href="#consumer" class="table-of-contents__link">Consumer</a><ul><li><a href="#configure-consumer" class="table-of-contents__link">Configure consumer</a></li><li><a href="#async-receive" class="table-of-contents__link">Async receive</a></li><li><a href="#batch-receive" class="table-of-contents__link">Batch receive</a></li><li><a href="#multi-topic-subscriptions" class="table-of-contents__link">Multi-topic subscriptions</a></li><li><a href="#subscription-types" class="table-of-contents__link">Subscription types</a></li></ul></li><li><a href="#reader" class="table-of-contents__link">Reader</a><ul><li><a href="#sticky-key-range-reader" class="table-of-contents__link">Sticky key range reader</a></li></ul></li><li><a href="#schema" class="table-of-contents__link">Schema</a><ul><li><a href="#schema-example" class="table-of-contents__link">Schema example</a></li></ul></li><li><a href="#authentication" class="table-of-contents__link">Authentication</a><ul><li><a href="#tls-authentication" class="table-of-contents__link">TLS Authentication</a></li><li><a href="#athenz" class="table-of-contents__link">Athenz</a></li><li><a href="#oauth2" class="table-of-contents__link">Oauth2</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Inc.Copyright Â© 2021 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.668ae9d7.js"></script>
<script src="/assets/js/main.3d3de418.js"></script>
</body>
</html>