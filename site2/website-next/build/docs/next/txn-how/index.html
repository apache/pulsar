<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Pulsar Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Pulsar Blog Atom Feed"><title data-react-helmet="true">How transactions work? | Apache Pulsar</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pulsar.apache.com/docs/next/txn-how"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="How transactions work? | Apache Pulsar"><meta data-react-helmet="true" name="description" content="This section describes transaction components and how the components work together. For the complete design details, see PIP-31: Transactional Streaming."><meta data-react-helmet="true" property="og:description" content="This section describes transaction components and how the components work together. For the complete design details, see PIP-31: Transactional Streaming."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pulsar.apache.com/docs/next/txn-how"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/next/txn-how" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/next/txn-how" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4a6b6be2.css">
<link rel="preload" href="/assets/js/runtime~main.668ae9d7.js" as="script">
<link rel="preload" href="/assets/js/main.3d3de418.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/">Docs</a><a class="navbar__item navbar__link" href="/versions">Versions</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs">Version</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/">2.8.0</a></li><li><a class="dropdown__link" href="/docs/2.7.3/">2.7.3</a></li><li><a class="dropdown__link" href="/docs/2.7.2/">2.7.2</a></li><li><a class="dropdown__link" href="/docs/2.7.1/">2.7.1</a></li><li><a class="dropdown__link" href="/docs/2.7.0/">2.7.0</a></li><li><a class="dropdown__link" href="/docs/2.6.4/">2.6.4</a></li><li><a class="dropdown__link" href="/docs/2.6.3/">2.6.3</a></li><li><a class="dropdown__link" href="/docs/2.6.2/">2.6.2</a></li><li><a class="dropdown__link" href="/docs/2.2.0/">2.2.0</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Get Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts and Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar Schema</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar Functions</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar IO</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar SQL</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tiered Storage</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Transactions</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/txn-why">Why transactions?</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/txn-what">What are transactions?</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/txn-how">How transactions work?</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/txn-use">How to use transactions?</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/txn-monitor">How to monitor transactions?</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes (Helm)</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Performance</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Client Libraries</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Admin API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Adaptors</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cookbooks</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Apache Pulsar <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/txn-how">latest version</a></b> (2.8.0).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How transactions work?</h1></header><p>This section describes transaction components and how the components work together. For the complete design details, see <a href="https://docs.google.com/document/d/145VYp09JKTw9jAT-7yNyFU255FptB2_B2Fye100ZXDI/edit#heading=h.bm5ainqxosrx" target="_blank" rel="noopener noreferrer">PIP-31: Transactional Streaming</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="key-concept"></a>Key concept<a class="hash-link" href="#key-concept" title="Direct link to heading">#</a></h2><p>It is important to know the following key concepts, which is a prerequisite for understanding how transactions work.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="transaction-coordinator"></a>Transaction coordinator<a class="hash-link" href="#transaction-coordinator" title="Direct link to heading">#</a></h3><p>The transaction coordinator (TC) is a module running inside a Pulsar broker. </p><ul><li>It maintains the entire life cycle of transactions and prevents a transaction from getting into an incorrect status. </li><li>It handles transaction timeout, and ensures that the transaction is aborted after a transaction timeout.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="transaction-log"></a>Transaction log<a class="hash-link" href="#transaction-log" title="Direct link to heading">#</a></h3><p>All the transaction metadata persists in the transaction log. The transaction log is backed by a Pulsar topic. If the transaction coordinator crashes, it can restore the transaction metadata from the transaction log.</p><p>The transaction log stores the transaction status rather than actual messages in the transaction (the actual messages are stored in the actual topic partitions). </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="transaction-buffer"></a>Transaction buffer<a class="hash-link" href="#transaction-buffer" title="Direct link to heading">#</a></h3><p>Messages produced to a topic partition within a transaction are stored in the transaction buffer (TB) of that topic partition. The messages in the transaction buffer are not visible to consumers until the transactions are committed. The messages in the transaction buffer are discarded when the transactions are aborted. </p><p>Transaction buffer stores all ongoing and aborted transactions in memory. All messages are sent to the actual partitioned Pulsar topics.  After transactions are committed, the messages in the transaction buffer are materialized (visible) to consumers. When the transactions are aborted, the messages in the transaction buffer are discarded.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="transaction-id"></a>Transaction ID<a class="hash-link" href="#transaction-id" title="Direct link to heading">#</a></h3><p>Transaction ID (TxnID) identifies a unique transaction in Pulsar. The transaction ID is 128-bit. The highest 16 bits are reserved for the ID of the transaction coordinator, and the remaining bits are used for monotonically increasing numbers in each transaction coordinator. It is easy to locate the transaction crash with the TxnID.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="pending-acknowledge-state"></a>Pending acknowledge state<a class="hash-link" href="#pending-acknowledge-state" title="Direct link to heading">#</a></h3><p>Pending acknowledge state maintains message acknowledgments within a transaction before a transaction completes. If a message is in the pending acknowledge state, the message cannot be acknowledged by other transactions until the message is removed from the pending acknowledge state.</p><p>The pending acknowledge state is persisted to the pending acknowledge log (cursor ledger). A new broker can restore the state from the pending acknowledge log to ensure the acknowledgement is not lost.    </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="data-flow"></a>Data flow<a class="hash-link" href="#data-flow" title="Direct link to heading">#</a></h2><p>At a high level, the data flow can be split into several steps:</p><ol><li>Begin a transaction.</li><li>Publish messages with a transaction.</li><li>Acknowledge messages with a transaction.</li><li>End a transaction.</li></ol><p>To help you debug or tune the transaction for better performance, review the following diagrams and descriptions. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="1-begin-a-transaction"></a>1. Begin a transaction<a class="hash-link" href="#1-begin-a-transaction" title="Direct link to heading">#</a></h3><p>Before introducing the transaction in Pulsar, a producer is created and then messages are sent to brokers and stored in data logs. </p><p><img src="/assets/images/txn-3-751a2bc51f91299f6c546b647c2f632c.png"></p><p>Letâ€™s walk through the steps for <em>beginning a transaction</em>.</p><table><thead><tr><th>Step</th><th>Description</th></tr></thead><tbody><tr><td>1.1</td><td>The first step is that the Pulsar client finds the transaction coordinator.</td></tr><tr><td>1.2</td><td>The transaction coordinator allocates a transaction ID for the transaction. In the transaction log, the transaction is logged with its transaction ID and status (OPEN), which ensures the transaction status is persisted regardless of transaction coordinator crashes.</td></tr><tr><td>1.3</td><td>The transaction log sends the result of persisting the transaction ID to the transaction coordinator.</td></tr><tr><td>1.4</td><td>After the transaction status entry is logged, the transaction coordinator brings the transaction ID back to the Pulsar client.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="2-publish-messages-with-a-transaction"></a>2. Publish messages with a transaction<a class="hash-link" href="#2-publish-messages-with-a-transaction" title="Direct link to heading">#</a></h3><p>In this stage, the Pulsar client enters a transaction loop, repeating the <code>consume-process-produce</code> operation for all the messages that comprise the transaction. This is a long phase and is potentially composed of multiple produce and acknowledgement requests. </p><p><img src="/assets/images/txn-4-f7adc6fb4ff184199a981fc32dd2311e.png"></p><p>Letâ€™s walk through the steps for <em>publishing messages with a transaction</em>.</p><table><thead><tr><th>Step</th><th>Description</th></tr></thead><tbody><tr><td>2.1.1</td><td>Before the Pulsar client produces messages to a new topic partition, it sends a request to the transaction coordinator to add the partition to the transaction.</td></tr><tr><td>2.1.2</td><td>The transaction coordinator logs the partition changes of the transaction into the transaction log for durability, which ensures the transaction coordinator knows all the partitions that a transaction is handling. The transaction coordinator can commit or abort changes on each partition at the end-partition phase.</td></tr><tr><td>2.1.3</td><td>The transaction log sends the result of logging the new partition (used for producing messages) to the transaction coordinator.</td></tr><tr><td>2.1.4</td><td>The transaction coordinator sends the result of adding a new produced partition to the transaction.</td></tr><tr><td>2.2.1</td><td>The Pulsar client starts producing messages to partitions. The flow of this part is the same as the normal flow of producing messages except that the batch of messages produced by a transaction contains transaction IDs.</td></tr><tr><td>2.2.2</td><td>The broker writes messages to a partition.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="3-acknowledge-messages-with-a-transaction"></a>3. Acknowledge messages with a transaction<a class="hash-link" href="#3-acknowledge-messages-with-a-transaction" title="Direct link to heading">#</a></h3><p>In this phase, the Pulsar client sends a request to the transaction coordinator and a new subscription is acknowledged as a part of a transaction.</p><p><img src="/assets/images/txn-5-66e33b5b6ba3d900a1635cb268a38b35.png"></p><p>Letâ€™s walk through the steps for <em>acknowledging messages with a transaction</em>.</p><table><thead><tr><th>Step</th><th>Description</th></tr></thead><tbody><tr><td>3.1.1</td><td>The Pulsar client sends a request to add an acknowledged subscription to the transaction coordinator.</td></tr><tr><td>3.1.2</td><td>The transaction coordinator logs the addition of subscription, which ensures that it knows all subscriptions handled by a transaction and can commit or abort changes on each subscription at the end phase.</td></tr><tr><td>3.1.3</td><td>The transaction log sends the result of logging the new partition (used for acknowledging messages) to the transaction coordinator.</td></tr><tr><td>3.1.4</td><td>The transaction coordinator sends the result of adding the new acknowledged partition to the transaction.</td></tr><tr><td>3.2</td><td>The Pulsar client acknowledges messages on the subscription. The flow of this part is the same as the normal flow of acknowledging messages except that the acknowledged request carries a transaction ID.</td></tr><tr><td>3.3</td><td>The broker receiving the acknowledgement request checks if the acknowledgment belongs to a transaction or not.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="4-end-a-transaction"></a>4. End a transaction<a class="hash-link" href="#4-end-a-transaction" title="Direct link to heading">#</a></h3><p>At the end of a transaction, the Pulsar client decides to commit or abort the transaction. The transaction can be aborted when a conflict is detected on acknowledging messages. </p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="41-end-transaction-request"></a>4.1 End transaction request<a class="hash-link" href="#41-end-transaction-request" title="Direct link to heading">#</a></h4><p>When the Pulsar client finishes a transaction, it issues an end transaction request.</p><p><img src="/assets/images/txn-6-ac44126d5410be548e44717d2cc056fa.png"></p><p>Letâ€™s walk through the steps for <em>ending the transaction</em>.</p><table><thead><tr><th>Step</th><th>Description</th></tr></thead><tbody><tr><td>4.1.1</td><td>The Pulsar client issues an end transaction request (with a field indicating whether the transaction is to be committed or aborted) to the transaction coordinator.</td></tr><tr><td>4.1.2</td><td>The transaction coordinator writes a COMMITTING or ABORTING message to its transaction log.</td></tr><tr><td>4.1.3</td><td>The transaction log sends the result of logging the committing or aborting status.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="42-finalize-a-transaction"></a>4.2 Finalize a transaction<a class="hash-link" href="#42-finalize-a-transaction" title="Direct link to heading">#</a></h4><p>The transaction coordinator starts the process of committing or aborting messages to all the partitions involved in this transaction. </p><p><img src="/assets/images/txn-7-229fdd1904b8c411e77d48fe1c3fee65.png"></p><p>Letâ€™s walk through the steps for <em>finalizing a transaction</em>.</p><table><thead><tr><th>Step</th><th>Description</th></tr></thead><tbody><tr><td>4.2.1</td><td>The transaction coordinator commits transactions on subscriptions and commits transactions on partitions at the same time.</td></tr><tr><td>4.2.2</td><td>The broker (produce) writes produced committed markers to the actual partitions. At the same time, the broker (ack) writes acked committed marks to the subscription pending ack partitions.</td></tr><tr><td>4.2.3</td><td>The data log sends the result of writing produced committed marks to the broker. At the same time, pending ack data log sends the result of writing acked committed marks to the broker. The cursor moves to the next position.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="43-mark-a-transaction-as-committed-or-aborted"></a>4.3 Mark a transaction as COMMITTED or ABORTED<a class="hash-link" href="#43-mark-a-transaction-as-committed-or-aborted" title="Direct link to heading">#</a></h4><p>The transaction coordinator writes the final transaction status to the transaction log to complete the transaction.</p><p><img src="/assets/images/txn-8-d49405f853142c9762c4caaa8f862b4e.png"></p><p>Letâ€™s walk through the steps for <em>marking a transaction as COMMITTED or ABORTED</em>.</p><table><thead><tr><th>Step</th><th>Description</th></tr></thead><tbody><tr><td>4.3.1</td><td>After all produced messages and acknowledgements to all partitions involved in this transaction have been successfully committed or aborted, the transaction coordinator writes the final COMMITTED or ABORTED transaction status messages to its transaction log, indicating that the transaction is complete. All the messages associated with the transaction in its transaction log can be safely removed.</td></tr><tr><td>4.3.2</td><td>The transaction log sends the result of the committed transaction to the transaction coordinator.</td></tr><tr><td>4.3.3</td><td>The transaction coordinator sends the result of the committed transaction to the Pulsar client.</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/pulsar/edit/master/site2/website-next/docs/txn-how.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/txn-what"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« What are transactions?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/txn-use"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to use transactions? Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#key-concept" class="table-of-contents__link">Key concept</a><ul><li><a href="#transaction-coordinator" class="table-of-contents__link">Transaction coordinator</a></li><li><a href="#transaction-log" class="table-of-contents__link">Transaction log</a></li><li><a href="#transaction-buffer" class="table-of-contents__link">Transaction buffer</a></li><li><a href="#transaction-id" class="table-of-contents__link">Transaction ID</a></li><li><a href="#pending-acknowledge-state" class="table-of-contents__link">Pending acknowledge state</a></li></ul></li><li><a href="#data-flow" class="table-of-contents__link">Data flow</a><ul><li><a href="#1-begin-a-transaction" class="table-of-contents__link">1. Begin a transaction</a></li><li><a href="#2-publish-messages-with-a-transaction" class="table-of-contents__link">2. Publish messages with a transaction</a></li><li><a href="#3-acknowledge-messages-with-a-transaction" class="table-of-contents__link">3. Acknowledge messages with a transaction</a></li><li><a href="#4-end-a-transaction" class="table-of-contents__link">4. End a transaction</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Inc.Copyright Â© 2021 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.668ae9d7.js"></script>
<script src="/assets/js/main.3d3de418.js"></script>
</body>
</html>