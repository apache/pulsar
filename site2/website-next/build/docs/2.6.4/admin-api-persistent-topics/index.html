<!doctype html>
<html class="docs-version-2.6.4" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Pulsar Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Pulsar Blog Atom Feed"><title data-react-helmet="true">Managing persistent topics | Apache Pulsar</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pulsar.apache.com/docs/2.6.4/admin-api-persistent-topics"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2.6.4"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2.6.4"><meta data-react-helmet="true" property="og:title" content="Managing persistent topics | Apache Pulsar"><meta data-react-helmet="true" name="description" content="Persistent helps to access topic which is a logical endpoint for publishing and consuming messages. Producers publish messages to the topic and consumers subscribe to the topic, to consume messages published to the topic."><meta data-react-helmet="true" property="og:description" content="Persistent helps to access topic which is a logical endpoint for publishing and consuming messages. Producers publish messages to the topic and consumers subscribe to the topic, to consume messages published to the topic."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pulsar.apache.com/docs/2.6.4/admin-api-persistent-topics"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/2.6.4/admin-api-persistent-topics" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/docs/2.6.4/admin-api-persistent-topics" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4a6b6be2.css">
<link rel="preload" href="/assets/js/runtime~main.668ae9d7.js" as="script">
<link rel="preload" href="/assets/js/main.3d3de418.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/2.6.4/">Docs</a><a class="navbar__item navbar__link" href="/versions">Versions</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs">Version</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/">2.8.0</a></li><li><a class="dropdown__link" href="/docs/2.7.3/">2.7.3</a></li><li><a class="dropdown__link" href="/docs/2.7.2/">2.7.2</a></li><li><a class="dropdown__link" href="/docs/2.7.1/">2.7.1</a></li><li><a class="dropdown__link" href="/docs/2.7.0/">2.7.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/2.6.4/">2.6.4</a></li><li><a class="dropdown__link" href="/docs/2.6.3/">2.6.3</a></li><li><a class="dropdown__link" href="/docs/2.6.2/">2.6.2</a></li><li><a class="dropdown__link" href="/docs/2.2.0/">2.2.0</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Get Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts and Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar Schema</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar Functions</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar IO</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pulsar SQL</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Kubernetes (Helm)</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Administration</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Performance</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Client Libraries</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Admin API</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-overview">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-clusters">Clusters</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-tenants">Tenants</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-brokers">Brokers</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-namespaces">Namespaces</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-permissions">Permissions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2.6.4/admin-api-persistent-topics">Persistent topics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-non-persistent-topics">Non-Persistent topics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-partitioned-topics">Partitioned topics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-non-partitioned-topics">Non-Partitioned topics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-schemas">Schemas</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2.6.4/admin-api-functions">Functions</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Adaptors</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cookbooks</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Apache Pulsar <b>2.6.4</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/admin-api-persistent-topics">latest version</a></b> (2.8.0).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 2.6.4</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Managing persistent topics</h1></header><p>Persistent helps to access topic which is a logical endpoint for publishing and consuming messages. Producers publish messages to the topic and consumers subscribe to the topic, to consume messages published to the topic.</p><p>In all of the instructions and commands below, the topic name structure is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">persistent://tenant/namespace/topic</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="persistent-topics-resources"></a>Persistent topics resources<a class="hash-link" href="#persistent-topics-resources" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="list-of-topics"></a>List of topics<a class="hash-link" href="#list-of-topics" title="Direct link to heading">#</a></h3><p>It provides a list of persistent topics exist under a given namespace.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin" title="Direct link to heading">#</a></h4><p>List of topics can be fetched using <a href="/reference/CliTools#list"><code>list</code></a> command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent list </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  my-tenant/my-namespace</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api"></a>REST API<a class="hash-link" href="#rest-api" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/getListversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /admin/v2/persistent/:tenant/:namespace</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java"></a>Java<a class="hash-link" href="#java" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String namespace = &quot;my-tenant/my-namespace&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().getList(namespace);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="grant-permission"></a>Grant permission<a class="hash-link" href="#grant-permission" title="Direct link to heading">#</a></h3><p>It grants permissions on a client role to perform specific actions on a given topic.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-1"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-1" title="Direct link to heading">#</a></h4><p>Permission can be granted using <a href="/reference/CliTools#grant-permission"><code>grant-permission</code></a> command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent grant-permission </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --actions produce,consume --role application1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-1"></a>REST API<a class="hash-link" href="#rest-api-1" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/grantPermissionsOnTopicversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">POST /admin/v2/persistent/:tenant/:namespace/:topic/permissions/:role</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-1"></a>Java<a class="hash-link" href="#java-1" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String role = &quot;test-role&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Set&lt;AuthAction&gt; actions  = Sets.newHashSet(AuthAction.produce, AuthAction.consume);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().grantPermission(topic, role, actions);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="get-permission"></a>Get permission<a class="hash-link" href="#get-permission" title="Direct link to heading">#</a></h3><p>Permission can be fetched using <a href="/reference/CliTools#permissions"><code>permissions</code></a> command.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-2"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-2" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent permissions </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;application1&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;consume&quot;</span><span class="token plain">,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;produce&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-2"></a>REST API<a class="hash-link" href="#rest-api-2" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/getPermissionsOnTopicversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /admin/v2/persistent/:tenant/:namespace/:topic/permissions</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-2"></a>Java<a class="hash-link" href="#java-2" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().getPermissions(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="revoke-permission"></a>Revoke permission<a class="hash-link" href="#revoke-permission" title="Direct link to heading">#</a></h3><p>It revokes a permission which was granted on a client role.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-3"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-3" title="Direct link to heading">#</a></h4><p>Permission can be revoked using <a href="/reference/CliTools#revoke-permission"><code>revoke-permission</code></a> command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent revoke-permission </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --role application1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;application1&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;consume&quot;</span><span class="token plain">,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;produce&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-3"></a>REST API<a class="hash-link" href="#rest-api-3" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/revokePermissionsOnTopicversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">DELETE /admin/v2/persistent/:tenant/:namespace/:topic/permissions/:role</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-3"></a>Java<a class="hash-link" href="#java-3" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String role = &quot;test-role&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().revokePermissions(topic, role);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="delete-topic"></a>Delete topic<a class="hash-link" href="#delete-topic" title="Direct link to heading">#</a></h3><p>It deletes a topic. The topic cannot be deleted if there&#x27;s any active subscription or producers connected to it.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-4"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-4" title="Direct link to heading">#</a></h4><p>Topic can be deleted using <a href="/reference/CliTools#delete"><code>delete</code></a> command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent delete </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-4"></a>REST API<a class="hash-link" href="#rest-api-4" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/deleteTopicversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">DELETE /admin/v2/persistent/:tenant/:namespace/:topic</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-4"></a>Java<a class="hash-link" href="#java-4" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().delete(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="unload-topic"></a>Unload topic<a class="hash-link" href="#unload-topic" title="Direct link to heading">#</a></h3><p>It unloads a topic.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-5"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-5" title="Direct link to heading">#</a></h4><p>Topic can be unloaded using <a href="/reference/CliTools#unload"><code>unload</code></a> command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent unload </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-5"></a>REST API<a class="hash-link" href="#rest-api-5" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/unloadTopicversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">PUT /admin/v2/persistent/:tenant/:namespace/:topic/unload</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-5"></a>Java<a class="hash-link" href="#java-5" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().unload(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="get-stats"></a>Get stats<a class="hash-link" href="#get-stats" title="Direct link to heading">#</a></h3><p>It shows current statistics of a given non-partitioned topic.</p><ul><li><p><strong>msgRateIn</strong>: The sum of all local and replication publishers&#x27; publish rates in messages per second</p></li><li><p><strong>msgThroughputIn</strong>: Same as above, but in bytes per second instead of messages per second</p></li><li><p><strong>msgRateOut</strong>: The sum of all local and replication consumers&#x27; dispatch rates in messages per second</p></li><li><p><strong>msgThroughputOut</strong>: Same as above, but in bytes per second instead of messages per second</p></li><li><p><strong>averageMsgSize</strong>: The average size in bytes of messages published within the last interval</p></li><li><p><strong>storageSize</strong>: The sum of the ledgers&#x27; storage size for this topic. Space used to store the messages for the topic</p></li><li><p><strong>publishers</strong>: The list of all local publishers into the topic. There can be zero or thousands</p><ul><li><p><strong>msgRateIn</strong>: Total rate of messages published by this publisher in messages per second </p></li><li><p><strong>msgThroughputIn</strong>: Total throughput of the messages published by this publisher in bytes per second</p></li><li><p><strong>averageMsgSize</strong>: Average message size in bytes from this publisher within the last interval</p></li><li><p><strong>producerId</strong>: Internal identifier for this producer on this topic</p></li><li><p><strong>producerName</strong>: Internal identifier for this producer, generated by the client library</p></li><li><p><strong>address</strong>: IP address and source port for the connection of this producer</p></li><li><p><strong>connectedSince</strong>: Timestamp this producer was created or last reconnected</p></li></ul></li><li><p><strong>subscriptions</strong>: The list of all local subscriptions to the topic</p><ul><li><p><strong>my-subscription</strong>: The name of this subscription (client defined)</p><ul><li><p><strong>msgRateOut</strong>: Total rate of messages delivered on this subscription (msg/s)</p></li><li><p><strong>msgThroughputOut</strong>: Total throughput delivered on this subscription (bytes/s)</p></li><li><p><strong>msgBacklog</strong>: Number of messages in the subscription backlog</p></li><li><p><strong>type</strong>: This subscription type</p></li><li><p><strong>msgRateExpired</strong>: The rate at which messages were discarded instead of dispatched from this subscription due to TTL</p></li><li><p><strong>lastExpireTimestamp</strong>: The last message expire execution timestamp</p></li><li><p><strong>lastConsumedFlowTimestamp</strong>: The last flow command received timestamp </p></li><li><p><strong>lastConsumedTimestamp</strong>: The latest timestamp of all the consumed timestamp of the consumers</p></li><li><p><strong>lastAckedTimestamp</strong>: The latest timestamp of all the acked timestamp of the consumers</p></li><li><p><strong>consumers</strong>: The list of connected consumers for this subscription</p><ul><li><p><strong>msgRateOut</strong>: Total rate of messages delivered to the consumer (msg/s)</p></li><li><p><strong>msgThroughputOut</strong>: Total throughput delivered to the consumer (bytes/s)</p></li><li><p><strong>consumerName</strong>: Internal identifier for this consumer, generated by the client library</p></li><li><p><strong>availablePermits</strong>: The number of messages this consumer has space for in the client library&#x27;s listen queue. A value of 0 means the client library&#x27;s queue is full and receive() isn&#x27;t being called. A nonzero value means this consumer is ready to be dispatched messages.</p></li><li><p><strong>unackedMessages</strong>: Number of unacknowledged messages for the consumer</p></li><li><p><strong>blockedConsumerOnUnackedMsgs</strong>: Flag to verify if the consumer is blocked due to reaching threshold of unacked messages</p></li><li><p><strong>lastConsumedTimestamp</strong>: The timestamp of the consumer last consume a message</p></li><li><p><strong>lastAckedTimestamp</strong>: The timestamp of the consumer last ack a message</p></li></ul></li></ul></li></ul></li><li><p><strong>replication</strong>: This section gives the stats for cross-colo replication of this topic</p><ul><li><p><strong>msgRateIn</strong>: Total rate of messages received from the remote cluster (msg/s)</p></li><li><p><strong>msgThroughputIn</strong>: Total throughput received from the remote cluster (bytes/s)</p></li><li><p><strong>msgRateOut</strong>: Total rate of messages delivered to the replication-subscriber (msg/s)</p></li><li><p><strong>msgThroughputOut</strong>: Total through delivered to the replication-subscriber (bytes/s)</p></li><li><p><strong>msgRateExpired</strong>: Total rate of messages expired (msg/s)</p></li><li><p><strong>replicationBacklog</strong>: Number of messages pending to be replicated to remote cluster</p></li><li><p><strong>connected</strong>: Whether the outbound replicator is connected</p></li><li><p><strong>replicationDelayInSeconds</strong>: How long the oldest message has been waiting to be sent through the connection, if connected is true</p></li><li><p><strong>inboundConnection</strong>: The IP and port of the broker in the remote cluster&#x27;s publisher connection to this broker</p></li><li><p><strong>inboundConnectedSince</strong>: The TCP connection being used to publish messages to the remote cluster. If there are no local publishers connected, this connection is automatically closed after a minute.</p></li><li><p><strong>outboundConnection</strong>: Address of outbound replication connection</p></li><li><p><strong>outboundConnectedSince</strong>: Timestamp of establishing outbound connection</p></li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;msgRateIn&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">4641.528542257553</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;msgThroughputIn&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">44663039.74947473</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;msgRateOut&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;msgThroughputOut&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;averageMsgSize&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1232439.816728665</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;storageSize&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">135532389160</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;publishers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;msgRateIn&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">57.855383881403576</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;msgThroughputIn&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">558994.7078932219</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;averageMsgSize&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">613135</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;producerId&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;producerName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;connectedSince&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;subscriptions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;my-topic_subscription&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;msgRateOut&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;msgThroughputOut&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;msgBacklog&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">116632</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;msgRateExpired&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">36.98245516804671</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;consumers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;replication&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-6"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-6" title="Direct link to heading">#</a></h4><p>Topic stats can be fetched using <a href="/reference/CliTools#stats"><code>stats</code></a> command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent stats </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-6"></a>REST API<a class="hash-link" href="#rest-api-6" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/getStatsversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /admin/v2/persistent/:tenant/:namespace/:topic/stats</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-6"></a>Java<a class="hash-link" href="#java-6" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().getStats(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="get-internal-stats"></a>Get internal stats<a class="hash-link" href="#get-internal-stats" title="Direct link to heading">#</a></h3><p>It shows detailed statistics of a topic.</p><ul><li><p><strong>entriesAddedCounter</strong>: Messages published since this broker loaded this topic</p></li><li><p><strong>numberOfEntries</strong>: Total number of messages being tracked</p></li><li><p><strong>totalSize</strong>: Total storage size in bytes of all messages</p></li><li><p><strong>currentLedgerEntries</strong>: Count of messages written to the ledger currently open for writing</p></li><li><p><strong>currentLedgerSize</strong>: Size in bytes of messages written to ledger currently open for writing</p></li><li><p><strong>lastLedgerCreatedTimestamp</strong>: time when last ledger was created</p></li><li><p><strong>lastLedgerCreationFailureTimestamp:</strong> time when last ledger was failed</p></li><li><p><strong>waitingCursorsCount</strong>: How many cursors are &quot;caught up&quot; and waiting for a new message to be published</p></li><li><p><strong>pendingAddEntriesCount</strong>: How many messages have (asynchronous) write requests we are waiting on completion</p></li><li><p><strong>lastConfirmedEntry</strong>: The ledgerid:entryid of the last message successfully written. If the entryid is -1, then the ledger has been opened or is currently being opened but has no entries written yet.</p></li><li><p><strong>state</strong>: The state of this ledger for writing. LedgerOpened means we have a ledger open for saving published messages.</p></li><li><p><strong>ledgers</strong>: The ordered list of all ledgers for this topic holding its messages</p><ul><li><p><strong>ledgerId</strong>: Id of this ledger</p></li><li><p><strong>entries</strong>: Total number of entries belong to this ledger</p></li><li><p><strong>size</strong>: Size of messages written to this ledger (in bytes)</p></li><li><p><strong>offloaded</strong>: Whether this ledger is offloaded</p></li></ul></li><li><p><strong>cursors</strong>: The list of all cursors on this topic. There will be one for every subscription you saw in the topic stats.</p><ul><li><p><strong>markDeletePosition</strong>: All of messages before the markDeletePosition are acknowledged by the subscriber.</p></li><li><p><strong>readPosition</strong>: The latest position of subscriber for reading message</p></li><li><p><strong>waitingReadOp</strong>: This is true when the subscription has read the latest message published to the topic and is waiting on new messages to be published.</p></li><li><p><strong>pendingReadOps</strong>: The counter for how many outstanding read requests to the BookKeepers we have in progress</p></li><li><p><strong>messagesConsumedCounter</strong>: Number of messages this cursor has acked since this broker loaded this topic</p></li><li><p><strong>cursorLedger</strong>: The ledger being used to persistently store the current markDeletePosition</p></li><li><p><strong>cursorLedgerLastEntry</strong>: The last entryid used to persistently store the current markDeletePosition</p></li><li><p><strong>individuallyDeletedMessages</strong>: If Acks are being done out of order, shows the ranges of messages Acked between the markDeletePosition and the read-position</p></li><li><p><strong>lastLedgerSwitchTimestamp</strong>: The last time the cursor ledger was rolled over</p></li><li><p><strong>state</strong>: The state of the cursor ledger: Open means we have a cursor ledger for saving updates of the markDeletePosition.</p></li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;entriesAddedCounter&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">20449518</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;numberOfEntries&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">3233</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;totalSize&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">331482</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;currentLedgerEntries&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">3233</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;currentLedgerSize&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">331482</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;lastLedgerCreatedTimestamp&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2016-06-29 03:00:23.825&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;lastLedgerCreationFailureTimestamp&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;waitingCursorsCount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;pendingAddEntriesCount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;lastConfirmedEntry&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;324711539:3232&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;state&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;LedgerOpened&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;ledgers&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;ledgerId&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">324711539</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;entries&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;cursors&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;my-subscription&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;markDeletePosition&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;324711539:3133&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;readPosition&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;324711539:3233&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;waitingReadOp&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;pendingReadOps&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;messagesConsumedCounter&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">20449501</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;cursorLedger&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">324702104</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;cursorLedgerLastEntry&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">21</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;individuallyDeletedMessages&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;[(324711539:3134â€¥324711539:3136], (324711539:3137â€¥324711539:3140], ]&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;lastLedgerSwitchTimestamp&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2016-06-29 01:30:19.313&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;state&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Open&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-7"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-7" title="Direct link to heading">#</a></h4><p>Topic internal-stats can be fetched using <a href="/reference/CliTools#stats-internal"><code>stats-internal</code></a> command.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent stats-internal </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-7"></a>REST API<a class="hash-link" href="#rest-api-7" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/getInternalStatsversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /admin/v2/persistent/:tenant/:namespace/:topic/internalStats</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-7"></a>Java<a class="hash-link" href="#java-7" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().getInternalStats(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="peek-messages"></a>Peek messages<a class="hash-link" href="#peek-messages" title="Direct link to heading">#</a></h3><p>It peeks N messages for a specific subscription of a given topic.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-8"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-8" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent peek-messages </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --count </span><span class="token number">10</span><span class="token plain"> --subscription my-subscription </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Message ID: </span><span class="token number">315674752</span><span class="token plain">:0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Properties:  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;X-Pulsar-publish-time&quot;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2015-07-13 17:40:28.451&quot;</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">msg-payload</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-8"></a>REST API<a class="hash-link" href="#rest-api-8" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/peekNthMessageversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /admin/v2/persistent/:tenant/:namespace/:topic/subscription/:subName/position/:messagePosition</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-8"></a>Java<a class="hash-link" href="#java-8" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String subName = &quot;my-subscription&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">int numMessages = 1;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().peekMessages(topic, subName, numMessages);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="get-message-by-id"></a>Get message by ID<a class="hash-link" href="#get-message-by-id" title="Direct link to heading">#</a></h3><p>It fetches the message with given ledger id and entry id.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-9"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-9" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ./bin/pulsar-admin topics get-message-by-id </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://public/default/my-topic </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -l </span><span class="token number">10</span><span class="token plain"> -e </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-9"></a>REST API<a class="hash-link" href="#rest-api-9" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/getMessageByIdversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /admin/v2/persistent/:tenant/:namespace/:topic/ledger/:ledgerId/entry/:entryId</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-9"></a>Java<a class="hash-link" href="#java-9" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">long ledgerId = 10;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">long entryId = 10;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().getMessageById(topic, ledgerId, entryId);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="skip-messages"></a>Skip messages<a class="hash-link" href="#skip-messages" title="Direct link to heading">#</a></h3><p>It skips N messages for a specific subscription of a given topic.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-10"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-10" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent skip </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --count </span><span class="token number">10</span><span class="token plain"> --subscription my-subscription </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-10"></a>REST API<a class="hash-link" href="#rest-api-10" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/skipMessagesversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">POST /admin/v2/persistent/:tenant/:namespace/:topic/subscription/:subName/skip/:numMessages</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-10"></a>Java<a class="hash-link" href="#java-10" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String subName = &quot;my-subscription&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">int numMessages = 1;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().skipMessages(topic, subName, numMessages);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="skip-all-messages"></a>Skip all messages<a class="hash-link" href="#skip-all-messages" title="Direct link to heading">#</a></h3><p>It skips all old messages for a specific subscription of a given topic.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-11"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-11" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent skip-all </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --subscription my-subscription </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-11"></a>REST API<a class="hash-link" href="#rest-api-11" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/skipAllMessagesversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">POST /admin/v2/persistent/:tenant/:namespace/:topic/subscription/:subName/skip_all</a></p><p><a href="/reference/RestApi#/admin/persistent/:tenant/:namespace/:topic/subscription/:subName/skip_all">More info</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-11"></a>Java<a class="hash-link" href="#java-11" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String subName = &quot;my-subscription&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().skipAllMessages(topic, subName);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="reset-cursor"></a>Reset cursor<a class="hash-link" href="#reset-cursor" title="Direct link to heading">#</a></h3><p>It resets a subscriptionâ€™s cursor position back to the position which was recorded X minutes before. It essentially calculates time and position of cursor at X minutes before and resets it at that position.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-12"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-12" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent reset-cursor </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --subscription my-subscription --time </span><span class="token number">10</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-12"></a>REST API<a class="hash-link" href="#rest-api-12" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/resetCursorversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">POST /admin/v2/persistent/:tenant/:namespace/:topic/subscription/:subName/resetcursor/:timestamp</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-12"></a>Java<a class="hash-link" href="#java-12" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String subName = &quot;my-subscription&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">long timestamp = 2342343L;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().skipAllMessages(topic, subName, timestamp);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="lookup-of-topic"></a>Lookup of topic<a class="hash-link" href="#lookup-of-topic" title="Direct link to heading">#</a></h3><p>It locates broker url which is serving the given topic.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-13"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-13" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent lookup </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;pulsar://broker1.org.com:4480&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-13"></a>REST API<a class="hash-link" href="#rest-api-13" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#/version=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /lookup/v2/topic/persistent/:tenant:namespace/:topic</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-13"></a>Java<a class="hash-link" href="#java-13" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.lookup().lookupDestination(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="get-bundle"></a>Get bundle<a class="hash-link" href="#get-bundle" title="Direct link to heading">#</a></h3><p>It gives range of the bundle which contains given topic</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-14"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-14" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent bundle-range </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0x00000000_0xffffffff&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-14"></a>REST API<a class="hash-link" href="#rest-api-14" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#/version=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /lookup/v2/topic/:topic_domain/:tenant/:namespace/:topic/bundle</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-14"></a>Java<a class="hash-link" href="#java-14" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.lookup().getBundleRange(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="get-subscriptions"></a>Get subscriptions<a class="hash-link" href="#get-subscriptions" title="Direct link to heading">#</a></h3><p>It shows all subscription names for a given topic.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-15"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-15" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent subscriptions </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> my-subscription</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-15"></a>REST API<a class="hash-link" href="#rest-api-15" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/getSubscriptionsversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">GET /admin/v2/persistent/:tenant/:namespace/:topic/subscriptions</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-15"></a>Java<a class="hash-link" href="#java-15" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().getSubscriptions(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="unsubscribe"></a>Unsubscribe<a class="hash-link" href="#unsubscribe" title="Direct link to heading">#</a></h3><p>It can also help to unsubscribe a subscription which is no more processing further messages.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pulsar-admin-16"></a>pulsar-admin<a class="hash-link" href="#pulsar-admin-16" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ pulsar-admin persistent unsubscribe </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --subscription my-subscription </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  persistent://test-tenant/ns1/tp1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-16"></a>REST API<a class="hash-link" href="#rest-api-16" title="Direct link to heading">#</a></h4><p><a href="https://pulsar.incubator.apache.org/admin-rest-api#operation/deleteSubscriptionversion=master&amp;apiVersion=v2" target="_blank" rel="noopener noreferrer">DELETE /admin/v2/namespaces/:tenant/:namespace/:topic/subscription/:subscription</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-16"></a>Java<a class="hash-link" href="#java-16" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String subscriptionName = &quot;my-subscription&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().deleteSubscription(topic, subscriptionName);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="last-message-id"></a>Last Message Id<a class="hash-link" href="#last-message-id" title="Direct link to heading">#</a></h3><p>It gives the last committed message ID for a persistent topic, and it will be available in 2.3.0.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsar-admin topics last-message-id topic-name</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="rest-api-17"></a>REST API<a class="hash-link" href="#rest-api-17" title="Direct link to heading">#</a></h4><p>{% endpoint Get /admin/v2/persistent/:tenant/:namespace/:topic/lastMessageId %}</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="java-17"></a>Java<a class="hash-link" href="#java-17" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly Java"><pre tabindex="0" class="prism-code language-Java codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String topic = &quot;persistent://my-tenant/my-namespace/my-topic&quot;;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">admin.persistentTopics().getLastMessage(topic);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/pulsar/edit/master/site2/website-next/versioned_docs/version-2.6.4/admin-api-persistent-topics.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/2.6.4/admin-api-permissions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Permissions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/2.6.4/admin-api-non-persistent-topics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Non-Persistent topics Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#persistent-topics-resources" class="table-of-contents__link">Persistent topics resources</a><ul><li><a href="#list-of-topics" class="table-of-contents__link">List of topics</a></li><li><a href="#grant-permission" class="table-of-contents__link">Grant permission</a></li><li><a href="#get-permission" class="table-of-contents__link">Get permission</a></li><li><a href="#revoke-permission" class="table-of-contents__link">Revoke permission</a></li><li><a href="#delete-topic" class="table-of-contents__link">Delete topic</a></li><li><a href="#unload-topic" class="table-of-contents__link">Unload topic</a></li><li><a href="#get-stats" class="table-of-contents__link">Get stats</a></li><li><a href="#get-internal-stats" class="table-of-contents__link">Get internal stats</a></li><li><a href="#peek-messages" class="table-of-contents__link">Peek messages</a></li><li><a href="#get-message-by-id" class="table-of-contents__link">Get message by ID</a></li><li><a href="#skip-messages" class="table-of-contents__link">Skip messages</a></li><li><a href="#skip-all-messages" class="table-of-contents__link">Skip all messages</a></li><li><a href="#reset-cursor" class="table-of-contents__link">Reset cursor</a></li><li><a href="#lookup-of-topic" class="table-of-contents__link">Lookup of topic</a></li><li><a href="#get-bundle" class="table-of-contents__link">Get bundle</a></li><li><a href="#get-subscriptions" class="table-of-contents__link">Get subscriptions</a></li><li><a href="#unsubscribe" class="table-of-contents__link">Unsubscribe</a></li><li><a href="#last-message-id" class="table-of-contents__link">Last Message Id</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Inc.Copyright Â© 2021 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.668ae9d7.js"></script>
<script src="/assets/js/main.3d3de418.js"></script>
</body>
</html>